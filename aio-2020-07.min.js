iimDisplay("LOADED"),OO=function(){},OO.prototype.loadByFilter=function(t,e){return void 0===t||Object.keys(t).length<1?this:(void 0===e&&(e=this.table),is_func(this._beforeLoad)&&this._beforeLoad.apply(this),this.row=this.table.selectFirstRow(t),is_func(this._afterLoad)&&this._afterLoad.apply(this,[this.row]),this)},OO.prototype.save=function(t){return void 0===this.table?this:(this.table.insertIgnoreRow(t),this)},OO.prototype.update=function(t){return void 0===this.table?this:(this.table.updateRow(t,{id:this.table.row.id},1),this)},OO.prototype.saveMeta=function(t,e,i){var n=this;if(void 0===this.tableMeta)return this;is_func(this._beforeSaveMeta)&&this._beforeSaveMeta.apply(this);var r=[];null!==t&&"object"==typeof t||r.push({meta_group:t,meta_key:e,meta_value:i}),"object"==typeof t||t.length||r.push(t),r.forEach(function(t){if(is_array(t.meta_value)&&!(t.meta_value.length<1)&&null!==t.meta_group&&null===t.meta_key){for(var e=1;e<t.meta_value.length;e++){var i=$.extend({},t,{meta_key:MD5(t.meta_value[e]).substr(0,8),meta_value:t.meta_value[e]});r.push(i)}t.meta_key=MD5(t.meta_value[0]).substr(0,8),t.meta_value=t.meta_value[0]}}),r.forEach(function(t){null!==t.meta_key&&("object"!=typeof t.meta_value||t.meta_value.length<1||(t.meta_value=JSON.stringify(t.meta_value)))}),is_func(this._beforeSaveMetaQuery)&&this._beforeSaveMetaQuery.apply(this,[r]);var s=[];return r.forEach(function(t){if(null!==t.meta_key&&!(is_array(t.meta_value)&&t.meta_value.length<1)){var e={meta_value:t.meta_value};s.push(n.tableMeta.sql_insertUpdateRow(t,e))}}),this.tableMeta.query(s),this},OO.prototype.getMeta=function(t,e){return void 0===this.tableMeta?null:(this.tableMeta.selectFirstRow({meta_group:t,meta_key:e}),this.tableMeta.row.meta_value)},OO.prototype._beforeSaveMeta=function(){},OO.prototype._beforeSaveMetaQuery=function(t){},OO.prototype._beforeLoad=function(){},OO.prototype._afterLoad=function(t){},oo=function(){},oo.prototype.endby=function(t){return t},WebsitePage=function(t){for(var e in t)this[e]=t[e]},WebsitePage.prototype.s=function(t){return this.selector[t]},WebsitePage.prototype.e=function(t,e=null){return null==e?$(this.selector[t]):null!=e?$(e.find(this.selector[t])):void 0},WebsitePage.prototype.e_notfound=function(t,e=null){return null==e?!$(this.selector[t]).length:null!=e?!$(e.find(this.selector[t])).length:void 0},Website2=function(t){this.page={},this.db=null,this.info={},this.selector={}},Website2.prototype.SetDB=function(t){this.db=new DB2({url:null!=t.url?t.url:"http://lib.mixseo.net/db/_jSQL.php",dbname:t.dbname,user:t.user,pass:t.pass,server:null!=t.server?t.server:"localhost"})},Website2.prototype.PageDefine=function(t){for(var e in t)if(!(e.length<1))for(var i in t[e].name=e,this.page[e]=new WebsitePage(t[e]),"all"==e&&null!=t.all.host&&(this.info.host=t.all.host),t[e].selector)if("is_logged"==i){this.selector.is_logged=t[e].selector[i];break}return this},Website2.prototype.Page=function(t){return this.page[t]},Website2.prototype.IsLogged=function(t){return null==this.selector.is_logged?null:(window.location.href.has(this.info.host)||IIM.iLoadUrl(this.page.all.url),$(this.selector.is_logged).length)},Website2.prototype.Login=function(t){if(null==this.page.login)return Err("Website2.Login: No `login` page is defined !");var e=this.page.login,i=this.page.login.selector;return null==i.user?Err("Website2.Login: No `user` field is defined !"):null==i.pass?Err("Website2.Login: No `pass` field is defined !"):null==i.submit?Err("Website2.Login: No `submit` field is defined !"):(null!=e.url&&e.url.length&&IIM.iLoadUrl(e.url).jWait($(i.user)),$(i.user).length?(IIM.jQueryFill($(i.user),t.user),"function"==typeof e.afterFillUser&&e.afterFillUser(),$(i.pass).length?(IIM.jQueryFill($(i.pass),t.pass),"function"==typeof e.afterFillPassword&&e.afterFillPassword(),$(i.remember).length&&$(i.remember).prop("checked",!0),"function"==typeof e.beforeSubmit&&e.beforeSubmit(),$(i.submit).length?(IIM.jQueryClick($(i.submit)),"function"==typeof e.afterSubmit&&e.afterSubmit(),void(null!=this.selector.is_logged&&IIM.jWait($(this.selector.is_logged)))):Err("Website2.Login: Input field `submit` is not found !")):Err("Website2.Login: Input field `pass` is not found !")):Err("Website2.Login: Input field `user` is not found !"))},Website=function(t){this.page_detection={},this.element_detection={},this.page={},this.element={},this.currentPage=null},Website.prototype.getElement=function(t,e=null){if(null==this.currentPage)return Err(".currentPage is null");var i=this.currentPage;return null==i.element[t]?Err("page.element["+t+"] is undefined"):null==e?$(i.element[t]):null!=e?$(e.find(i.element[t])):void 0},Website.prototype.getCurrentPage=function(t){for(var e in this.currentPage=null,this.page_detection)if(window.location.href.has(this.page_detection[e]))return this.currentPage=this.page[e],this.currentPage.url=window.location.href,this.currentPage;return null},Website.prototype.DefinePage=function(t){for(var e in t)null==this.page_detection[e]&&(this.page_detection[e]=[]),null==this.page[e]&&(this.page[e]={name:e}),null==this.page[e].detection&&(this.page[e].detection=this.page_detection[e]),null==this.page[e].element&&(this.page[e].element={}),this.page_detection[e].push(t[e]);return this},Website.prototype.DefineElement=function(t){if(null==t.page)return Err(".page must be defined !");var e=this.page[t.page];null==this.element[t.page]&&(this.element[t.page]={});var i=this.element[t.page];for(var n in t)"page"!=n&&(e.element[n]=t[n],i[n]=t[n]);return this},BITLY=function(t){this.token=t,this.shorted_url=null,this.shorted_text=null},BITLY.prototype.SetToken=function(t){return this.token=t,this},BITLY.prototype.ShortUrl=function(t){this.shorted_url=null;var e="https://api-ssl.bitly.com/v3/shorten?access_token={TOKEN}&longUrl={URL}&format=json";e=e.replace_variables({TOKEN:this.token,URL:encodeURIComponent(t)});var i=_jGet(e);return 200==i.status_code?(this.shorted_url=i.data.url,i.data.url):t},BITLY.prototype.ShortUrlInText=function(t){var e=this;this.shorted_text=null;return this.shorted_text=t.replace(/(https?:\/\/[^\s]+)/g,function(t){return e.ShortUrl(t)}),this},FACEBOOK=function(){return this.page={},this.actions={},this.actions_prob={"like:posts":.3,"like:comments":.2,"notified:friends":.5,"notified:messages":.7,"notified:notifications":.7,"button:layerCancel":.9,"button:view_previous_comments":.1,"button:view_more_comments":.1,"button:see_more":.1,"button:see_translation":.1,"button:see_original":.1,"button:hide_original":.1,"button:rate_translation":.1,"button:remove_suggested_friends":.1,"button:remove_suggested_groups":.1,"button:join_suggested_groups":.1,"button:nav_messenger":0,"button:nav_groups":.3,"button:nav_pages":.3,"button:nav_events":.1,"button:nav_friends_list":.1,"button:nav_on_this_day":.1,"button:nav_live_video":.1,"button:nav_games":.1,"button:nav_games_feed":.1,"button:messenger_list":.9,"button:home":.6,"button:profile":.2,scroll_down:.8,scroll_up:.1},this},FACEBOOK.prototype.Url=function(t){var e;switch(t.name.toLowerCase()){case"page-tools-video-library":e="https://www.facebook.com/{page_id}/publishing_tools/?section=VIDEOS&sort[0]=created_time_descending"}for(var i in t)e=e.replace("{"+i+"}",t[i]);return e},FACEBOOK.prototype._IsJoinedGroup=function(t){if(null==t)return!1;var e=t.indexOf("://")>0?t:this._GetGroupUrl(t);return _("group_url : "+e),!!(IIM.iLoadUrl(e,60,1).TagWait({type:"SPAN",attr:"ROLE:heading&&TXT:*Members*"})&&$("a:contains('Joined'):visible").length>0&&"Joined"==$("a:contains('Joined'):visible").text().trim())},FACEBOOK.prototype._GetGroupUrl=function(t){return"https://www.facebook.com/groups/"+t+"/?ref=group_browse_new"},FACEBOOK.prototype._GetGroupUrl_NewPost=function(t){return"https://www.facebook.com/groups/"+t+"/?sorting_setting=CHRONOLOGICAL"},FACEBOOK.prototype._GetGroupUrl_Pending=function(t){return"https://www.facebook.com/groups/"+t+"/pending/"},FACEBOOK.prototype._GetGroup_LastPostUrl=function(t,e){return null==t?Err("FACEBOOK._GetGroup_LastPostUrl - `group_id` must be set"):null==e?Err("FACEBOOK._GetGroup_LastPostUrl - `contains` must be set"):IIM.iLoadUrl(this._GetGroupUrl_NewPost(t),60,1).TagWait({type:"SPAN",attr:"ROLE:heading&&TXT:*Members*"})?"https://www.facebook.com"+$("div[id*='mall_post_']:contains('"+e+"') div[id*='feed_subtitle_'] a[href*=permalink]").attr("href"):null},FACEBOOK.prototype._GetGroup_LastPostInfo=function(t,e){return null==t?Err("FACEBOOK._GetGroup_LastPostUrl - `group_id` must be set"):null==e?Err("FACEBOOK._GetGroup_LastPostUrl - `contains` must be set"):IIM.iLoadUrl(this._GetGroupUrl_NewPost(t),60,1).TagWait({type:"SPAN",attr:"ROLE:heading&&TXT:*Members*"})?{url:"https://www.facebook.com"+$("div[id*='mall_post_']:contains('"+e+"') div[id*='feed_subtitle_'] a[href*=permalink]").attr("href")}:null},FACEBOOK.prototype._GetGroupID=function(t){return t.split("/")[4]},FACEBOOK.prototype._GetPostID=function(t){return t.split("/")[6]},FACEBOOK.prototype._GetSharedStatus=function(){var t=$("div[data-testid*='react_share_dialog_content']");return t.text().indexOf("successfully shared")>0?"posted":t.text().indexOf("for approval")>0?"pending":"-"},FACEBOOK.prototype._ParsePageElements=function(t){return this.page.like={posts:$("a:not(.UFIReactionLink):contains('Like')[aria-pressed=false]:visible"),comments:$("a.UFIReactionLink:contains('Like')[aria-pressed=false]:visible")},this.page.input={search:$("input[name=q]:visible:eq(0)"),comments:$("div[data-testid=ufi_comment_composer]:visible"),chat:$("div.fbNubFlyoutFooter div.notranslate[contenteditable=true]:visible")},this.page.button={layerCancel:$("button.layerCancel:visible"),comments:$("a.comment_link:visible"),hide_comments:$("a.UFICommentCloseButton[data-testid=ufi_comment_close_button]:visible"),view_previous_comments:$("a.UFIPagerLink:contains('View previous comments'):visible"),view_more_comments:$("a.UFIPagerLink:contains('View more comments'):visible"),see_more:$("a.see_more_link:contains('See more'):visible"),see_translation:$("div.userContent a:contains('See Translation'):visible"),see_original:$("div.userContent a:contains('See original'):visible"),hide_original:$("div.userContent a:contains('Hide original'):visible"),rate_translation:$("div.userContent a:contains('Rate this translation'):visible"),rate_translation_1:$("div[aria-label*='out of 5 rating']:visible div:has(i.img):eq(0)"),rate_translation_2:$("div[aria-label*='out of 5 rating']:visible div:has(i.img):eq(2)"),rate_translation_3:$("div[aria-label*='out of 5 rating']:visible div:has(i.img):eq(4)"),rate_translation_4:$("div[aria-label*='out of 5 rating']:visible div:has(i.img):eq(6)"),rate_translation_5:$("div[aria-label*='out of 5 rating']:visible div:has(i.img):eq(8)"),replys:$("a.UFIReplyLink:visible"),chat_open:$("#fbDockChatBuddylistNub:visible a"),chat_close:$("#fbDockChatBuddylistNub:visible div.uiToggleFlyout div.fbNubFlyoutTitlebar div.titlebarTextWrapper"),confirm_friends_request:$("button.selected:contains('Confirm')[onclick*=FriendRequest]:visible"),remove_suggested_friends:$("a.uiCloseButton[ajaxify*='eh.php'][title=Remove]:visible"),remove_suggested_groups:$("div[id*=GroupSuggestionCard] a.uiCloseButton[ajaxify*='eh.php'][title=Remove]"),join_suggested_groups:$("a[id*=joinButton_]:visible"),chat_users:$("div[data-testid=chat_sidebar]:visible li a[href*='messages/t']"),nav_messenger:$("div#universalNav a[href*='/messages/t/']:visible"),nav_groups:$("div#appsNav a[href*='/groups/?']:visible"),nav_pages:$("div#appsNav a[href*='/pages/?']:visible"),nav_events:$("div#appsNav a[href*='/events/upcoming']:visible"),nav_friends_list:$("div#appsNav a[href*='/bookmarks/lists/']:visible"),nav_on_this_day:$("div#appsNav a[href*='/onthisday/']:visible"),nav_live_video:$("div#appsNav a[href*='/live/']:visible"),nav_games:$("div#appsNav a[href*='redirect_to_gameroom']:visible"),nav_games_feed:$("div#appsNav a[href*='/apps/feed']:visible"),messenger_list:$("div[aria-label=Conversations] li a"),profile:$("a[title=Profile]:visible"),home:$("a[data-gt*=home_chrome]:visible"),friends:$("a[name=requests]:visible"),messages:$("a[name=mercurymessages]:visible"),notifications:$("a[name=notifications]:visible")},this.page.content={posts:$("div.userContent:visible p:visible"),comments:$("span.UFICommentBody:visible")},this.page.notified={friends:$("span#requestsCountValue:visible"),messages:$("span#mercurymessagesCountValue:visible"),notifications:$("span#notificationsCountValue:visible")},this.page.groups=$("a[data-hovercard*='hovercard/group.php']:visible"),this.page.users=$("a[href*='profile.php']:visible, a.UFICommentActorName:visible"),this},FACEBOOK.prototype._LoadGroupInfo=function(t){var e=DB.Query({table:"fb_group",unique:"id",sql:"SELECT * FROM fb_group WHERE id = '"+t+"' OR id2 = '"+t+"' LIMIT 1"});try{return e.rows[0]}catch(t){return null}},MODULE=function(){this.note=[]},MODULE.prototype.SetInput=function(t){return this.data=t.data,this.task=t.task,this.data_input=this.task.data_input,this.output={worker_status:null,result_unique:null},this},MODULE.prototype.Fail=function(t="",e){return null!=t&&this.note.push("Fail: "+t),_("MODULE.Fail : "+t,"red"),iimDisplay("Fail : "+t),this.output.worker_status="fail",this.output.note=this.note.join("\n"),"function"==typeof e?e():this},MODULE.prototype.Retry=function(t,e=""){return null!=e&&this.note.push("Retry: "+e),_("MODULE.Retry : "+e,"gray"),iimDisplay("Retry : "+e),"string"==typeof t&&(t=new Date(t)),this.output.worker_status="retry",this.output.time_schedule=t.ToSQL(),this.output.note=this.note.join("\n"),this},MODULE.prototype.Finished=function(t="",e){return null!=t&&this.note.push("Finished: "+t),_("MODULE.Finished : "+t,"blue"),iimDisplay("Finished : "+t),this.output.worker_status="finished",this.output.note=this.note.join("\n"),"function"==typeof e?e():this},WORKER=function(t){this.id=t.id,this.name=t.name,this.Identity(),this.task=null},WORKER.prototype.Identity=function(){return this},WORKER.prototype.SetTask=function(t){return _("in WORKER.prototype.SetTask","lightgray"),this.task=new TASK({id:t.id}),this},WORKER.prototype.Work=function(){return null==this.task.data?task.Fail("Can not get task.data (null) !"):(this.task.Process(),this)},WORKER.prototype.End=function(){return DEBUG?_("*** FIREFOX WILL BE CLOSED IN LIVE MODE ***","red"):(_("*** FIREFOX WILL BE CLOSED IN LIVE MODE ***","blue"),FF.Close_FF()),null},TASK=function(t){this.id=t.id,this.db_now=null,this.info=null,this.data=null,this.error=[],this.LoadInfo(),null!=this.info&&(this.LoadData(),this.ModulePrepare())},TASK.prototype.LoadInfo=function(){if(null==this.id||this.id<1)return this.Fail("Error ! TASK.id is null or invalid !");var ret=DB.Query({table:"worker_task",unique:"id",sql:"SELECT *, NOW() as now_ FROM worker_task WHERE id="+this.id});return ret.status&&null!=ret.rows&&ret.rows.length>0&&(this.info=ret.rows[0],this.info.now_=new Date(this.info.now_),null!=this.info.data_input&&this.info.data_input.length>0&&eval("this.info['data_input'] = "+this.info.data_input)),this},TASK.prototype.LoadData=function(){if(null==this.info)return this.Fail("Error ! TASK.info is null !");if(null==this.info.table_data||this.info.table_data.length<1)return this.Fail("Error ! worker_task.table_data is invalid !");if(null==this.info.table_id||this.info.table_id<1)return this.Fail("Error ! worker_task.table_id is invalid !");switch(ret=DB.Query({table:this.info.table_data,unique:"id",sql:"SELECT * FROM `"+this.info.table_data+"` WHERE id="+this.info.table_id}),ret.status&&null!=ret.rows&&ret.rows.length>0&&(this.data=ret.rows[0]),this.info.table_data){case"asset":eval("this.data['data'] = "+this.data.data+";"),eval("this.data['profile_data'] = "+this.data.profile_data+";")}return this},TASK.prototype.ModulePrepare=function(){if(null==this.data)return!1;try{this.module=eval("new MODULE__"+this.info.module.trim()+"();"),this.module.SetInput({data:this.data,task:this.info})}catch(t){iimDisplay(t)}return this},TASK.prototype.Process=function(){if(null==this.module)return this.Fail("module `MODULE__"+this.info.module+"` is undefined ! ");DEBUG||this.info.Update({worker_status:"processing",note:null}),null!=this.info&&this.info.Update({note:null}),this.module.DataPrepare(),this.module.Process();var t={};_Var("this.module.output",this.module.output),"finished"==this.module.output.worker_status&&(t.worker_status="finished",t.last_finished="NOW()",t.total_finished="<RAW>total_finished+1"),"retry"==this.module.output.worker_status&&(t.worker_status="retry",t.status="ready",t.time_schedule=this.module.output.time_schedule),"fail"==this.module.output.worker_status&&(t.worker_status="fail"),null!=this.module.output.result_unique&&(t.result_unique=this.module.output.result_unique),null!=this.module.output.note&&(t.note="object"==typeof this.module.output.note?this.module.output.note.join("\n"):this.module.output.note),null!=this.module.output.note2&&(t.note2="object"==typeof this.module.output.note2?this.module.output.note2.join("\n"):this.module.output.note2),DEBUG||this.info.Update(t),_("update_data"),_(t)},TASK.prototype.IsDone=function(){var t=1*this.info.repeat_every==0;return t|=this.info.repeat_total>0&&this.info.repeat_total<=this.info.total_finished},TASK.prototype.IsReady=function(){var t=1*this.info.repeat_every>0;return t&=1*this.info.repeat_total>0&&1*this.info.repeat_total>1*this.info.total_finished||1*this.info.repeat_total==0},TASK.prototype.Error=function(t){return this.error.push(t),Err(t)},TASK.prototype.Fail=function(t){var e={worker_status:"fail"};return e.note="object"==typeof t?t.join("\n"):t,this.info.Update(e),Err(t)},OBJECT=function(t){return this.debug_on=!1,this.debugs=[],this},OBJECT.prototype.DebugOn=function(){return this.debug_on=!0,this},OBJECT.prototype.DebugOff=function(){return this.debug_on=!1,this},OBJECT.prototype.___Debug___=function(t){return this.Debug(t)},OBJECT.prototype.Debug=function(t){for(var e in t)this.debug_on&&_Var("Debug : "+e,t[e]),this.debugs[e]=t},CAPTCHA=function(t){this.input=t,this.output={solved_text:null,img_file:null,note:""}},CAPTCHA.prototype.Solve=function(){switch(this.input.type){case"recaptcha2":this._SolveRecaptcha2_2Captcha();break;case"custom":this._SaveImg(),this._SolveProcess(),this._FillSolvedText()}return this},CAPTCHA.prototype._SolveProcess=function(){if(null==this.output.img_file)return Err("output.img is not defined !");this.output.solved_text=null;for(var t=["Anti-Captcha","DBC","2Captcha"],e={name:null,iframe:$("<iframe>",{id:"ifrcaptcha"}).css({width:"100%",height:"300px"}),container:$("<div>",{xid:"captcha_controller"}).css({position:"fixed",top:"10px",left:"10px",border:"1px solid red","background-color":"lightyellow","z-index":"2147483646",opacity:"0.9",overflow:"auto"})},i=0;i<t.length;i++){switch(t[i]){case"2Captcha":if(null==this.input.api_2captcha)continue;break;case"Anti-Captcha":if(null==this.input.api_anti_captcha)continue;break;case"DBC":if(null==this.input.api_dbc_user||null==this.input.api_dbc_pass)continue}switch(_("solvers[i] : "+t[i]),t[i]){case"2Captcha":e.iframe.attr("src","http://imacros2.2captcha.com/");break;case"Anti-Captcha":e.iframe.attr("src","http://antigate.com/imacros.html");break;case"DBC":e.iframe.attr("src","http://api.dbcapi.me/decaptcher?function=picture2&print_format=html")}switch($("[xid=captcha_controller]").remove(),$("body").prepend(e.container.append(t[i]).append(e.iframe)),IIM.Wait(2),t[i]){case"2Captcha":IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=key]"),this.input.api_2captcha),IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=file]"),this.output.img_file),IIM.iFrame($("#ifrcaptcha")).jQueryClick($("[value=recognize]"),60),(n=$iFrame($("#ifrcaptcha"),"body").text()).indexOf("ERROR_")>=0?this.output.note=n:this.output.solved_text=n;break;case"Anti-Captcha":var n;IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=key]"),this.input.api_anti_captcha),IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=file]"),this.output.img_file),IIM.iFrame($("#ifrcaptcha")).jQueryClick($("[value=recognize]"),60),(n=$iFrame($("#ifrcaptcha"),"body").text()).indexOf("ERROR_")>=0?this.output.note=n:this.output.solved_text=n;break;case"DBC":IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=username]"),this.input.api_dbc_user),IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=password]"),this.input.api_dbc_pass),IIM.iFrame($("#ifrcaptcha")).jQueryFill($("[name=pict]"),this.output.img_file),IIM.iFrame($("#ifrcaptcha")).jQueryClick($("[value=Send]"),60),IIM.iFrame($("#ifrcaptcha")).TagWait({tag:"td",pos:"6"})&&(this.output.solved_text=$iFrame($("#ifrcaptcha"),"td:eq(5)").text().trim())}if(_("CAPTCHA.output ["+t[i]+"]","green"),_(this.output),null!=this.output.solved_text)break;IIM.Wait(.5)}return $("[xid=captcha_controller]").remove(),this},CAPTCHA.prototype._SaveImg=function(){if(null==this.input.img||this.input.img.length<=0)return Err("output.img is not defined !");var t=this.input.img.parent();this.input.img.detach().prependTo("body").css({position:"fixed","background-color":"white","z-index":"2147483647"}).show(),IIM.jQueryScreenshot(this.input.img,APP.tmpDir,"screenshot.jpg"),this.input.img.detach().prependTo(t).css({position:"unset","background-color":"unset","z-index":"unset"}).show(),this.output.img_file=IIM.last_saved_file,_("IIM.last_saved_file"),_(IIM.last_saved_file)},CAPTCHA.prototype._FillSolvedText=function(){if(null==this.input.solved_input||this.input.solved_input.length<=0)return Err("input.solved_input is not defined !");IIM.jQueryFill(this.input.solved_input,this.output.solved_text)},CAPTCHA.prototype._IsSolved=function(){var t=null!=this.output.solved_text;return"function"==typeof this.input.IsCorrect&&(t&=this.input.IsCorrect()),t},CAPTCHA.prototype._IsCorrect=function(){return null==this.input.IsCorrect||"function"!=typeof this.input.IsCorrect?!Err("input.IsCorrect is not defined !"):this.input.IsCorrect()},CAPTCHA.prototype._SolveRecaptcha2_AntiCaptcha=function(t){if($("#g-recaptcha-response").show(),null==this.input.api_anti_captcha)return Err("api_anti_captcha is undefined !");var e=$(".g-recaptcha").data("sitekey");if((null==e||e.length<5)&&(e=$("iframe[src*=recaptcha]").attr("src").between("k=","&"),_Var("googlekey",e)),null==e||e.length<5)return Err("Can not get googlekey !");var i={clientKey:this.input.api_anti_captcha,task:{type:"NoCaptchaTask",websiteKey:e,websiteURL:encodeURIComponent(window.location.href)}};_(i);var n=$.ajax({url:"http://api.anti-captcha.com/createTask",type:"post",cache:!1,async:!1,data:{clientKey:this.input.api_anti_captcha,task:{type:"NoCaptchaTask",websiteKey:e,websiteURL:encodeURIComponent(window.location.href)}},dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON;_Var("j",n)},CAPTCHA.prototype._SolveRecaptcha2_2Captcha=function(){var t=this;if($("#g-recaptcha-response").show(),null==this.input.api_2captcha)return Err("api_2captcha is undefined !");var e=$(".g-recaptcha").data("sitekey");if((null==e||e.length<5)&&(e=$("iframe[src*=recaptcha]").attr("src").split("k=")[1].split("&")[0],_("googlekey"),_(e)),null==e||e.length<5)return Err("Can not get googlekey !");var i="https://2captcha.com/in.php?key={KEY}&method=userrecaptcha&googlekey={GOOGLEKEY}&pageurl={PAGEURL}".replace_variables({KEY:this.input.api_2captcha,GOOGLEKEY:e,PAGEURL:window.location.href});_(i),$("#g-recaptcha-response").show();var n=_jGet(i,null);if(_Var("ret",n),null!=n&&n.indexOf("|")>0){var r=n.split("|")[0],s=n.split("|")[1];if("OK"==r){i="https://2captcha.com/res.php?key={KEY}&action=get&id={ID}".replace_variables({KEY:this.input.api_2captcha,ID:s});var o=0,a=window.setInterval(function(){o++,$("#g-recaptcha-response").val("getting result...");var e=_jGet(i,null);if(_(e),$("#g-recaptcha-response").val(e),e.length>100){if(window.clearInterval(a),null!=e&&e.indexOf("|")>0){var n=e.split("|")[0],r=e.split("|")[1];"OK"==n&&($("#g-recaptcha-response").val(e),_("Solved","blue"),t.output.solved_text=r)}}else _("Solving : "+e+" ("+o+")")},5e3);IIM.TagWait({type:"TEXTAREA",attr:"ID:*g-recaptcha-response*&&VALUE:*OK|*"},60,1200,1)?$("#g-recaptcha-response").show().val($("#g-recaptcha-response").val().split("|")[1]):_("Can not solve")}}},SQL=function(t){},SQL.prototype.UniqueInsert=function(t,e,i=null){var n="INSERT INTO `"+t+"` SET "+DB._SqlSet(e);return null!=i&&(n+=" ON DUPLICATE KEY UPDATE "+DB._SqlSet(i)),n};var DB_QUERY=function(t){this.rows=null,this.status=null,this.sqls=[],"string"==typeof t?(this.sql=t,this.ret=DB._jSQL(this.sql)):(this.unique=null!=t.unique?t.unique:"id",this.table=null!=t.table?t.table:null,this.sql=null!=t.sql?t.sql:null,null!=this.sql&&(this.ret=DB._jSQL(this.sql))),this.ParseReturn()};DB_QUERY.prototype.InitSQLs=function(){this.sqls=[]},DB_QUERY.prototype.QuerySQLs=function(){return DB.Query(this.sqls.join("")).status},DB_QUERY.prototype.ParseReturn=function(t){null==t&&(t=this),t.status=t.ret.status,t.status&&null!=t.ret.rows&&t.ret.rows.length>0&&(t.rows=t.ret.rows,t.AddRowsMethod())},DB_QUERY.prototype.ResetQuery=function(){this.ret=DB._jSQL(this.sql),this.ParseReturn()},DB_QUERY.prototype.AddRowsMethod=function(){var t=this;if(null==this.table)return _("DB_QUERY.table is not set","gray"),null;for(var e=0;e<this.rows.length;e++){var i=this.rows[e];i.Update=function(e,i){var n=t.table,r=t.unique,s=this[r],o="UPDATE `"+n+"` SET "+DB._SqlSet(e)+" WHERE `"+r+"`='"+s+"' LIMIT 1;";if(null==i||!i.sql_only){if(DB.Query(o).status)for(var a in _("--- row.Update : "+r+"="+s+" ("+JSON.stringify(e)+") ","grey"),t.ResetQuery(),e)this[a]=t.rows[0][a];return this}t.sqls.push(o)},i.UpdateSQL=function(e){var i=t.table,n=t.unique,r=this[n];return"UPDATE `"+i+"` SET "+DB._SqlSet(e)+" WHERE `"+n+"`='"+r+"' LIMIT 1;"},i.Delete=function(e){var i=t.table,n=t.unique,r=this[n],s="DELETE FROM `"+i+"` WHERE `"+n+"`='"+r+"' LIMIT 1;";null!=e&&e.sql_only?this.sqls.push(s):DB.Query(s).status&&(_("--- row.Delete : "+n+"="+r+" ","grey"),t.ResetQuery())}}},DB_QUERY.prototype.Rows=function(t){if(null==this.rows)return null;if(null==t)return this.rows;var e=[];for(var i in t)for(var n=t[i],r=0;r<this.rows.length;r++){var s=this.rows[r];s[i].indexOf(n)>=0&&e.push(s)}return e},DB_QUERY.prototype.ColumnsData=function(t){for(var e=[],i=0;i<this.rows.length;i++)e.push(this.rows[i][t]);return e},DB={is_debug:!1,ret:null,setting:{dbname:null,user:null,pass:null,server:"localhost"},last_key_fields:null,Connect:function(t){for(var e in t)DB.setting[e]=t[e]},Query:function(t){return new DB_QUERY(t)},SaveNLoad:function(t){for(var e in this.last_key_fields={},t.key_fields)this.last_key_fields[e]=t.key_fields[e];if(null==t.table)return Err("SaveNLoad : `table` must be set !");if(null==t.key_fields)return Err("SaveNLoad : `key_fields` must be set !");var i=$.extend({},t.key_fields,t.data_fields),n=DB.Query("SELECT * FROM `"+t.table+"` WHERE "+DB._SqlSet(t.key_fields," AND ")+" ");if(this.is_debug&&_(n),null==n||null==n.rows){n=DB.Query("INSERT INTO `"+t.table+"` SET "+DB._SqlSet(i));if(this.is_debug&&_Var("ret.INSERT",n),Object.keys(t.key_fields).indexOf("id")>=0&&null!=n.ret&&n.ret.lastid>0){n=DB.Query({table:t.table,unique:"id",sql:"SELECT * FROM `"+t.table+"` WHERE id = "+n.ret.lastid+" "});this.is_debug&&_Var("ret.SELECT",n)}else{n=DB.Query("SELECT * FROM `"+t.table+"` WHERE "+DB._SqlSet(t.key_fields," AND ")+" ");this.is_debug&&_Var("ret.SELECT",n)}return this.is_debug=!1,null==n||null==n.rows?null:n.rows[0]}return 1==t.update_exist&&DB.Query("UPDATE `"+t.table+"` SET "+DB._SqlSet(i)+" WHERE "+DB._SqlSet(t.key_fields," AND ")),this.is_debug=!1,n.rows[0]},HashTable_Update:function(t){if(null==t.table)return Err("HashTable_Update.input.table is invalid !");if("object"!=typeof t.key_fields)return Err("HashTable_Update.input.key_fields is invalid !");if("object"!=typeof t.rows)return Err("HashTable_Update.input.rows is invalid !");null==t.rows.length&&(t.rows=[t.rows]),_(".HashTable_Update "+t.table,"gray");for(var e=[],i=[],n=0;n<t.rows.length;n++){for(var r=[],s=0;s<t.key_fields.length;s++)r.push(t.rows[n][t.key_fields[s].trim()]);var o=MD5(r);i.push(o);var a=$.extend({},t.rows[n],{hash:o}),l=$.extend({},t.rows[n]),u="INSERT INTO "+t.table+" SET "+DB._SqlSet(a)+" ON DUPLICATE KEY UPDATE "+DB._SqlSet(l);e.push(u)}var h=DB.Query(e.join(";"));if(_(h),t.select){u="SELECT * FROM "+t.table+" WHERE `hash` IN ('"+i.join("','")+"') ";return _(u),DB.Query({table:t.table,unique:"id",sql:u})}return this},QuickUpdate:function(t){_(t);var e="UPDATE {TABLE} SET {SET} WHERE {WHERE} {LIMIT};";return e=e.replace_variables({TABLE:t.table,SET:DB._SqlSet(t.data),WHERE:DB._SqlSet(t.key," AND "),LIMIT:parseInt(t.limit)>0?" LIMIT "+parseInt(t.limit):" LIMIT 1 "}),this.ret=DB.Query(e),this},Select:function(t){t.fields=null==t.fields?"*":t.fields,"object"==typeof t.fields&&(t.fields="`"+t.fields.implode("`,`")+"`"),t.where=null!=t.where?" WHERE "+t.where:"",t.limit=null!=t.limit?" LIMIT "+t.limit:"";var e=" SELECT {FIELDS} FROM {TABLE} {WHERE} {LIMIT}";e=e.replace_variables({FIELDS:t.fields,TABLE:t.table,WHERE:t.where,LIMIT:t.limit}),_(e);var i=DB.Query({table:t.table,unique:t.unique,sql:e});return _(i.ret),i.ret},formatRows:function(t,e){if(!t.length)return null;if("function"!=typeof e)return null;for(var i=0;i<t.length;i++)e(t[i])},And:function(t){return DB._SqlSet(t," AND ")},Or:function(t){return DB._SqlSet(t," OR ")},Debug:function(){return this.is_debug=!0,this},_SqlSet:function(t,e=",",i=null){var n=[];if(i=null==i?"":"`"+i+"`.",e=e.toUpperCase(),$.each(t,function(t,r){if("function"==typeof r&&(r=r()),"array"==typeof r&&(r="<IN> ('"+r.join("','")+"')"),"boolean"==typeof r&&(r=r.toString()),null==r)return["AND","OR"].has(e)&&n.push(i+"`"+t+"` IS NULL"),void(["AND","OR"].has(e)||n.push(i+"`"+t+"`=NULL"));var s=r.toString().trim().toUpperCase();if(0!=s.indexOf("!=")&&0!=s.indexOf("<>"))if(0!=s.indexOf("<+>"))if(0!=s.indexOf("<DATE_ADD>"))if(0!=s.indexOf("<NOW_ADD>"))if(0!=s.indexOf("<->"))if(0!=s.indexOf("<LIKE>"))if(0!=s.indexOf("<NOT LIKE>"))if(0!=s.indexOf("<IN>"))if(0!=s.indexOf("<IS>"))if(0!=s.indexOf("NOW()"))if(0!=s.indexOf("<FUNC>"))if(0!=s.indexOf("<RAW>"))if(s.indexOf(" AGO>")>0){var o=r.split("AGO >")[0].replace("<","").trim().split(" ")[0],a=r.split(" AGO>")[1].trim();n.push("TIMESTAMPDIFF("+o+", "+i+"`"+t+"`, NOW()) "+a)}else if(0!=s.indexOf(":>"))if(0!=s.indexOf(":<"))switch(typeof r){case"object":l=(l=JSON.stringify(r)).length>0?l.replace(/\'/g,"\\'"):"",n.push(i+"`"+t+"`='"+l+"'");break;case"number":n.push(i+"`"+t+"`='"+r+"'");break;default:n.push(i+"`"+t+"`='"+r.replace(/\'/g,"\\'")+"'")}else{l=r.replace(":<","<").trim();n.push(i+"`"+t+"`"+l)}else{var l=r.replace(":>",">").trim();n.push(i+"`"+t+"`"+l)}else n.push(i+"`"+t+"`="+r.replace("<RAW>",""));else n.push(r.replace("<FUNC>","").trim());else n.push(i+"`"+t+"` = NOW() ");else n.push(i+"`"+t+"` "+r.replace("<IS>","IS "));else n.push(i+"`"+t+"` "+r.replace("<IN>","IN "));else n.push(i+"`"+t+"` "+r.replace("<NOT LIKE>","NOT LIKE "));else n.push(i+"`"+t+"` "+r.replace("<LIKE>","LIKE "));else{var l=r.replace("<->","").trim();n.push(i+"`"+t+"` = IF(`"+t+"` IS NULL, "+l+", `"+t+"` - "+l+")")}else{u=r.replace("<NOW_ADD>","").trim();n.push(i+"`"+t+"` = DATE_ADD(NOW(), INTERVAL "+u+")")}else{var u=r.replace("<DATE_ADD>","").trim();n.push(i+"`"+t+"` = DATE_ADD(`"+t+"`, INTERVAL "+u+")")}else{var l=r.replace("<+>","").trim();n.push(i+"`"+t+"` = IFNULL(`"+t+"` + "+l+", "+l+")")}else n.push(i+"`"+t+"` "+r)}),","!=e)for(var r=0;r<n.length;r++)n[r]="("+n[r]+")";return n.join(e)},_Url:function(){var t="http://lib.mixseo.net/db/_jSQL.php?";return t+="d="+encodeURIComponent(DB.setting.dbname)+"&",t+="u="+encodeURIComponent(DB.setting.user)+"&",t+="p="+encodeURIComponent(DB.setting.pass)+"&",t+="s="+encodeURIComponent(DB.setting.server)+"&",t+="_="+RAND.Between(1e4,99999)},_jSQL:function(t,e={}){$.each(e,function(e,i){t=t.replace(e,i)});try{return $.ajax({url:DB._Url(),type:"post",cache:!1,async:!1,data:{sql:encodeURIComponent(t)},dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON}catch(t){return t}}},DB2=function(t){this.is_debug=1,this.sqls=[],this.url=null!=t.url?t.url:null,this.setting={dbname:null!=t.dbname?t.dbname:null,user:null!=t.user?t.user:null,pass:null!=t.pass?t.pass:null,server:null!=t.server?t.server:"localhost"}},DB2.prototype.Query=function(t){if(null==t)return null;if("string"==typeof t?this.sql=t:t.length>0?this.sql=t.join(";"):(this.unique=null!=t.unique?t.unique:"id",this.table=null!=t.table?t.table:null,this.sql=null!=t.sql?t.sql:null),this.last_sql=this.sql,null==this.sql)return null;var e=this._jSQL(this.sql);if(null!=this.unique&&null!=e&&e.status&&null!=e.rows&&e.rows.length>0){this.rows=e.rows;for(var i=0;i<e.rows.length;i++)e.rows[i]._db={table:this.table,unique:this.unique},this.AddRowMethod(e.rows[i]),"function"==typeof t.rowActions&&t.rowActions(e.rows[i])}if(null!=e&&null!=e.rows&&e.rows.length>0)for(var n in e.fields=[],e.rowsBy={},e.rows[0])if("string"==typeof e.rows[0][n]){e.fields.push(n);for(i=0;i<e.rows.length;i++)null==e.rowsBy[n]&&(e.rowsBy[n]={}),e.rowsBy[n][e.rows[i][n]]=e.rows[i]}return e},DB2.prototype.AddRowMethod=function(t){if(null==this.unique)return null;if(null==this.table)return null;var e=this;return t.Update=function(t,i){this._db.table;var n=this._db.unique,r=this[n],s="UPDATE `"+this._db.table+"` SET "+e._SqlSet(t)+" WHERE `"+n+"`='"+r+"' LIMIT 1;";if(_(s),null==i||!i.sql_only){var o=e.Query(s);if(o.status)for(var a in _("--- row.Update : "+n+"="+r+" ("+JSON.stringify(t)+") ","grey"),t)this[a]=t[a];else _("ERR: Row.Update","red"),_(o);return this}e.sqls.push(s)},t.UpdateSQL=function(t){this._db.table;var i=this._db.unique,n=this[i];return" UPDATE `"+this._db.table+"` SET "+e._SqlSet(t)+" WHERE `"+i+"`='"+n+"' LIMIT 1 "},t.Delete=function(t){this._db.table;var i=this._db.unique,n=this[i],r="DELETE FROM `"+e.table+"` WHERE `"+i+"`='"+n+"' LIMIT 1;";null!=t&&t.sql_only?this.sqls.push(r):e.Query(r).status&&_("--- row.Delete : "+i+"="+n+" ","grey")},this},DB2.prototype.Select=function(t){_Var("DB.Select",t)},DB2.prototype.Debug=function(){return this.is_debug=!0,this},DB2.prototype._jSQL=function(t,e=null){var i;null!=e&&$.each(e,function(e,i){t=t.replace(e,i)});var n=this.url+"?";n+="d="+encodeURIComponent(this.setting.dbname)+"&",n+="u="+encodeURIComponent(this.setting.user)+"&",n+="p="+encodeURIComponent(this.setting.pass)+"&",n+="s="+encodeURIComponent(this.setting.server)+"&",n+="_="+RAND.Between(1e4,99999);try{return(i=$.ajax({url:n,type:"post",cache:!1,async:!1,data:{sql:encodeURIComponent(t)},dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON).success=null!=i&&i.status&&null!=i.rows,i.found=i.success&&i.rows.length>0,i}catch(t){return t}},DB2.prototype._SqlSet=function(t,e=",",i=null){return DB._SqlSet(t,e,i)},SiteSharer=function(t){this.err=null,this.input=t},SiteSharer.prototype.LoadLoginPage=function(t){return this._core({title:"Load Login Page",f:t})},SiteSharer.prototype.LoadSubmitPage=function(t){return this._core({title:"Load Submit Page",f:t})},SiteSharer.prototype.ActivateFillForm=function(t){return this._core({title:"Activate Fill Form",f:t})},SiteSharer.prototype.FindItem=function(t){return this._core({title:"Find Item",f:t})},SiteSharer.prototype.FillContent=function(t){return this._core({title:"Fill Content",f:t})},SiteSharer.prototype.FindGroup=function(t){return this._core({title:"Find Group",f:t})},SiteSharer.prototype.CreateGroup=function(t){return this._core({title:"Create Group",f:t})},SiteSharer.prototype.Submit=function(t){return this._core({title:"Submit",f:t})},SiteSharer.prototype.GetResult=function(t){return this._core({title:"Get Result",f:t})},SiteSharer.prototype._core=function(t){if(_(".."+t.title+"..","lightgreen"),iimDisplay(".."+t.title+".."),"function"!=typeof t.f)return this.err="function is undefined !",!1;try{if(!t.f())return this.err="FAIL on "+t.title+" !","object"==typeof this.input&&(this.input.err=this.err),iimDisplay(this.err),_(".."+t.title+" --\x3e FAIL..","green"),IIM.Wait(3),!1;_(".."+t.title+" --\x3e SUCCESS..","green")}catch(t){return iimDisplay("--CODE ERROR--\n"+JSON.stringify(t)),IIM.Wait(5),!1}return this},SiteSharer.prototype.Err=function(t){return this.err.push(t),Err(t)},Taxonomy=function(t){return this.db=null,this.data=t.data,this.filter=t.filter,this},Taxonomy.prototype.SetDB=function(t){return this.db=t,this},Taxonomy.prototype.SQL=function(t){return this.data.unique=[this.data.table,this.data.table_id,this.data.taxonomy].join("|"),this.data.last_updated="NOW()",this.update_data={value:this.data.value,last_updated:"NOW()"},"INSERT INTO `_taxonomy` SET "+DB._SqlSet(this.data)+" ON DUPLICATE KEY UPDATE "+DB._SqlSet(this.update_data)},Taxonomy.prototype.Save=function(t){if(null==this.db)return Err("No db is defined !");var e=this.db.Query(this.SQL());return _(e),this},Taxonomy.prototype.Filter=function(t){if(null==this.db)return Err("No db is defined !");var e=Object.keys(this.filter),i="";i="SELECT {pre}.`table_id` FROM `_taxonomy` {pre} WHERE {pre}.`table`='{table}' AND {pre}.`taxonomy`='{tax}' AND {pre}.`value`{value}".replace_variables({pre:"t0",table:this.data.table,tax:e[0],value:this._Filter_Value(this.filter[e[0]])});for(var n=1;n<e.length;n++){if(n==e.length-1)var r="object"==typeof t.out_fields?"{pre}.`"+t.out_fields.join("`,{pre}.`")+"`":"{pre}.`table_id`";else r="{pre}.`table_id`";i="SELECT {out_fields} FROM `_taxonomy` {pre} WHERE {pre}.`table_id` IN ({in}) AND {pre}.`table`='{table}' AND {pre}.`taxonomy`='{tax}' AND {pre}.`value`{value}".replace_variables({out_fields:r}).replace_variables({pre:"t"+n,table:this.data.table,tax:e[n],value:this._Filter_Value(this.filter[e[n]]),in:i})}return this.db.Query({table:this.data.table,sql:i})},Taxonomy.prototype._Filter_Value=function(t){var e="='"+t+"'";return null==t&&(e=" IS NULL"),"object"==typeof t&&t.length&&(e=" IN ('"+t.join("','")+"') "),e},FF={saved_tab_index_1:null,saved_tab_index_2:null,saved_tab_index_3:null,Total_Tabs:function(){return gBrowser.browsers.length},Current_Tab:function(){return gBrowser.tabContainer.selectedIndex},Save1:function(){return this.saved_tab_index_1=this.Current_Tab(),this},Return1:function(){return this.Select_Tab(this.saved_tab_index_1),this},Save2:function(){return this.saved_tab_index_2=this.Current_Tab(),this},Return2:function(){return this.Select_Tab(this.saved_tab_index_2),this},Save3:function(){return this.saved_tab_index_2=this.Current_Tab(),this},Return3:function(){return this.Select_Tab(this.saved_tab_index_3),this},Find_Tab:function(t){if(null!=t.url)for(var e=0;e<FF.Total_Tabs()&&(FF.Select_Tab(e),!(window.location.href.indexOf(t.url)>=0));e++);return this},Url:function(t){return IIM.iLoadUrl(t,60,0),this},Add_Tab:function(t=!0){var e=FF.Total_Tabs()-FF.Current_Tab()+1,i=IIM._Head0();return i+="TAB OPEN"+jsLF,i+=t?"TAB T="+e+jsLF:"",iimPlay(i),this},Select_Tab:function(t){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this},Close_Tab:function(t){return t>FF.Total_Tabs()-1?(iimDisplay("Tab '"+t+"' is not available !"),this):(null==t&&(t=FF.Current_Tab()),FF.Select_Tab(t),gBrowser.removeCurrentTab(),this)},Close_FF:function(t){var e=IIM._Head();e+="TAB CLOSEALLOTHERS"+jsLF,e+="TAB CLOSE"+jsLF,iimPlay(e)},Close_Other_Tabs:function(){var t=IIM._Head0();t+="TAB CLOSEALLOTHERS"+jsLF,iimPlay(t),CORE.Page_init()},Close_Right_Tabs:function(){for(var t=FF.Current_Tab(),e=FF.Total_Tabs()-1;e>t;e--)FF.Close_Tab(e)},Close_Left_Tabs:function(){for(var t=FF.Current_Tab()-1;t>=0;t--)FF.Close_Tab(t)},Clean_All_Tabs:function(){var t=IIM._Head0();t+="TAB OPEN"+jsLF,t+="TAB T=2"+jsLF,t+="TAB CLOSEALLOTHERS"+jsLF,iimPlay(t),CORE.Page_init()}},RAND={Happen:function(t){var e=RAND.Between(1,100)/100;return _(e+" vs "+t),t<=e},Between:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},String:function(t=5,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){for(var i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*e.length));return i},Number:function(t=5){return RAND.String(t,"0123456789")},ArrayItem:function(t){return t[RAND.Between(1,t.length)-1]},ObjectItem:function(t){return t[RAND.ArrayItem(Object.keys(t))]},Element:function(t){var e=RAND.Between(1,t.length)-1;return t.eq(e)},ItemByWeight:function(t){if(null==t.list)return Err("input.list is undefined");for(var e=null==t.key_weight?"weight":t.key_weight,i=null==t.weight_multiply?100:t.weight_multiply,n=0,r=0;r<t.list.length;r++)n+=t.list[r][e]*i;var s=[];for(var r in t.list)s.push([t.list[r],t.list[r][e]*i]);s.sort(function(t,e){return e[1]-t[1]});var o,a=RAND.Between(1,n);for(var l in s)if((a-=s[l][1])<=0){o=s[l][0];break}return o}},CONSOLE={logs:[],Clear:function(){return window.console.clear(),this},Save:function(t,e){return null!=e?this.logs.push([t,e]):this.logs.push([t]),this},Redraw:function(t=0){if(t>0){t>this.logs.length&&(t=this.logs.length);for(var e=this.logs.length-t;e<this.logs.length;e++){var i=this.logs[e];CONSOLE.LogDisplay(i)}}else this.logs.forEach(function(t){CONSOLE.LogDisplay(t)})},Filter:function(t){for(var e=0;e<this.logs.length;e++){var i=this.logs[e];("object"!=typeof i[0]||Array.isArray(i[0]))&&(i[0].indexOf(t)<0||CONSOLE.LogDisplay(i))}},LogDisplay:function(t){null!=t[1]?window.console.log("%c"+t[0],"color:"+t[1]):window.console.log(t[0])}},CORE={set_jQueryString:function(t){return this._jQueryString=t,this},Page_init:function(){var t=this;eval(this._jQueryString),$=window.$,console=window.console,gBrowser=window.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebNavigation).QueryInterface(Components.interfaces.nsIDocShellTreeItem).rootTreeItem.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow).gBrowser,$.fn.extend(IIM.jQueryExtend)},Load_script:function(src){var request=Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance(Components.interfaces.nsIXMLHttpRequest),async=!1;if(eval(" request.open('GET', '"+src+"', async); "),request.send(),200!==request.status){var message="an error occurred while loading script at url: "+src+", status: "+request.status;return iimDisplay(message),!1}var s=request.response;return eval(s),!0},Load_CustomJS:function(src){window.console.log("%cLoading CORE.Load_CustomJS "+src+" ...","color:lightgray");var request=Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance(Components.interfaces.nsIXMLHttpRequest),async=!1;if(eval(" request.open('GET', '"+src+"', async); "),request.send(),200!==request.status){var message="an error occurred while loading script at url: "+src+", status: "+request.status;return iimDisplay(message),!1}var s=request.response;return eval("s = "+s+";"),window.console.log("%c"+src+" : is loaded !","color:green"),s},Load_coreModuleJS:function(moduleJS){window.console.log("%cLoading CORE.MODULE "+moduleJS+" ...","color:lightgray");var request=Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance(Components.interfaces.nsIXMLHttpRequest),async=!1;if(LOCAL||eval(" request.open('GET', 'http://lib.mixseo.net/imacro-js-core/"+moduleJS+"?_='+new Date().toString(), async); "),LOCAL&&eval(" request.open('GET', 'file:///Users/htuan/MyJobs/iMacros/Macros/lib.mixseo.net/imacro-js-core/"+moduleJS+"', async); "),request.send(),200!==request.status)return window.console.log("%c"+moduleJS+" : is failed to load !","color:red"),!1;var s=request.response;return eval(s),window.console.log("%c"+moduleJS+" : is loaded !","color:green"),!0}},Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i},Date.prototype.toSQL=function(){return this.ToSQL()},Date.prototype.ToSQL=function(){return this.toISOString().split("T")[0]},Date.prototype.toFullSQL=function(){return[this.toISOString().split("T")[0],this.toISOString().split("T")[1].split(".")[0]].join(" ")},Date.prototype.SecondsAgo=function(t=null){var e=null==t?new Date:new Date(t),i=Math.abs(this.getTime()/1e3-e.getTime()/1e3);return i},Date.prototype.timeAgo=function(t=null){var e=null==t?new Date:new Date(t),i=Math.abs(this.getTime()/1e3-e.getTime()/1e3),n={prefix:"",suffix:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},r=function(t,e){return n[t]&&n[t].replace(/%d/i,Math.abs(Math.round(e)))},s=i/60,o=s/60,a=o/24,l=a/365;return n.prefix+(i<45&&r("seconds",i)||i<90&&r("minute",1)||s<45&&r("minutes",s)||s<90&&r("hour",1)||o<24&&r("hours",o)||o<42&&r("day",1)||a<30&&r("days",a)||a<45&&r("month",1)||a<365&&r("months",a/30)||l<1.5&&r("year",1)||r("years",l))+n.suffix},Date.prototype.timeToGo=function(t=null){var e=null==t?new Date:new Date(t),i=Math.abs(this.getTime()/1e3-e.getTime()/1e3),n={prefix:"",suffix:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},r=function(t,e){return n[t]&&n[t].replace(/%d/i,Math.abs(Math.round(e)))},s=i/60,o=s/60,a=o/24,l=a/365;return n.prefix+(i<45&&r("seconds",i)||i<90&&r("minute",1)||s<45&&r("minutes",s)||s<90&&r("hour",1)||o<24&&r("hours",o)||o<42&&r("day",1)||a<30&&r("days",a)||a<45&&r("month",1)||a<365&&r("months",a/30)||l<1.5&&r("year",1)||r("years",l))+n.suffix},Date.prototype.addDays=function(t){return this.setTime(this.getTime()+24*t*60*60*1e3),this},Date.prototype.addHours=function(t){return this.setTime(this.getTime()+60*t*60*1e3),this},Date.prototype.addMinutes=function(t){return this.setTime(this.getTime()+60*t*1e3),this},Date.prototype.addSeconds=function(t){return this.setTime(this.getTime()+1e3*t),this},Date.prototype.___=function(t){return _Var(t,this),this},Number.prototype.between=function(t,e){return this>=t&&this<=e},Number.prototype.___=function(t){return _Var(t,this),this},Number.prototype.in=function(t,e){var i=parseFloat(this);if(void 0===e){if(is_array(t))return i<=1*t[1]&&i>=1*t[0]}else if(is_number(t))return i<=1*e&&i>=1*t;return!1},Math.floorDigit=function(t,e){var i=t;switch(e){case 0:i=t.toString().match(/^-?\d+(?:\.\d{0,0})?/)[0];break;case 1:i=t.toString().match(/^-?\d+(?:\.\d{0,1})?/)[0];break;case 2:i=t.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0];break;case 3:i=t.toString().match(/^-?\d+(?:\.\d{0,3})?/)[0];break;case 4:i=t.toString().match(/^-?\d+(?:\.\d{0,4})?/)[0];break;case 5:i=t.toString().match(/^-?\d+(?:\.\d{0,5})?/)[0];break;case 6:i=t.toString().match(/^-?\d+(?:\.\d{0,6})?/)[0];break;case 7:i=t.toString().match(/^-?\d+(?:\.\d{0,7})?/)[0];break;case 8:i=t.toString().match(/^-?\d+(?:\.\d{0,8})?/)[0];break;case 9:i=t.toString().match(/^-?\d+(?:\.\d{0,9})?/)[0];break;case 10:i=t.toString().match(/^-?\d+(?:\.\d{0,10})?/)[0]}return parseFloat(i)},ScrapeEngine=function(t){this.btnNextPage=null,this.pages=[],this.count={pages:0},this.last={url:null,page:null},this.current={url:null,page:null},this.items=[]},ScrapeEngine.prototype.Setup=function(t){for(var e in t)this[e]=t[e];return null==this.urls&&(this.urls=[""]),"string"==typeof this.urls&&(this.urls=[this.urls]),"function"!=typeof this.itemActions&&(this.itemActions=function(){}),"function"!=typeof this.itemParse&&(this.itemParse=function(){}),null==this.eItems&&(this.eItems="body"),this.eItems+="[xid_parsed!=1]",(null==this.pageLimit||this.pageLimit<1)&&(this.pageLimit=1),this},ScrapeEngine.prototype.Process=function(t){"function"==typeof this.InitProcess&&this.InitProcess(),this.itemFound=!1,this.count.pages=0;for(var e=0;e<this.urls.length;e++){for(this._LoadUrl(this.urls[e]);!(!(this.count.pages<this.pageLimit)||(this.count.pages++,"function"==typeof this.PreActions&&this.PreActions(),this._ParseItems(),"function"==typeof this.itemFind&&this.itemFound)||this.itemLimit>0&&this.items.length>=this.itemLimit||(this.count.pages<=this.pageLimit&&(this._LoadNextPage(),IIM.Wait(1)),this.count.pages>this.pageLimit)););if("function"==typeof this.itemFind&&this.itemFound)break}if(this.items.length<1)return Err("No items found !");_Var(".items",this.items);for(e=0;e<this.items.length;e++)this.itemActions(this.items[e]);return this},ScrapeEngine.prototype.End=function(t){return _("ScrapeEngine is ended !"),this},ScrapeEngine.prototype._ParseItems=function(t){var e={},i=$(this.eItems);if(i.length<1)return Err("No .eItems found !");for(var n=0;n<i.length;n++){e={e:i.eq(n)};if(1!=this.skip_xid_parsed&&i.eq(n).attr("xid_parsed",1),this.itemParse(e),"function"==typeof this.itemFind&&(this.itemFound=this.itemFind(e)),delete e.e,"function"==typeof this.itemFilter?this.itemFilter(e)&&this.items.push(e):this.items.push(e),this.itemLimit>0&&this.items.length>=this.itemLimit){_("this.itemLimit is triggered");break}if(iimDisplay("Items found : "+this.items.length),"function"==typeof this.itemFind&&this.itemFound){_("this.itemFound is triggered");break}}return this},ScrapeEngine.prototype._PagePrepare=function(t){return"function"==typeof this.eCurrentPage&&(this.last.page=this.current.page,this.current.page=this.eCurrentPage()),null!=this.eNextPage&&(this.btnNextPage=$(this.eNextPage)),null==this.eNextPage&&null!=this.ePages&&(this.btnNextPage=$(this.ePages).eq(0)),_Var(".btnNextPage",this.btnNextPage),this},ScrapeEngine.prototype._LoadUrl=function(t){return null!=t&&t.length>0&&(IIM.iLoadUrl(t,60,1),null==this.eLoadedPage?IIM.jQueryWait($(this.eItems)):IIM.jQueryWait($(this.eLoadedPage))),IIM.Wait(1),this._PagePrepare(),this.last.url=this.current.url,this.current.url=t,this},ScrapeEngine.prototype._LoadNextPage=function(t){return"function"==typeof this.btnNextPage||null==this.btnNextPage||this.btnNextPage.length?(1!=this.skip_remove_items_on_next_page&&$(this.eItems).length&&$(this.eItems).remove(),_("loading next page "),_Var("this.btnNextPage",this.btnNextPage),"function"==typeof this.btnNextPage?this.btnNextPage():($(this.btnNextPage).jScrollTo(),$(this.btnNextPage).jClick()),_("Waiting for eItems "+this.eItems),null==this.eLoadedPage?IIM.jQueryWait($(this.eItems)):IIM.jQueryWait($(this.eLoadedPage)),this._PagePrepare(),this):Err("No btnNextPage found !")},jsLF="\n",_=function(t,e){"object"==typeof t&&JSON.stringify(t);CONSOLE.LogDisplay([t,e]),CONSOLE.Save(t,e)},_Var=function(desc,v,color="darkgray"){if(_("*** "+desc,color),void 0===v)try{eval("_("+desc+");")}catch(t){_(void 0)}else _(v);_("*** "+desc+"_","lightgray")},_if=function(t,e,i){is_func(t)&&(t=t.apply(this)),t&&_(e,i)},w={ANDOR:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];if("object"==typeof t[n])for(var s in r="",t[n])if(null==t[n][s])r="`"+s+"`=NULL";else{if(0==t[n][s].toString().indexOf("IN ")){r="`"+s+"` "+t[n][s];continue}if(0==t[n][s].toString().indexOf("LIKE ")){r="`"+s+"` "+t[n][s];continue}switch(t[n][s].toString().toLowerCase()){case"is null":r="`"+s+"` IS NULL";break;case"now()":r="`"+s+"`="+t[n][s];break;default:r="`"+s+"`='"+t[n][s]+"'"}}i.push("("+r+")")}return i.join(e)},AND:function(t){return w.ANDOR(t," AND ")},OR:function(t){return w.ANDOR(t," OR ")},IN:function(t){return"IN ('"+t.join("','")+"')"},LIKE:function(t){return"LIKE '"+t+"'"},GREATER:function(t){return" > '"+t+"'"},SMALLER:function(t){return" < '"+t+"'"}},$iFrame=function(t,e){return t.contents().find(e)},$found=function(t,e=null){return null!=e&&e.length?$iFrame(e,t).length:$(t).length},$checked=function(t,e=null){var i=null==e?$(t):$iFrame(e,t);return i.length?i.is(":checked"):null},$unchecked=function(t,e=null){var i=null==e?$(t):$iFrame(e,t);return i.length?i.is(":unchecked"):null},$enable=function(t,e=null){var i=null==e?$(t):$iFrame(e,t);return i.length?i.prop("disabled",!1):null},$disable=function(t,e=null){var i=null==e?$(t):$iFrame(e,t);return i.length?i.prop("disabled",!0):null},eval2=function(s){return eval("(1) ? {"+s+"} : null;")},is_set=function(t){return null!=t},is_array=function(t){return is_set(t)&&"object"==typeof t&&t.length},is_object=function(t){return"object"==typeof t},is_string=function(t){return"string"==typeof t},is_number=function(t){return"number"==typeof t},is_url=function(t){return"string"==typeof t&&t.has(["http://","https://","www."])},is_function=function(t){return"function"==typeof t},is_func=function(t){return is_function(t)},oKeys=function(t){return Object.keys(t)},oValues=function(t){return Object.values(t)},Object_To_Array=function(t){var e=[];for(var i in t){var n=i.toString(),r={};r[n]=t[n],e.push(r)}return e},Object_Remove_Fields=function(t,e){for(var i in e)_(i)},Array_To_Object=function(t){for(var e={},i=0;i<t.length;i++){var n=Object.keys(t[i])[0],r=t[i][n];e[n]=r}return e},AddSlashes=function(t){return t.toString().replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')},Repeat=function(t,e){for(var i=0;i<t;i++)e()},Ok=function(t,e=!0){return OK(t,e)},OK=function(t,e=!0){return _(t+" ["+e+"]","green"),e},Err=function(t,e=!1,i){return _(t+" ["+e+"]","red"),"function"==typeof i&&i(),e},jExist=function(t){return null==t||null==t?{}:t},jNow=function(){return(new Date).toFullSQL()},jsonize=function(v){var new_v=v;return eval("var new_v = "+v+";"),new_v},APPNow=function(){return void 0===APP?null:APP.DBNow()},_jGet=function(t,e="json"){try{return"json"==e?$.ajax({url:t,type:"get",cache:!1,async:!1,dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON:$.ajax({url:t,type:"get",cache:!1,async:!1,data:{},beforeSend:function(){},success:function(t){},error:function(t){}}).responseText}catch(t){return t}},MD5=function(t,e=0){return"object"==typeof t&&(t=JSON.stringify(t)),0==e?MD5_(t):MD5_(t).substr(0,e)},MD5_=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,n,r,s,o;return r=2147483648&t,s=2147483648&e,o=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(n=1073741824&e)?2147483648^o^r^s:i|n?1073741824&o?3221225472^o^r^s:1073741824^o^r^s:o^r^s}function n(t,n,r,s,o,a,l){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(n,r,s),o),l)),i(e(t,a),n)}function r(t,n,r,s,o,a,l){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(n,r,s),o),l)),i(e(t,a),n)}function s(t,n,r,s,o,a,l){return t=i(t,i(i(function(t,e,i){return t^e^i}(n,r,s),o),l)),i(e(t,a),n)}function o(t,n,r,s,o,a,l){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(n,r,s),o),l)),i(e(t,a),n)}function a(t){var e,i="",n="";for(e=0;e<=3;e++)i+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return i}var l,u,h,c,p,f,d,_,g,y=Array();for(y=function(t){for(var e,i=t.length,n=i+8,r=16*((n-n%64)/64+1),s=Array(r-1),o=0,a=0;a<i;)o=a%4*8,s[e=(a-a%4)/4]=s[e]|t.charCodeAt(a)<<o,a++;return o=a%4*8,s[e=(a-a%4)/4]=s[e]|128<<o,s[r-2]=i<<3,s[r-1]=i>>>29,s}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),f=1732584193,d=4023233417,_=2562383102,g=271733878,l=0;l<y.length;l+=16)u=f,h=d,c=_,p=g,f=n(f,d,_,g,y[l+0],7,3614090360),g=n(g,f,d,_,y[l+1],12,3905402710),_=n(_,g,f,d,y[l+2],17,606105819),d=n(d,_,g,f,y[l+3],22,3250441966),f=n(f,d,_,g,y[l+4],7,4118548399),g=n(g,f,d,_,y[l+5],12,1200080426),_=n(_,g,f,d,y[l+6],17,2821735955),d=n(d,_,g,f,y[l+7],22,4249261313),f=n(f,d,_,g,y[l+8],7,1770035416),g=n(g,f,d,_,y[l+9],12,2336552879),_=n(_,g,f,d,y[l+10],17,4294925233),d=n(d,_,g,f,y[l+11],22,2304563134),f=n(f,d,_,g,y[l+12],7,1804603682),g=n(g,f,d,_,y[l+13],12,4254626195),_=n(_,g,f,d,y[l+14],17,2792965006),f=r(f,d=n(d,_,g,f,y[l+15],22,1236535329),_,g,y[l+1],5,4129170786),g=r(g,f,d,_,y[l+6],9,3225465664),_=r(_,g,f,d,y[l+11],14,643717713),d=r(d,_,g,f,y[l+0],20,3921069994),f=r(f,d,_,g,y[l+5],5,3593408605),g=r(g,f,d,_,y[l+10],9,38016083),_=r(_,g,f,d,y[l+15],14,3634488961),d=r(d,_,g,f,y[l+4],20,3889429448),f=r(f,d,_,g,y[l+9],5,568446438),g=r(g,f,d,_,y[l+14],9,3275163606),_=r(_,g,f,d,y[l+3],14,4107603335),d=r(d,_,g,f,y[l+8],20,1163531501),f=r(f,d,_,g,y[l+13],5,2850285829),g=r(g,f,d,_,y[l+2],9,4243563512),_=r(_,g,f,d,y[l+7],14,1735328473),f=s(f,d=r(d,_,g,f,y[l+12],20,2368359562),_,g,y[l+5],4,4294588738),g=s(g,f,d,_,y[l+8],11,2272392833),_=s(_,g,f,d,y[l+11],16,1839030562),d=s(d,_,g,f,y[l+14],23,4259657740),f=s(f,d,_,g,y[l+1],4,2763975236),g=s(g,f,d,_,y[l+4],11,1272893353),_=s(_,g,f,d,y[l+7],16,4139469664),d=s(d,_,g,f,y[l+10],23,3200236656),f=s(f,d,_,g,y[l+13],4,681279174),g=s(g,f,d,_,y[l+0],11,3936430074),_=s(_,g,f,d,y[l+3],16,3572445317),d=s(d,_,g,f,y[l+6],23,76029189),f=s(f,d,_,g,y[l+9],4,3654602809),g=s(g,f,d,_,y[l+12],11,3873151461),_=s(_,g,f,d,y[l+15],16,530742520),f=o(f,d=s(d,_,g,f,y[l+2],23,3299628645),_,g,y[l+0],6,4096336452),g=o(g,f,d,_,y[l+7],10,1126891415),_=o(_,g,f,d,y[l+14],15,2878612391),d=o(d,_,g,f,y[l+5],21,4237533241),f=o(f,d,_,g,y[l+12],6,1700485571),g=o(g,f,d,_,y[l+3],10,2399980690),_=o(_,g,f,d,y[l+10],15,4293915773),d=o(d,_,g,f,y[l+1],21,2240044497),f=o(f,d,_,g,y[l+8],6,1873313359),g=o(g,f,d,_,y[l+15],10,4264355552),_=o(_,g,f,d,y[l+6],15,2734768916),d=o(d,_,g,f,y[l+13],21,1309151649),f=o(f,d,_,g,y[l+4],6,4149444226),g=o(g,f,d,_,y[l+11],10,3174756917),_=o(_,g,f,d,y[l+2],15,718787259),d=o(d,_,g,f,y[l+9],21,3951481745),f=i(f,u),d=i(d,h),_=i(_,c),g=i(g,p);return(a(f)+a(d)+a(_)+a(g)).toLowerCase()},colorRGB=function(t){var e=null,i=null;if("#"!=t[0]&&t.indexOf("rgb")<0){var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};void 0!==n[t.toLowerCase()]&&(e=n[t.toLowerCase()])}if(null==e&&"#"==t[0]&&(e=t),0==t.indexOf("rgb")&&(i=t),null!=e){var r=e;"#"===r[0]&&(r=r.substr(1)),i="rgb("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+")"}return i=i.replace(/\s/gi,"")},string_preg_quote=function(t,e){return(t+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(e||"")+"-]","g"),"\\$&")},string_spin=function(t){if(null==t)return null;var e=t.match(/{[^<]+/gi);if(null===e)return t;-1!=e[0].indexOf("{")&&(e[0]=e[0].substr(e[0].indexOf("{")+1)),-1!=e[0].indexOf("}")&&(e[0]=e[0].substr(0,e[0].indexOf("}")));var i=e[0].split("|"),n=string_preg_quote(e[0]);return e_v=new RegExp("{"+n+"}","g"),t=t.replace(e_v,i[Math.floor(Math.random()*i.length)]),string_spin(t)},xxx=function(t){null!=t&&_(t,"red"),STOP=STOP_BY_xxx_FUNCTION},isset=function(t){return is_set(t)},delay=function(t){IIM.Wait(t)},eFound=function(t){for(var e=!0,i=0;i<t.length;i++)e&=t[i].length;return e},Rand=function(t){return null!=t?void 0:RAND.String(5)},Today=function(t){return null==t?(new Date).ToSQL():new Date(t).ToSQL()},Yesterday=function(t){return null==t?(new Date).addDays(-1).ToSQL():new Date(t).addDays(-1).ToSQL()},Tomorrow=function(t){return null==t?(new Date).addDays(1).ToSQL():new Date(t).addDays(1).ToSQL()},False=function(t){return _(t,"red"),!1},rand=function(t,e){return is_array(t)&&(e=t[1],t=t[0]),t*=1,e*=1,RAND.Between(t,e)},Array.prototype.SumByKey=function(t){for(var e=0,i=!1,n=0;n<this.length;n++)"object"==typeof this[n]&&(i=!0,e+=this[n][t]);return i?e:null},Array.prototype.last=function(t=0){return this[this.length+t-1]},Array.prototype.shuffle=function(){for(var t,e,i=[],n=0;n<this.length;n++)i.push(this[n]);for(n=i.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),e=i[n],i[n]=i[t],i[t]=e;return i},Array.prototype.left=function(t){for(var e=[],i=0;i<this.length;i++)e.push(this[i]);return e.splice(0,t)},Array.prototype.right=function(t){for(var e=[],i=0;i<this.length;i++)e.push(this[i]);return e.splice(e.length-t,t)},Array.prototype.rand=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.has=function(t){"object"!=typeof t&&(t=[t.toString()]);for(var e=0;e<t.length;e++)if(this.indexOf(t[e])>=0)return!0;return!1},Array.prototype.exclude=function(t){return this.filter(function(e){return!t.has(e)})},Array.prototype.field=function(t){var e=[];return this.forEach(function(i){void 0!==i[t]&&e.push(i[t])}),e},Array.prototype.toArrayBy=function(t){var e=[];return this.forEach(function(i){void 0!==i[t]&&e.push(i[t])}),e},Array.prototype.toObjectBy=function(t){var e={};return this.forEach(function(i){if(void 0!==i[t]){void 0===e[i[t]]&&(e[i[t]]={list:[],length:0});var n=e[i[t]];(n=$.extend(n,i))[n.length]=i,n.length++,e[i[t]].list.push(i),e[i[t]].find=function(t){var e=[];return this.list.forEach(function(i){var n=!0;for(var r in t){if(!n)break;n&=i[r]==t[r]}n&&e.push(i)}),e}}}),e},Array.prototype.mergeBy=function(t,e){var i=e.toObjectBy(t);try{this.forEach(function(e){if(null!=i[e[t]]&&null!=i[e[t]][0]){var n=i[e[t]][0];e=$.extend(e,n)}})}catch(t){}return this},Array.prototype.sort_asc_by=function(t){return this.length<1?this:void 0===this[0][t]?this:this.sort(function(e,i){return parseFloat(e[t])-parseFloat(i[t])})},Array.prototype.sort_desc_by=function(t){return this.length<1?this:void 0===this[0][t]?this:this.sort(function(e,i){return parseFloat(i[t])-parseFloat(e[t])})},Array.prototype.splice2=function(t,e=1){for(var i=[],n=0;n<this.length;n++)n>=t&&n<=t+e-1||i.push(this[n]);return i},Array.prototype.jn=function(){return this.join("\n")},Array.prototype.concat2=function(t){return this.concat(t).unique()},Array.prototype.uniqueBy=function(t){var e=[],i=[];return this.forEach(function(n){i.indexOf(n[t])>=0||(i.push(n[t]),e.push($.extend({},n)))}),e},Array.prototype.unique=function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var i=e+1;i<t.length;++i)t[e]===t[i]&&t.splice(i--,1);return t},Array.prototype.___=function(t){return _Var(t,this),this},String.prototype.remove=function(t){return this.replace(t,"")},String.prototype.format_1=function(){return this.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},String.prototype.sub_between=function(t,e){var i=this.toString();return i.indexOf(t)<0?null:(i=i.split(t)[1]).indexOf(e)<0?null:i=i.split(e)[0]},String.prototype.saveFileAs=function(t,e){var i="_earns_save_"+rand(1e3,9999);$("[id*=_earns_save_]").remove();var n=this.toString().fileExtention().toLowerCase();return n!==e.fileExtention().toLowerCase()&&(e+="."+n),$("body").append($("<a id="+i+" style='display:block'>").attr("href",this.toString()).text(e)),_("Saving FileAs ["+e+"]...","lightgray"),$("#"+i).SaveTo(t,e,5,1,1),t+"/"+e},String.prototype.appendTo=function(t){return t+=this.toString()},String.prototype.replace2=function(t){return this.replace_variables(t)},String.prototype.replace_variables=function(input){null==input.wrapper&&(input.wrapper="{}");var new_str=this;for(var v in input)switch(input.wrapper){case"{}":new_str=eval(" new_str.replace(/{"+v+"}/ig, input[v]) ");break;case"[]":new_str=eval(" new_str.replace(/\\["+v+"\\]/ig, input[v]) ");break;case"::":new_str=eval(" new_str.replace(/:"+v+":/ig, input[v]) ")}return new_str},String.prototype.ucFirst=function(){var t=this.toString();return t=t.charAt(0).toUpperCase()+t.substr(1)},String.prototype.forEach=function(t){if("function"!=typeof t)return this;for(var e=this.toString(),i=0;i<e.length;i++)t(e[i],i)},String.prototype.has=function(t){"object"!=typeof t&&(t=[t]);for(var e=0;e<t.length;e++)if(this.toString().indexOf(t[e])>=0)return!0;return!1},String.prototype.remove=function(t){var e=this;"object"!=typeof t&&(t=[t]),e=this;for(var i=0;i<t.length;i++)e=e.replace(t[i],"");return e},String.prototype.between=function(t,e){if(!this.has(t))return this;var i=this.split(t)[1];return i.has(e)?i=i.split(e)[0]:this},String.prototype.keep=function(t){if(null==t)return this;for(var e="",i=0;i<this.length;i++)t.indexOf(this[i])>=0&&(e+=this[i]);return e},String.prototype.extractEmails=function(){return this.toString().match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)},String.prototype.fileExtention=function(){var t=this.toString().split(".").pop();return t=t.split(".")[0]},String.prototype.parseExtension=function(){return this.has(".gif")?".gif":this.has(".png")?".png":this.has(".jpg")?".jpg":this.has(".mp4")?".mp4":this.has(".pdf")?".pdf":null},String.prototype.get_domain=function(){var t=this;return t.indexOf("//")>=0&&(t=t.split("//")[1]),t.indexOf("/")>0&&(t=t.split("/")[0]),t=(t=t.replace("www.","")).replace("www2.","")},String.prototype.in=function(t){return"string"==typeof t&&t.indexOf(",")>0?t.split(",").indexOf(this.toString())>=0:t.indexOf(this.toString())>=0},String.prototype.not_in=function(t){return!this.toString().in(t)},String.prototype.switch=function(t){for(var e in t)if(e==this.toString())return t[e];return null},String.prototype.switchLike=function(t){for(var e in t)if(this.toString().indexOf(e)>=0)return t[e];return null},String.prototype.sprintf=function(t){"object"!=typeof t&&(t=[t]);var e=this.toString();return t.forEach(function(t){e.indexOf("{%}")>=0?e=e.replace(/\{\%\}/,t):e.indexOf("%")>=0?e=e.replace(/\%/,t):e.indexOf("?")>=0&&(e=e.replace(/\?/,t))}),e},String.prototype.rpl=function(t){return this.sprintf(t)},String.prototype.pr=function(t,e){"object"!=typeof t&&(t=[t]);var i=this.toString();return t.forEach(function(t){void 0!==e&&(t=t._(e)),i.indexOf("?")>=0&&(i=i.replace(/\?/,t))}),i},String.prototype.addslashes=function(){return this.toString().replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')},String.prototype.stripslashes=function(){return this.replace(/\\(.)/gm,"$1")},String.prototype.spin=function(){var t=this.toString();if(null==t)return null;var e=t.match(/{[^<]+/gi);if(null===e)return t;-1!=e[0].indexOf("{")&&(e[0]=e[0].substr(e[0].indexOf("{")+1)),-1!=e[0].indexOf("}")&&(e[0]=e[0].substr(0,e[0].indexOf("}")));var i=e[0].split("|"),n=string_preg_quote(e[0]);return e_v=new RegExp("{"+n+"}","g"),(t=t.replace(e_v,i[Math.floor(Math.random()*i.length)])).spin()},String.prototype.to_json=function(){try{var o=this.toString();return eval("o = "+o+";"),o}catch(t){return this.toString()}},String.prototype.to_slug=function(){var t=this.toString().toLowerCase().trim();return t=(t=(t=(t=(t=(t=t.replace(/\t/g,"-")).replace(/\n/g,"-")).replace(/\r/g,"-")).replace(/\s/g,"-")).replace(/_/g,"-")).replace(/--/g,"-")},String.prototype._=function(t){var e=this.toString();return t.split("--").forEach(function(t){switch(t){case"slashes":e=e.replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')}}),e},String.prototype.___=function(t){return _Var(t,this.toString()),this},$$Err=[],$$=function(t="",e={}){this.tab={Select:function(t){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},First:function(){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[0],this.Update()},Last:function(){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[this.total-1],this.Update()},Next:function(){var t=this.current<this.total-1?this.current+1:this.total-1;return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},Prev:function(){var t=this.current>0?this.current-1:0;return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},CloseCurrent:function(){return gBrowser.removeCurrentTab(),this.Update()},Update:function(){return this.total=gBrowser.browsers.length,this.current=gBrowser.tabContainer.selectedIndex,this.url=window.location.href,this.currentTab=gBrowser.tabContainer.childNodes[this.current],CORE.Page_init(),this}},this.title=t,this.iim_text=[],this.err=[],this.actions=[],this.output={},this.timer=null,this.tab.Update(),this._skip_quick_check=void 0!==e.skip_quick_check&&e.skip_quick_check,this._debug=!1},$$.prototype.timerDiff=function(){return null==this.timer?null:(new Date-this.timer)/1e3},$$.prototype.section=function(t){return this.actions.push({type:"section",section:t}),this},$$.prototype.$$=function(t){return this.actions.push({type:"$$",title:t}),this},$$.prototype.____=function(t){return this.actions.push({type:"_",comment:t}),this},$$.prototype._=function(t,e){return this.actions.push({type:"_",comment:t,heading:e}),this},$$.prototype.____iim=function(t){return this.actions.push({type:"iim",comment:t}),this},$$.prototype.iim=function(t){return this.actions.push({type:"iim",comment:t}),this},$$.prototype.timerReset=function(){return this.actions.push({type:"timerReset"}),this},$$.prototype.if=function(t,e,i){return this.actions.push({type:"if",cond:t,func:e,on_fail:i}),this},$$.prototype.skip_quick_check=function(){return this.actions.push({type:"skip_quick_check"}),this},$$.prototype.f=function(t,e){return this.actions.push({type:"f",func:t,note:e}),this},$$.prototype.f1=function(t){return this.actions.push({type:"f1",func:t}),this},$$.prototype.ajaxGet=function(t,e){return this.actions.push({type:"ajaxGet",url:t,callback:e}),this},$$.prototype.ajaxGetJsonP=function(t,e){return this.actions.push({type:"ajaxGetJsonP",url:t,callback:e}),this},$$.prototype.Try=function(t,e,i=0){return this.actions.push({type:"Try",n:t,func:e,delay:i}),this},$$.prototype.Try_jFill=function(t,e,i,n=!0,r=0){return this.actions.push({type:"Try_jFill",n:t,e:e,value:i,clear_exist:n,delay:r}),this},$$.prototype.Try_eFill=function(t,e,i,n=!0,r=0){return this.actions.push({type:"Try_eFill",n:t,e:e,value:i,clear_exist:n,delay:r}),this},$$.prototype.Try_eChecked=function(t,e,i=0){return this.actions.push({type:"Try_eChecked",n:t,e:e,delay:i}),this},$$.prototype.LoadNewUrl=function(t){return this.actions.push({type:"LoadNewUrl",url:t}),this},$$.prototype.LoadUrl=function(t){return this.actions.push({type:"LoadUrl",url:t}),this},$$.prototype.TabNew=function(t=1){return this.actions.push({type:"TabNew",n:t}),this},$$.prototype.Tab=function(t){return this.actions.push({type:"Tab",i:t}),this},$$.prototype.TabFirst=function(){return this.actions.push({type:"TabFirst"}),this},$$.prototype.TabLast=function(){return this.actions.push({type:"TabLast"}),this},$$.prototype.TabNext=function(){return this.actions.push({type:"TabNext"}),this},$$.prototype.TabPrev=function(){return this.actions.push({type:"TabPrev"}),this},$$.prototype.TabFind=function(t){return this.actions.push({type:"TabFind",match:t}),this},$$.prototype.TabClose=function(){return this.actions.push({type:"TabClose"}),this},$$.prototype.TabCloseRight=function(){return this.actions.push({type:"TabCloseRight"}),this},$$.prototype.TabCloseLeft=function(){return this.actions.push({type:"TabCloseLeft"}),this},$$.prototype.UploadImage=function(t,e){return this.actions.push({type:"UploadImage",url:t,e:e}),this},$$.prototype.jChecked=function(t){return this.actions.push({type:"jChecked",e:t}),this},$$.prototype.jUnChecked=function(t){return this.actions.push({type:"jUnChecked",e:t}),this},$$.prototype.jClick=function(t){return this.actions.push({type:"jClick",e:t}),this},$$.prototype.jClickIfFound=function(t){return this.actions.push({type:"jClickIfFound",e:t}),this},$$.prototype.jClickIf=function(t,e,i){return this.actions.push({type:"jClickIf",e:t,cond:e,ifnot:i}),this},$$.prototype.jFillIf=function(t,e,i,n){return this.actions.push({type:"jFillIf",e:t,data:e,cond:i,ifnot:n}),this},$$.prototype.jClickAway=function(t){return this.actions.push({type:"jClickAway",e:t}),this},$$.prototype.iCode=function(t){return this.actions.push({type:"iCode",code:t}),this},$$.prototype.iFill=function(t,e){return this.actions.push({type:"iFill",e:t,value:e}),this},$$.prototype.jVal=function(t,e){return this.actions.push({type:"jVal",e:t,value:e}),this},$$.prototype.jFill=function(t,e){return this.actions.push({type:"jFill",e:t,value:e}),this},$$.prototype.jMouseOver=function(t){return this.actions.push({type:"jMouseOver",e:t}),this},$$.prototype.eFill=function(t,e){return this.actions.push({type:"eFill",e:t,value:e}),this},$$.prototype.eClick=function(t){return this.actions.push({type:"eClick",e:t}),this},$$.prototype.formSubmit=function(t){return this.actions.push({type:"formSubmit",e:t}),this},$$.prototype.ScrollTo=function(t,e=500,i=0){return this.actions.push({type:"ScrollTo",e:t,timeout:e,offset:i}),this},$$.prototype.ReCaptcha2=function(){return this.actions.push({type:"ReCaptcha2"}),this},$$.prototype.setIFRAME=function(t){return this.actions.push({type:"setIFRAME",e:t}),this},$$.prototype.clearIFRAME=function(){return this.actions.push({type:"clearIFRAME"}),this},$$.prototype.find$=function(t,e){return this.actions.push({type:"find$",e:t,callback:e}),this},$$.prototype.delay=function(t=1){return this.actions.push({type:"delay",timeout:t}),this},$$.prototype.pause=function(){return this.actions.push({type:"pause"}),this},$$.prototype.wait=function(t,e=3){return this.actions.push({type:"wait",e:t,timeout:e}),this},$$.prototype.waitGone=function(t,e=3){return this.actions.push({type:"waitGone",e:t,timeout:e}),this},$$.prototype.dbResetQueue=function(t){return this.actions.push({type:"dbResetQueue",db:t}),this},$$.prototype.dbQueue=function(t,e){return this.actions.push({type:"dbQueue",db:t,sql:e}),this},$$.prototype.dbQueryQueue=function(t){return this.actions.push({type:"dbQueryQueue",db:t}),this},$$.prototype.debug=function(){return this.actions.push({type:"debug"}),this},$$.prototype.go=function(){if(_(".."+this.title+"..","lightgreen"),$$Err=[],this.iim_text=[],this.output={},this.iframe=null,this.last_element=null,this.last_text=null,"wait"==this.actions.last().type&&!this._skip_quick_check){var t=$.extend({},this.actions.last());_("-- quick check ...","lightgray");var e="function"==typeof t.e?t.e():$found(t.e);if(_(e),e)return!0}this.timer=new Date,this.section=null;for(var i=0;i<this.actions.length;){e=!1;var n=!1;switch(void 0===(t=$.extend({},this.actions[i])).e&&null!==this.last_element&&(t.e=this.last_element),void 0!==t.e&&(this.last_element=t.e,n="string"==typeof t.e?null!==this.iframe?$iFrame(this.iframe,t.e):$(t.e):t.e,this._debug&&(_("---- action.e ----","lightgray"),_(n))),_("-- action "+t.type+" -- "+("string"==typeof t.e?t.e:"")+" ["+("string"==typeof t.value?t.value:"")+"]","lightgray"),t.type){case"section":this.section=t.section,_("-- section : "+this.section+" --","lightblue"),e=1;break;case"$$":this.title=t.title,e=1;break;case"_":_(t.comment),e=1;break;case"iim":var r=t.comment;"h1"==t.heading&&(r="== ? ==".pr(r)),this.iim_text.push(r);var s=[].concat(this.iim_text).reverse();iimDisplay(s.join("\n")),_(r),e=1;break;case"timerReset":this.timer=new Date,e=1;break;case"skip_quick_check":this._skip_quick_check=!0,e=1;break;case"if":"function"==typeof(y=t.cond)&&(y=y.apply(this)),y?e="function"==typeof t.func?t.func.apply(this):0:(void 0===t.on_fail&&(t.on_fail=1),e="function"==typeof t.on_fail?t.on_fail.apply(this):t.on_fail);break;case"f":e="function"==typeof t.func?t.func.apply(this):0;break;case"f1":"function"==typeof t.func&&t.func.apply(this),e=1;break;case"ajaxGet":var o=$.ajax({url:t.url,type:"get",cache:!1,async:!1,beforeSend:function(){},success:function(t){},error:function(t){}}).responseText;"function"==typeof t.callback&&t.callback.apply(this,[o]),e=1;break;case"ajaxGetJsonP":o=$.ajax({url:t.url,type:"get",cache:!1,async:!1,datatype:"jsonp",success:function(t){}}).responseText;"function"==typeof t.callback&&t.callback.apply(this,[JSON.parse(o)]),e=1;break;case"Try":for(var a=1;a<=t.n&&!(e=t.func.apply(this));a++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_jFill":if(n.length&&n.val()===t.value){e=!0;break}t.clear_exist&&n.val("");for(a=1;a<=t.n&&!(e=!1!==n?n.jFill(t.value):0);a++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_eFill":if(n.length&&n.val()===t.value){e=!0;break}t.clear_exist&&n.val("");for(a=1;a<=t.n&&!(e=!1!==n?n.eFill(t.value):0);a++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_eChecked":if(n.length&&n.is(":checked")){e=!0;break}for(a=1;a<=t.n&&(_("---- Try eChecked ["+a+"] ----","lightgrey"),n.eClick(),!(e=!1!==n?n.is(":checked"):0));a++)t.delay>0&&IIM.Wait(t.delay);break;case"LoadNewUrl":e=IIM.iLoadNewUrl(t.url);break;case"LoadUrl":e=IIM.iLoadUrl(t.url);break;case"TabNew":iimPlay("CODE:TAB OPEN"),this.tab.Update(),this.tab.SelectLast(),e=!0;break;case"Tab":e=this.tab.Select(t.i>=0?t.i:this.tab.current);break;case"TabFirst":e=this.tab.First();break;case"TabLast":e=this.tab.Last();break;case"TabNext":e=this.tab.Next();break;case"TabPrev":e=this.tab.Prev();break;case"TabFind":var l=!1;if("string"==typeof t.match){this.tab.Update();for(var u=0;u<this.tab.total;u++){var h=gBrowser.tabContainer.childNodes[u];if(h.hasAttribute("label")&&h.getAttribute("label").has(t.match)){l=u;break}}}!1!==l&&(gBrowser.selectedTab=gBrowser.tabContainer.childNodes[l],this.tab.Update()),e=!1!==l;break;case"TabClose":e=iimPlay("CODE:TAB CLOSE"),this.tab.Update();break;case"TabCloseRight":for(u=this.tab.total-1;u>this.tab.current;u--)this.tab.Select(u),this.tab.CloseCurrent();e=!0;break;case"TabCloseLeft":for(u=this.tab.current-1;u>=0;u--)this.tab.Select(u),this.tab.CloseCurrent();e=!0;break;case"UploadImage":$("body").find("img._earns").remove();var c=t.url.toLowerCase(),p=$("<img src='"+t.url+"' class='earns'>").appendTo($("body")),f="__UploadImage";c.has("png")&&(f+=".png"),c.has("jpg")&&(f+=".jpg"),c.has("jpeg")&&(f+=".jpeg"),c.has("gif")&&(f+=".gif"),c.has("mp4")&&(f+=".mp4");var d=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp,g=d+f;_(g),IIM.file_delete(g),g=p.SaveTo(d,f),_("Downloading : "),IIM.Wait(3);for(u=1;u<=60&&(_("."),!IIM.file_exist(g));u++)IIM.Wait(1);IIM.file_exist(g)&&(this.output.img_path=g,e=!1!==n?n.iFill(g):0);break;case"jChecked":e=!1!==n?n.prop("checked",!0):0;break;case"jUnChecked":e=!1!==n?n.prop("checked",!1):0;break;case"jClick":e=!1!==n?n.jClick():0;break;case"jClickIfFound":$found(t.e)&&n.jClick(),e=1;break;case"jClickIf":if("function"==typeof(y=t.cond)&&(y=y.apply(this)),n=$(t.e),y)void 0!==n&&(n.ScrollTo(),n.jClick());else if("string"==typeof t.ifnot)for(;i<this.actions.length&&(i++,"section"!=this.actions[i].type||this.actions[i].section!=t.ifnot););else"function"==typeof t.ifnot&&(t.ifnot=t.ifnot.apply(this));e=1;break;case"jFillIf":var y;if("function"==typeof(y=t.cond)&&(y=y.apply(this)),n=$(t.e),y)void 0!==n&&(n.ScrollTo(),n.jFill(t.data));else if("string"==typeof t.ifnot)for(;i<this.actions.length&&(i++,"section"!=this.actions[i].type||this.actions[i].section!=t.ifnot););else"function"==typeof t.ifnot&&(t.ifnot=t.ifnot.apply(this));e=1;break;case"jClickAway":e=!1!==n?n.jClickAway():0;break;case"jVal":if(n.length&&n.val()===t.value){e=!0;break}e=isset(n)&&void 0!==t.value?n.val(t.value):0;break;case"jFill":if(n.length&&n.val()===t.value){e=!0;break}e=!1!==n&&void 0!==t.value?n.jFill(t.value):0;break;case"jMouseOver":e=!1!==n?n.jMouseOver(t.value):0;break;case"iCode":e=iimPlayCode(t.code);break;case"iFill":if(n.length&&n.val()===t.value){e=!0;break}e=!1!==n&&void 0!==t.value?n.iFill(t.value):0;break;case"eFill":if(n.length&&n.val()===t.value){e=!0;break}e=!1!==n?n.eFill(t.value):0;break;case"eClick":e=!1!==n?n.eClick():0;break;case"formSubmit":e=!1!==n?n.submit():0;break;case"ScrollTo":e=!1!==n?n.ScrollTo(t.timeout,t.offset):0;break;case"ReCaptcha2":if(!$found("iframe[src*=recaptcha]")){e=!1;break}var b=$("iframe[src*=recaptcha]");IIM.Debug().iFrame(b).EventClick($("div.recaptcha-checkbox-checkmark:visible"),60,5,1);var m=new CAPTCHA({type:"recaptcha2",api_2captcha:"6c6d2590322d8c3c9d9aac54aaa088e9"});m.Solve(),e=m._IsSolved();break;case"setIFRAME":this.iframe=n,e=null!==this.iframe&&this.iframe.length;break;case"clearIFRAME":return this.iframe=null,!0;case"find$":break;case"delay":e=iimPlayCode("WAIT SECONDS="+t.timeout);break;case"pause":IIM.Pause(),e=!0;break;case"wait":if(this._debug&&_(t.e,"red"),"function"==typeof t.e)for(;t.timeout>0&&!(e=t.e());)iimDisplay("...wait ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;else{for(;t.timeout>0&&(null===this.iframe||!$iFrame(this.iframe,t.e).length)&&(null!==this.iframe||!$(t.e).length);)this._debug&&_($(t.e)),iimDisplay("...wait ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;null!==this.iframe&&(e=$iFrame(this.iframe,t.e).length),null===this.iframe&&(e=$(t.e).length)}break;case"waitGone":if(this._debug&&_(t.e,"red"),"function"==typeof t.e)for(;t.timeout>0&&!(e=!t.e());)iimDisplay("...waitGone ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;else{for(;t.timeout>0&&(null===this.iframe||$iFrame(this.iframe,t.e).length)&&(null!==this.iframe||$(t.e).length);)this._debug&&_(!$(t.e)),iimDisplay("...waitGone ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;e=!$found(t.e)}break;case"dbResetQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&t.db.reset_queue();break;case"dbQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&"function"==typeof t.sql&&(t.sql=t.sql.apply(this)),1==e&&"string"!=typeof t.sql&&(e=0),1==e&&t.db.queue(t.sql);break;case"dbQueryQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&t.db.query_queue();break;case"debug":this._debug=!0,e=1}if(void 0===$&&void 0!==CORE2&&CORE2.Page_init(),_("======> "+e+" --","lightgray"),e&&!1!==n&&(this.last_element=null!==this.iframe?$iFrame(this.iframe,t.e):n),!e){$$Err.push("ERROR : "+this.title+" -> ("+i+") type = "+t.type);break}"debug"!=t.type&&this._debug&&(this._debug=!1),i++}return $$Err.length>0?(_("$$.."+this.title+" --\x3e FAIL..","red"),_($$Err)):_("$$.."+this.title+" --\x3e SUCCESS..","green"),$$Err.length<1},IIM={debug:!1,iframe:null,iframe_tag:"",last_code_tag:"",last_xid:null,last_comment:null,last_selector:null,last_saved_file:null,last_uploaded_url:null,last_element:null,fPath:null,fName:null,comment_:null,jQueryExtend:{jMouseOver:function(t,e,i,n){return IIM.jQueryMouseOver($(this),t,e,i,n)},jClick:function(t,e,i,n){return IIM.jQueryClick($(this),t,e,i,n)},jClickAway:function(t,e,i,n){return IIM.jQueryClickAway($(this),t,e,i,n)},jScrollTo:function(t=500,e=0){return IIM.ScrollTo($(this),t,e)},jFill:function(t,e,i,n,r){return IIM.jQueryFill($(this),t,e,i,n,r)},eMouseOver:function(t,e,i,n){return IIM.EventMouseOver($(this),t,e,i,n)},eClick:function(t,e,i,n){return IIM.EventClick($(this),t,e,i,n)},eFill:function(t,e,i,n,r){return IIM.EventFill($(this),t,e,i,n,r)},enable:function(){$(this).prop("disabled",!1)},disable:function(){$(this).prop("disabled",!0)},iClick:function(t,e,i,n){var r=RAND.String(5);return $(this).attr("iClick",r),IIM.TagClick({type:"*",attr:"iClick:"+r},t,e,i,n)},iFill:function(t,e,i,n,r){var s=RAND.String(5);return $(this).attr("iFill",s),IIM.Debug().TagFill({type:"*",form:"ACTION:*",attr:"iFill:"+s},t,e,i,n,r)},sendkeys:function(t){return t=t.replace(/([^{])\n/g,"$1"),this.each(function(){bililiteRange(this).bounds("selection").sendkeys(t).select(),this.focus()})},SaveTo:function(t,e=null,i,n,r,s){return null!=t&&null!=t||(t=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp),IIM.jQueryDownload($(this),t,e,i,n,r,s),IIM.Get_LastSavedFile()},ScrollTo:function(t=500,e=0){return IIM.ScrollTo($(this),t,e),this},$:function(t){return"IFRAME"==this[0].tagName?this.contents().find(t):$(t)},show:function(){return _($(this)),this}},file_delete:function(t){var e=iimPlayCode('FILEDELETE NAME="'+t+'"');return 1==e&&_("WARNING: File '"+t+"' is deleted !","lightsalmon"),1==e},file_exist:function(t){return 1==iimPlayCode('SET !FOLDER_DATASOURCE "'+t+'"')},comment:function(t){return this.comment_=null==t.comment?t:t.comment,this},Wait:function(t,e=null){if(!(t<=0)){var i="CODE: ";return i+=null!=e?"SET !TIMEOUT_PAGE "+e+jsLF:"",i+="WAIT SECONDS="+t+jsLF,this.debug&&_(i),iimPlay(i),this.Debug(!1),CORE.Page_init(),this}},Pause:function(){var t="CODE: ";t+="PAUSE"+jsLF,iimPlay(t),CORE.Page_init()},iLoadUrl:function(t,e=30,i=.1,n){var r="URL GOTO="+t+jsLF;return IIM._TagPlay({code_tag:r,tPage:e,tWait:i,callback:n})},iLoadNewUrl:function(t,e=30,i=.1,n){return window.location.href==t?this:IIM.iLoadUrl(t,e,i,n)},iLoadBlank:function(t=30,e=.1,i){var n="CODE: \n";return n+="SET !TIMEOUT_PAGE "+t+" \n",n+="URL GOTO=http://lib.mixseo.net/blank.php \n",n+="WAIT SECONDS="+e+" \n",iimPlay(n),this},TagWait:function(t,e=30,i=30,n=.1,r){return"string"==typeof t?t+=" EXTRACT=TXT":t.extract="TXT",IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:n,isTagWait:!0,callback:r})},TagMouseOver:function(t,e=30,i=5,n=.1,r){return"string"==typeof t?t+=" CONTENT=EVENT:MOUSEOVER":t.content="EVENT:MOUSEOVER",IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:n,callback:r})},TagClick:function(t,e=30,i=5,n=.1,r){return IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:n,callback:r})},TagClickAway:function(t,e=30,i=5,n=.1,r){return IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:n,callback:r,click_away:!0})},TagFill:function(t,e,i=30,n=5,r=.1,s){return"string"==typeof t?t+=' CONTENT="'+e+'"':t.content=e,IIM._TagPlay({code_tag:t,tPage:i,tTag:n,tWait:r,callback:s})},TagDownload:function(t,e,i,n=30,r=5,s=.1,o){this.fPath=null==e?APP.tmpDir?APP.tmpDir:AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var a='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF;return"string"==typeof t?t+=" CONTENT=EVENT:SAVETARGETAS":t.content="EVENT:SAVETARGETAS",IIM._TagPlay({pre_code:a,code_tag:t,tPage:n,tTag:r,tWait:s,callback:o})},TagScreenshot:function(t,e,i,n=30,r=5,s=.1,o){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var a='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF;return"string"==typeof t?t+=" CONTENT=EVENT:SAVE_ELEMENT_SCREENSHOT":t.content="EVENT:SAVE_ELEMENT_SCREENSHOT",IIM._TagPlay({pre_code:a,code_tag:t,tPage:n,tTag:r,tWait:s,callback:o})},jQueryMouseOver:function(t,e=30,i=5,n=.1,r){var s={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:MOUSEOVER"};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:n,callback:r})},jQueryClick:function(t,e=30,i=5,n=.1,r){IIM.jQueryMouseOver(t,30,1,.1);var s={type:"*",attr:"XID:"+IIM._XID(t)};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:n,callback:r})},jQueryClickAway:function(t,e=30,i=5,n=.1,r){var s={type:"*",attr:"XID:"+IIM._XID(t)};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:n,callback:r,click_away:!0})},jQueryFill:function(t,e,i=30,n=5,r=.1,s){var o={type:"*",attr:"XID:"+IIM._XID(t)};return o.content=e,IIM._TagPlay({e:t,code_tag:o,tPage:i,tTag:n,tWait:r,callback:s})},jQueryDownload:function(t,e,i,n=30,r=5,s=.1,o){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var a='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF,l={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:SAVETARGETAS"};return IIM._TagPlay({e:t,pre_code:a,code_tag:l,tPage:n,tTag:r,tWait:s,callback:o})},jQueryScreenshot:function(t,e,i,n=30,r=5,s=.1,o){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var a='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF,l={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:SAVE_ELEMENT_SCREENSHOT"};return IIM.ScrollTo(t,100),IIM.Wait(.2),IIM._TagPlay({e:t,pre_code:a,code_tag:l,tPage:n,tTag:r,tWait:s,callback:o})},jQueryWait:function(t,e=30,i=30,n=.1,r,s=null){if($("body").attr("jQueryWait-found","0"),"object"==typeof t&&(t=t.selector),$found(t,s))return!0;null!=this.comment_&&(iimDisplay("jQueryWait ("+i+") : "+this.comment_),this.comment_=null),_("jQueryWait : "+t);var o=window.setInterval(function(){if(CORE.Page_init(),window.document.getElementsByTagName("body").setAttribute("jQueryWait-FOUND","0"),$found(t,s))return window.document.getElementsByTagName("body").setAttribute("jQueryWait-FOUND","1"),window.clearInterval(o),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait-FOUND:1"},e,i,n),window.clearInterval(o),1==$("body").attr("jQueryWait-FOUND")},jWait:function(t,e=20,i){for(var n=0;n<3&&!IIM.jQueryWait(t,30,e,.1,i);n++);return IIM.jQueryWait(t,30,e,.1,i)},jWaitIframe:function(t,e,i=20,n){for(var r=0;r<3&&!IIM.jQueryWait(e,30,i,.1,n,t);r++);return IIM.jQueryWait(e,30,i,.1,n,t)},jWaitDisappear:function(t,e=20,i){return IIM.jQueryWaitDisappear(t,30,e,.1,i)},jQueryWaitDisappear:function(t,e=30,i=30,n=.1,r){if($("body").attr("jQueryWaitDisappear-found","0"),"object"==typeof t&&(t=t.selector),$(t).length<1)return!0;var s=window.setInterval(function(){if(_(t+" : "+$(t).length),$(t).length<1)return $("body").attr("jQueryWaitDisappear-found","1"),window.clearInterval(s),this;_(".")},1e3);return IIM.TagWait({type:"BODY",attr:"jQueryWaitDisappear-FOUND:1"},e,i,n),window.clearInterval(s),1==$("body").attr("jQueryWaitDisappear-FOUND")},jQueryWait_is:function(t,e,i=30,n=30,r=.1,s){var o=IIM._XID(t),a=t.selector+"[xid="+o+"]",l=function(t,e){var i=!1;switch(t){case":appear":i=$(e).length;break;case":disappear":i=$(e).length<1;break;default:i=$(e).is(t)}return i};if(l(e,a))return!0;$("body").attr("jQueryWait_is-found","0");var u=window.setInterval(function(){if(l(e,a))return $("body").attr("jQueryWait_is-found","1"),window.clearInterval(u),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait_is-FOUND:1"},i,n,r),window.clearInterval(u),1==$("body").attr("jQueryWait_is-FOUND")},jQueryWait_css:function(t,e,i=30,n=30,r=.1,s){var o=IIM._XID(t),a=t.selector+"[xid="+o+"]",l=function(t,e){var i=!0;for(var n in t)n.toLowerCase().indexOf("color")>=0?i&=colorRGB($(e).css(n))==colorRGB(t[n]):i&=$(e).css(n)==t[n];return i};if(l(e,a))return!0;$("body").attr("jQueryWait_css-found","0");var u=window.setInterval(function(){if(l(e,a))return $("body").attr("jQueryWait_css-found","1"),window.clearInterval(u),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait_css-FOUND:1"},i,n,r),window.clearInterval(u),1==$("body").attr("jQueryWait_is-FOUND")},EventInsert:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,45,e)},EventPageUp:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,33,e)},EventPageDown:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,34,e)},EventDelete:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,46,e)},EventHome:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,36,e)},EventEnd:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,35,e)},EventSpace:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,32,e)},EventTab:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,9,e)},EventESC:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,27,e)},EventEnter:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,13,e)},EventBackspace:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,8,e)},EventArrowRight:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,39,e)},EventArrowLeft:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,37,e)},EventArrowUp:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,38,e)},EventArrowDown:function(t,e=1,i=30,n=5,r=.1,s){return IIM._EventKeypress(t,40,e)},EventMouseOver:function(t,e=30,i=5,n=.1,r){var s=IIM._XID(t);"object"==typeof t&&(t="[xid="+s+"]");var o="TAG POS=1 TYPE=* ATTR=XID:{xid} CONTENT=EVENT:MOUSEOVER"+jsLF;return o=o.replace(/{xid}/g,s),IIM._TagPlay({e:$(t),code_tag:o,tPage:e,tTag:i,tWait:n,callback:r})},EventMouseDown:function(t,e=30,i=5,n=.1,r){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var s='EVENT TYPE=MOUSEDOWN SELECTOR="{selector}" BUTTON=0'+jsLF;return s=s.replace(/{selector}/g,t),IIM._TagPlay({e:$(t),code_tag:s,tPage:e,tTag:i,tWait:n,callback:r})},EventClick:function(t,e=30,i=5,n=.1,r){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var s='EVENT TYPE=CLICK SELECTOR="{selector}" BUTTON=0'+jsLF;return s=s.replace(/{selector}/g,t),IIM._TagPlay({e:$(t),code_tag:s,tPage:e,tTag:i,tWait:n,callback:r})},EventFill:function(t,e,i=30,n=5,r=.1,s){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var o='EVENTS TYPE=KEYPRESS SELECTOR="{selector}" CHARS="{value}"'+jsLF;return o=(o=o.replace(/{selector}/g,t)).replace(/{value}/g,AddSlashes(e)),IIM._TagPlay({e:$(t),code_tag:o,tPage:i,tTag:n,tWait:r,callback:s})},EventSelectByText:function(t,e,i=30,n=5,r=.1,s){return IIM.EventClick(t.find("option").filter(function(){return $.trim($(this).text())==e}),i,n,r,s)},EventKeypress___:function(t,e,i=null,n=30,r=5,s=.1,o){if("string"==typeof e)var a='EVENT TYPE=KEYPRESS SELECTOR="{selector}" KEY="{value}"';else a='EVENT TYPE=KEYPRESS SELECTOR="{selector}" CHAR="{value}"';return null!=i&&(a+=' MODIFIERS="{modifier}"'),a=(a=(a=a.replace(/{selector}/g,t)).replace(/{value}/g,e)).replace("{modifier}",i),a+=jsLF,IIM._TagPlay({code_tag:a,tPage:n,tTag:r,tWait:s,callback:o})},ScrollTo:function(t,e=500,i=0){return $("html, body").animate({scrollTop:null==t.offset()?$("body").height():t.offset().top+i},e),this},DownloadFile:function(t,e=30,i=5,n=.1,r){if(!$("body").length)return Err("No body element found !");if(null==t.url)return Err("No url found !");if(null==t.fName)return Err("No fName found !");null==t.fPath&&(t.fPath=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp);var s=t.fName.split(".").last(),o="IIM_DownloadFile_"+Rand();switch(this.last_saved_file=null,s){case"mp4xxxx":(a=$("[xid="+o+"]")).length||(a=$("<video>",{xid:o}),$("body").append(a)),a.attr("src",t.url);break;default:var a;(a=$("img[xid="+o+"]")).length||(a=$("<img>",{xid:o}),$("body").append(a)),a.attr("src",t.url)}return this.Debug().TagDownload({type:"*",attr:"XID:"+o},t.fPath,t.fName),this},PrntSc_Upload:function(t,e){var i=null;if(null==t.local_image)return Err("No local image found !");if(null==t.get_image_url&&(t.get_image_url=!0),FF.Save1().Add_Tab(!0).Url("https://prnt.sc/"),IIM.TagWait({type:"DIV",attr:"TXT:Browse<SP>images"},60,5,1)){if(IIM.jQueryFill($("input[type=file]:eq(0)"),t.local_image,60,5,1),!IIM.TagWait({type:"DIV",attr:"CLASS:*uploader-result*&&TXT:*Success!*&&STYLE:*block*"},60,120,1))return Err("Can not upload ! Some error from prnt.sc !");var n=$("a#link-textbox").text();if(t.get_image_url){if(IIM.iLoadUrl(n,10,1),!IIM.jQueryWait($("img#screenshot-image"),60,120,1))return Err("Can not get uploaded_url !");i=$("#screenshot-image").attr("src")}else i=n}return this.last_uploaded_url=i,FF.Close_Tab().Return1(),i},Get_LastSavedFile:function(){return this.fPath.indexOf("/")>=0&&this.fPath.indexOf("\\")<0?"/"==this.fPath.substr(-1)?this.last_saved_file=this.fPath+this.fName:this.last_saved_file=this.fPath+"/"+this.fName:"\\"==this.fPath.substr(-1)?this.last_saved_file=this.fPath+this.fName:this.last_saved_file=this.fPath+"\\"+this.fName,this.last_saved_file},iFrame:function(t){if(this.iframe=t,null==t)this.iframe_tag="";else{var e="iframe_"+RAND.String();null!=t&&null!=t&&null!=t.html()&&null!=t.attr("name")&&t.attr("name").length>0&&(e=t.attr("name")),t.attr("name",e),this.iframe_tag="FRAME NAME="+e+jsLF}return this},Debug:function(t=!0){return this.debug=t,this},Selector:function(t){return null==t?this.last_selector:("object"==typeof t&&(t="[xid="+IIM._XID(t)+"]"),this.last_selector=t,this)},_EventKeypress:function(t,e,i=1,n=30,r=5,s=.1,o){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");for(var a="",l=0;l<i;l++)a+='EVENT TYPE=KEYPRESS SELECTOR="{selector}" KEY={key}'+jsLF;return a=(a=a.replace(/{selector}/g,t)).replace(/{key}/g,e),IIM._TagPlay({code_tag:a,tPage:n,tTag:r,tWait:s,callback:o})},_TagPlay:function(t){try{t.callback?t.callback:callback=function(){},this.last_code_tag=t.code_tag,this.debug&&_("this.last_code_tag : "+this.last_code_tag),t.code_tag=IIM._TagFormat(t.code_tag),this.last_element=t.e;var e=IIM._Head();return e+=t.tPage>0?"SET !TIMEOUT_PAGE "+t.tPage+jsLF:"",e+=t.tTag>0?"SET !TIMEOUT_TAG "+t.tTag+jsLF:"",e+=this.iframe_tag,null!=t.pre_code&&(e+="'----Pre----"+jsLF,e+=t.pre_code+jsLF),e+="'----Code----"+jsLF,e+=t.code_tag+jsLF,t.click_away||(e+="'----NO Click Away----"+jsLF,e+="TAB T=1"+jsLF),this.debug&&_(t.e),this.debug&&_(e),iimPlay(e),null!=this.last_comment&&this._(this.last_comment+" END !"),CORE.Page_init(),this.iFrame(null),this._(null),this.Debug(!1),t.isTagWait?"#EANF#"!=iimGetLastExtract(0)&&(t.tWait>0&&IIM.Wait(t.tWait),"function"==typeof t.callback&&t.callback(),!0):(t.tWait>0&&IIM.Wait(t.tWait),"function"==typeof t.callback&&t.callback(),this)}catch(t){return this._(this.last_comment+" FAIL !"),this._(null),this.Debug(!1),this}},_TagFormat:function(t){if((null==t||null==t)&&null!=this.last_code_tag)return this.last_code_tag;if("string"==typeof t)return t;if("object"==typeof t){var e=Object_To_Array(t);e.unshift({pos:1}),t=Array_To_Object(e);var i=[];for(var n in t){var r=t[n].toString();null!=r&&(r=(r=r.replace(/\s/gi,"<SP>")).replace(/\n/gi,"<BR>")),n=n.toUpperCase(),i.push(n+"="+r)}return t="TAG "+i.join(" ")}},_Head0:function(){return"CODE: ","CODE: "},_Head:function(){var t=IIM._Head0();return t+="ONDIALOG POS=1 BUTTON=OK CONTENT="+jsLF,t+="SET !ENCRYPTION NO"+jsLF,t+="SET !REPLAYSPEED FAST"+jsLF,t+="SET !ERRORIGNORE YES"+jsLF,t+="SET !EXTRACT_TEST_POPUP NO"+jsLF,t+="SET !TIMEOUT_STEP 1"+jsLF,t+="SET !TIMEOUT_PAGE 10"+jsLF},_XID:function(t){var e=RAND.String(32);return this.last_xid=e,null!=this.iframe&&("object"==typeof t?t=$iFrame(this.iframe,t.selector):"string"==typeof t&&(t=$iFrame(this.iframe,t))),t.attr("xid",e),e},_:function(t,e=null){return this.last_comment=t,null!=t&&_(t,e),this}},DB3=function(t){this.is_debug=1,this.sqls=[],this.ret={rows:[],rowsBy:{}},this.url=null!=t.url?t.url:null,this.setting=$.extend({dbname:null,user:null,pass:null,server:"localhost"},t)},DB3.prototype.reset_queue=function(){return this.sqls=[],this},DB3.prototype.queue=function(t){return null==t||null==t?this:(this.sqls.push(t),this)},DB3.prototype.query_queue=function(){if(!(this.sqls.length<1))return this.Query(this.sqls.join(";")),_(`DB3.query_queue processed (${this.sqls.length} queries) !`,"lightblue"),this},DB3.prototype.Query=function(t){var e=this;if(null==t)return this;if(this.sql=null,"string"==typeof t&&(this.sql=t),is_array(t)&&t.length>0&&(this.sql=t.join(";")),isset(t.sql)&&(this.sql=null!=t.sql?t.sql:null),null==this.sql)return null;this.last_sql=this.sql;var i=this._jSQL(this.sql);if(this.ret=i,isset(t.id)&&i.found){for(var n in this.ret.fields=Object.keys(i.rows[0]),t)"function"==typeof t[n]&&(n.in("UpdateSQL,Update")||i.rows.forEach(function(e){e[n]=t[n]}));i.rows.forEach(function(i){i._db={table:t.table,id:t.id},i.UpdateSQL=function(i){return"UPDATE `"+t.table+"` SET "+e.SqlSet(i)+" WHERE `"+t.id+"`='"+this[t.id]+"' LIMIT 1 "},i.Update=function(i){return _(this.UpdateSQL(i),"lightgray"),e.Query(this.UpdateSQL(i)).ret.success?($.extend(this,i),_("--- row.Update (#"+this[t.id]+") : "+JSON.stringify(i)+" ","lightgrey")):(_("--- ERR: Row.Update","red"),_(e.ret)),this}}),this.rows=i.rows}return this},DB3.prototype.firstRow=function(){return this.ret.found?this.ret.rows[0]:null},DB3.prototype.showReturn=function(t=1){return 0==t?this:(_(this.sql,"lightgray"),_(this.ret),this)},DB3.prototype.jsonFields=function(fields){if(void 0===this.rows||this.rows.length<1)return this;if(null===fields)return this;var rows=this.rows,tFields=[fields];return"string"==typeof fields&&fields.indexOf(",")>0&&(tFields=fields.split(",")),is_array(fields)&&(tFields=fields),tFields.forEach(function(field){for(var i=0;i<rows.length;i++){var row=rows[i];void 0===row[field]&&(row[field]={}),null===row[field]&&(row[field]={}),"object"!=typeof row[field]&&("string"==typeof row[field]&&eval("row['"+field+"'] = "+row[field]))}}),this},DB3.prototype.formatRows=function(t){if(void 0===this.rows||this.rows.length<1)return this;if("function"!=typeof t)return this;for(var e=0;e<this.rows.length;e++)t(this.rows[e]);return this._rowsBy(this.ret.fields,this.rows),this},DB3.prototype._rowsBy=function(t,e){var i={};return t.forEach(function(t){void 0===i[t]&&(i[t]={})}),t.forEach(function(t){e.forEach(function(e,n){void 0===i[t][e[t]]&&(i[t][e[t]]=$.extend({_n_:-1},e)),i[t][e[t]]._n_++;var r=i[t][e[t]]._n_;i[t][e[t]][r]=e})}),this.ret.rowsBy=i,this},DB3.prototype._jSQL=function(t){var e=this.url+"?";e+="d="+encodeURIComponent(this.setting.dbname)+"&",e+="u="+encodeURIComponent(this.setting.user)+"&",e+="p="+encodeURIComponent(this.setting.pass)+"&",e+="s="+encodeURIComponent(this.setting.server)+"&",e+="_="+RAND.Between(1e4,99999);try{var i=$.ajax({url:e,type:"post",cache:!1,async:!1,data:{sql:encodeURIComponent(t)},dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON;return i.success=null!=i&&i.status,i.found=i.success&&void 0!==i.rows&&i.rows.length>0,i}catch(t){return t}},DB3.prototype.SqlSet=function(t,e=",",i=null){var n=[];if(i=null==i?"":"`"+i+"`.",e=e.toUpperCase(),$.each(t,function(t,r){if("function"==typeof r&&(r=r()),"array"==typeof r&&(r="<IN> ('"+r.join("','")+"')"),null==r)return["AND","OR"].has(e)&&n.push(i+"`"+t+"` IS NULL"),void(["AND","OR"].has(e)||n.push(i+"`"+t+"`=NULL"));var s=r.toString().trim().toUpperCase();if(0!=s.indexOf("!=")&&0!=s.indexOf("<>"))if(0!=s.indexOf("<+>"))if(0!=s.indexOf("<DATE_ADD>"))if(0!=s.indexOf("<NOW_ADD>"))if(0!=s.indexOf("<->"))if(0!=s.indexOf("<LIKE>"))if(0!=s.indexOf("<IN>"))if(0!=s.indexOf("<IS>"))if(0!=s.indexOf("NOW()"))if(0!=s.indexOf("<FUNC>"))if(0!=s.indexOf("<RAW>"))if(s.indexOf(" AGO>")>0){var o=r.split("AGO >")[0].replace("<","").trim().split(" ")[0],a=r.split(" AGO>")[1].trim();n.push("TIMESTAMPDIFF("+o+", "+i+"`"+t+"`, NOW()) "+a)}else if(0!=s.indexOf(":>"))if(0!=s.indexOf(":<"))switch(typeof r){case"object":l=(l=JSON.stringify(r)).length>0?l.replace(/\'/g,"\\'"):"",n.push(i+"`"+t+"`='"+l+"'");break;case"number":n.push(i+"`"+t+"`='"+r+"'");break;default:n.push(i+"`"+t+"`='"+r.replace(/\'/g,"\\'")+"'")}else{l=r.replace(":<","<").trim();n.push(i+"`"+t+"`"+l)}else{var l=r.replace(":>",">").trim();n.push(i+"`"+t+"`"+l)}else n.push(i+"`"+t+"`="+r.replace("<RAW>",""));else n.push(r.replace("<FUNC>","").trim());else n.push(i+"`"+t+"` = NOW() ");else n.push(i+"`"+t+"` "+r.replace("<IS>","IS "));else n.push(i+"`"+t+"` "+r.replace("<IN>","IN "));else n.push(i+"`"+t+"` "+r.replace("<LIKE>","LIKE "));else{var l=r.replace("<->","").trim();n.push(i+"`"+t+"` = IF(`"+t+"` IS NULL, "+l+", `"+t+"` - "+l+")")}else{u=r.replace("<NOW_ADD>","").trim();n.push(i+"`"+t+"` = DATE_ADD(NOW(), INTERVAL "+u+")")}else{var u=r.replace("<DATE_ADD>","").trim();n.push(i+"`"+t+"` = DATE_ADD(`"+t+"`, INTERVAL "+u+")")}else{var l=r.replace("<+>","").trim();n.push(i+"`"+t+"` = IFNULL(`"+t+"` + "+l+", "+l+")")}else n.push(i+"`"+t+"` "+r)}),","!=e)for(var r=0;r<n.length;r++)n[r]="("+n[r]+")";return n.join(e)},DBTable=function(t,e,i){this.table=t,this.update_table=void 0===i?t:i,this.index="id",this.db=e,this.field={},this.last_sql=null,this.column=null,this.rows=null,this.row=null,this.last_insert_id=null,this.total_affected_rows=null,this.unique_field=null,this.unique_function=null,this.row_functions=[],this.rows_functions=[],this.rows_filtered=[],this.row_filtered=null,this._default_fields=null,this.load_preset_format()},DBTable.prototype.load_preset_format=function(){this.db.url;var t=this.db.url.split("/")[2],e=(this.db.setting.server,[t,this.db.setting.dbname,this.table].join("|"));switch(e){case"lib.mixseo.net|gosme_project_SOCIAL":this.defineUnique("unique",function(t){return MD5([t.worker_task,t.meta_key].join("|"))});break;case"192.168.100.6|vli|_meta_contact":this.defineUnique("unique",function(t){return MD5([t.contact,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|_meta_network":this.defineUnique("unique",function(t){return MD5([t.network,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|_meta_site":this.defineUnique("unique",function(t){return MD5([t.site,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|contact":this.defineUnique("unique",function(t){return MD5([t.email,t.fb_user,t.fb_page,t.twitter_user].join(","))});break;case"192.168.100.6|vli|site":this.indexField("domain");break;case"192.168.100.6|livescore|_meta_country":this.defineUnique("unique",function(t){return MD5([t.country,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_event":this.defineUnique("unique",function(t){return MD5([t.event,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_game":this.defineUnique("unique",function(t){return MD5([t.game,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_group":this.defineUnique("unique",function(t){return MD5([t.group,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_league":this.defineUnique("unique",function(t){return MD5([t.league,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_person":this.defineUnique("unique",function(t){return MD5([t.person,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_round":this.defineUnique("unique",function(t){return MD5([t.round,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_season":this.defineUnique("unique",function(t){return MD5([t.season,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_team":this.defineUnique("unique",function(t){return MD5([t.team,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|game|games":this.defineUnique("unique",function(t){return MD5([t.slug,t.source].join(","))}),this.rowsFormat(function(t){this.game=t.toObjectBy("id")}),this.rowFormat(function(t){t.html_desc=t.desc.replace(/\\n/gi,"<br>"),t.html_in_cat=`<div class="wsite-image wsite-image-border-none" style="padding-top:10px;padding-bottom:10px;margin-left:0px;margin-right:0px;text-align:center">\n                    <a href="${t.href}">\n                        <img style="width:auto;max-width:100%" alt="${t.title}" src="${t.cover}">\n                        <div style="display:block;font-size:90%;padding-top:10px;">${t.title}</div>\n                    </a>\n                </div>`});break;case"192.168.100.6|game|gamemeta":this.defineUnique("unique",function(t){return MD5([t.game,t.meta_group,t.meta_key].join(","))}),this.rowsFormat(function(t){this.game=t.toObjectBy("game"),this.meta_group=t.toObjectBy("meta_group"),this.meta_key=t.toObjectBy("meta_key")}),this.rowFormat(function(t){"_game_type"==t.meta_key&&(t.meta_value=t.meta_value.to_json()),"_game_technology"==t.meta_key&&(t.meta_value=t.meta_value.to_json()),"_tag"==t.meta_group&&(t.slug=`${t.meta_key}-tag`,t.href=`/${t.slug}.html`,t.html_link=`<a href='${t.href}' title='${t.meta_value}'>${t.meta_value}</a>`),"_category"==t.meta_group&&(t.slug=`${t.meta_key}-cat`,t.href=`/${t.slug}.html`,t.html_link=`<a href='${t.href}' title='${t.meta_value}'>${t.meta_value}</a>`)});break;case"192.168.100.6|game|pagemeta":this.defineUnique("unique",function(t){return MD5([t.page,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|game|sitemeta":this.defineUnique("unique",function(t){return MD5([t.site,t.meta_group,t.meta_key].join(","))}),this.rowsFormat(function(t){this.get_value=function(e,i){var n=null;return t.forEach(function(t){null==n&&t.meta_group==e&&t.meta_key==t.meta_key&&(n=t.meta_value)}),n},this.get_values=function(e){var i=[];return t.forEach(function(t){null==value&&t.meta_group==e&&i.push(t.meta_value)}),i}});break;case"192.168.100.6|game|page":this.defineUnique("unique",function(t){return MD5([t.site,t.slug].join(","))}),this.rowsFormat(function(t){this.games_id=t.toArrayBy("game")}),this.rowFormat(function(t){t.html_link=`<a href='${t.publish_url}' title='${t.title.addslashes()}'>${t.title}</a>`});break;case"192.168.100.6|game|_resource":this.rowsFormat(function(t){this.title=t.toObjectBy("title")})}_("load_preset_format match = "+e,"lightgray")},DBTable.prototype.indexField=function(t){return this.index=t,this},DBTable.prototype.set_default_fields=function(t){return this._default_fields=$.extend({},t),this},DBTable.prototype.assignRowsTo=function(t){return void 0===t&&(t={}),t=$.extend({},this.rows),this},DBTable.prototype.filter=function(t){var e=this;return this.rows_filtered=[],this.rows.forEach(function(i,n){var r=!0;for(var s in t)is_array(t[s])?r&=t[s].indexOf(i[s])>=0:r&=i[s]==t[s];r&&e.rows_filtered.push(i)}),this.row_filtered=!!this.rows_filtered.length&&this.rows_filtered[0],this.rows_filtered},DBTable.prototype.filter1st=function(t,e){if("object"==typeof t)return this.filter(t)[0];var i={};return i[t]=e,this.filter(i)[0]},DBTable.prototype.query=function(t){return t=t.length?t.join(";"):t,this.db.Query(t),!!this.db.ret.success&&(this.total_affected_rows=this.db.ret.rowCount,this.last_insert_id)},DBTable.prototype.rowsFormat=function(t){return this.rows_functions.push(t),this},DBTable.prototype.rowFormat=function(t){return this.row_functions.push(t),this},DBTable.prototype._formatRows=function(t){if(null==t)return null;var e=this;if(e.rows_functions.length)for(var i=0;i<e.rows_functions.length;i++)e.rows_functions[i].apply(e,[t]);var n=[];return t.forEach(function(t){var i=$.extend({},t);if(e.row_functions.length)for(var r=0;r<e.row_functions.length;r++)e.row_functions[r].apply(e,[i]);i.db=e.db,i.UpdateSQL=function(t){return"UPDATE `"+e.update_table+"` SET "+DB._SqlSet(t)+" WHERE `"+e.index+"`='"+this[e.index]+"' LIMIT 1 "},i.Update=function(t){var i=this.UpdateSQL(t);return _(i,"lightgray"),e.db.Query(i).ret.success?_("--- row.Update (#"+this[e.index]+") : "+JSON.stringify(t)+" ","lightgreen"):(_("--- ERR: Row.Update","red"),_(e.db.ret)),this},n.push(i)}),n},DBTable.prototype.selectColumn=function(t,e,i,n){var r=this;return this.db.Query(this.sql_selectColumn(t,e,i,n)),!!this.db.ret&&(this.rows=this._formatRows(this.db.ret.rows),this.row=this.rows[0],this.column={},this.column[t]=[],this.rows.forEach(function(e){r.column[t].push(e[t])}),this.rows)},DBTable.prototype.selectRows=function(t,e,i,n){return this.db.Query(this.sql_selectRows(t,e,i,n)),!!this.db.ret&&(this.rows=this._formatRows(this.db.ret.rows),this.row=null==this.rows?null:this.rows[0],this.rows)},DBTable.prototype.selectFirstRow=function(t,e){var i=this.selectRows(t,1,e);return!!i.length&&i[0]},DBTable.prototype.insertRows=function(t){},DBTable.prototype.insertRow=function(t){return this.db.Query(this.sql_insertRow(t)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.insertIgnoreRow=function(t){return this.db.Query(this.sql_insertIgnoreRow(t)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.insertUpdateRow=function(t,e){return this.db.Query(this.sql_insertUpdateRow(t,e)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.update=function(t,e,i,n){return this.updateRow(t,e,i,n)},DBTable.prototype.updateRow=function(t,e,i,n){return this.db.Query(this.sql_updateRow(t,e,i,n)),!!this.db.ret.success&&($.extend(this.row,t),this.total_affected_rows=this.db.ret.rowCount,_("--- updated row : "+JSON.stringify(t),"lightblue"),!0)},DBTable.prototype.show_sql_selectColumn=function(t,e,i,n){return this.sql_selectColumn(t,e,i,n).___("DBTable.sql_selectColumn"),this},DBTable.prototype.show_sql_selectRows=function(t,e,i,n,r){return this.sql_selectRows(t,e,i,n,r).___("DBTable.show_sql_selectRows"),this},DBTable.prototype.show_sql_insertRow=function(t){return this.sql_insertRow(t).___("DBTable.show_sql_insertRow"),this},DBTable.prototype.show_sql_insertIgnoreRow=function(t){return this.sql_insertIgnoreRow(t).___("DBTable.show_sql_insertIgnoreRow"),this},DBTable.prototype.show_sql_updateRow=function(t){return this.sql_updateRow(t).___("DBTable.show_sql_updateRow"),this},DBTable.prototype.sql_selectColumn=function(t,e,i,n){return this.last_sql="SELECT `"+t+"`, NOW() as now_ FROM `"+this.table+"` ",null!=e&&Object.keys(e).length&&(this.last_sql+=" WHERE "+DB._SqlSet(e,"AND")),null!=n&&(this.last_sql+=" ORDER BY "+n),null!=i&&(this.last_sql+=" LIMIT "+i),this.last_sql},DBTable.prototype.sql_selectRows=function(t,e,i,n){return this.last_sql="SELECT *, NOW() as now_ FROM `"+this.table+"` ",null!=t&&Object.keys(t).length&&(this.last_sql+=" WHERE "+DB._SqlSet(t,"AND")),null!=i&&(this.last_sql+=" ORDER BY "+i),null!=n&&(this.last_sql+=" GROUP BY "+n),null!=e&&(this.last_sql+=" LIMIT "+e),this.last_sql},DBTable.prototype.sql_insertRow=function(t){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT INTO `"+this.update_table+"` SET "+DB._SqlSet(t),this.last_sql},DBTable.prototype.sql_insertIgnoreRow=function(t){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT IGNORE INTO `"+this.update_table+"` SET "+DB._SqlSet(t),this.last_sql},DBTable.prototype.sql_insertUpdateRow=function(t,e){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT INTO `"+this.update_table+"` SET "+DB._SqlSet(t),null!=e&&Object.keys(e).length&&(this.last_sql+=" ON DUPLICATE KEY UPDATE "+DB._SqlSet(e)),this.last_sql},DBTable.prototype.sql_updateRow=function(t,e,i,n){return this.last_sql="UPDATE `"+this.update_table+"` SET "+DB._SqlSet(t),null!=e&&Object.keys(e).length&&(this.last_sql+=" WHERE "+DB._SqlSet(e,"AND")),null!=n&&(this.last_sql+=" ORDER BY "+n),null!=i&&(this.last_sql+=" LIMIT "+i),this.last_sql},DBTable.prototype.defineUnique=function(t,e){return this.unique_field=t,this.unique_function=e,this},DBTable.prototype._setDefault=function(t){if(null!=this._default_fields){var e=$.extend({},this._default_fields);for(var i in e){if(void 0!==t[i])return;t[i]=e[i]}return this}},DBTable.prototype._setUnique=function(t){if(null!=this.unique_field&&is_func(this.unique_function))return t[this.unique_field]=this.unique_function.apply(this,[t]),this},DBTable.prototype.console_log=function(t){return _Var(`${this.table} (--${t}--)`,this),this},Website3=function(t){this.domain=null,this.core=null,this.site={},this.domain="string"==typeof t?t.indexOf(",")>0?t.split(","):[t]:t,null!==this.domain&&this._LoadCore()},Website3.prototype._LoadCore=function(){if(null==this.domain||null==this.domain)return this;var db=new DB2({url:"http://earns.io/api/_jSQL.php",dbname:"mixseone_service_SEOMAN",user:"mixseone_adminsexy",pass:"Abcd1234#",server:"localhost"}),ret=db.Query({table:"site_function",unique:"domain",sql:"SELECT * FROM `site_function` WHERE `domain` IN ('"+this.domain.join("','")+"') AND `status`='ready' "});if(ret.found){for(var i=0;i<ret.rows.length;i++){var site=ret.rows[i];for(var field in ret.rows[i])"f"==field[0]&&null!==ret.rows[i][field]&&eval(ret.rows[i][field]);this[ret.rows[i].domain]=site}$.extend(this,ret.rows[0]),this.core=ret.rows[0]}return this},void 0===Website3&&PLUGINS.push("script/Website3.js"),App=function(){this.db=null,this.table={},this.asset={},this.website={},this.var={},this.dbnow_base=null,this.dbnow_diff=null,this._fn={},this._current_process=null,this._process={},this._action={},this._autoit={},this._$html=null,this._$div=$("<div>").html(this._$html)},App.prototype.$html=function(t){return this._$html=null!=t?t:this._$html,this._$div=null!=this._$html?$("<div>").html(this._$html):$("html"),this},App.prototype.$=function(t){return null==this._$html?$(t):t.in(["body","head","html"])?this._$div:this._$div.find(t)},App.prototype.try_load_url_ajax=function(t){var e=this;return this._$html=null,$.ajax({url:t,success:function(i){_(`App.try_load_url_ajax for ${t} is done !`,"lightblue"),e.$html(i),_(`Found ${e.$("meta").length} <meta>, ${e.$("div").length} <div>, ${e.$("script").length} <script>, ${e.$("a").length} <a>`),_(`Found ${e.$("a[href*='facebook.com']").length} <a-facebook>, ${e.$("a[href*='twitter.com']").length} <a-twitter>`)},error:function(t,e,i){},type:"get",cache:!1,async:!1,timeout:3e4}),this._$html,this},App.prototype.db_define=function(t){return this.db=new DB3(t),this.db_test(),this},App.prototype.db_test=function(){return this.db.Query("SELECT TABLE_NAME, NOW() as now_ FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA='"+this.db.setting.dbname+"'"),this.db_connected=void 0!==this.db.ret&&this.db.ret.status,this.db_connected?_("App.db_test : Connected (found "+this.db.ret.rows.length+" tables) ! ","gray"):_("App.db_test : CAN NOT CONNECT ! ","red"),this.db_connected&&this.setDBNow(this.db.ret.rows[0].now_),this},App.prototype.AutoIt=function(t,e){return void 0===e?this._autoit[t]:(this._autoit[t]=e,this)},App.prototype.setDBNow=function(t){new Date;return this.dbnow_base=new Date(t),this.dbnow_diff=(new Date).getTime()-this.dbnow_base.getTime(),this},App.prototype.DBNow=function(){var t=new Date;return new Date(t.getTime()-this.dbnow_diff-60*t.getTimezoneOffset()*1e3).toFullSQL()},App.prototype.load_ff_profile=function(){this.ff_profile=null;var t=new DB3({url:"http://lib.mixseo.net/db/_jSQL.php",dbname:"gosme_project_SOCIAL",user:"gosme_adminsexy",pass:"Abcd1234#"});return this.ff_profile=new DBTable("ff_profile",t),0==this._autoit.ff_profile.indexOf("Profile-USER")&&this.ff_profile.selectFirstRow({id:this._autoit.ff_profile.split("\\")[1]}),this.table.asset=new DBTable("asset",t),null!=this.ff_profile.row&&this.ff_profile.row["google.com"]>0&&(this.asset["google.com"]=$.extend({},this.table.asset.selectFirstRow({id:this.ff_profile.row["google.com"]})),this.website["google.com"]=new Website3("google.com")),this},App.prototype.load_worker_task=function(t){this.worker_task=null,t=void 0!==t?t:this._autoit.task_id;var e=new DB3({url:"http://lib.mixseo.net/db/_jSQL.php",dbname:"gosme_project_SOCIAL",user:"gosme_adminsexy",pass:"Abcd1234#"}),i=new DBTable("worker_task",e);if(i.rowsFormat(function(t){var i=t.toArrayBy("id");if(!(i.length<1)){var n=new DBTable("worker_task_meta",e);if(n.selectRows({worker_task:"<IN> ("+i.join(",")+")"}),null!=n.row){var r=n.rows.toObjectBy("worker_task");t.forEach(function(t){t.metas=r[t.id]})}}}),i.rowFormat(function(t){t.sql_set_meta=function(t,i,n){return _("...sql_set_meta"),new DBTable("worker_task_meta",e).sql_insertUpdateRow({worker_task:this.id,meta_key:t,meta_value:i})}}),i.rowFormat(function(t){null!==t.data_input&&(t.data_input=t.data_input.to_json()),t.now_=new Date(t.now_),t.setFinished=function(t){return i.updateRow({worker_status:"finished",last_finished:"NOW()",note:t},{id:this.id}),this},t.setFail=function(t){return i.updateRow({worker_status:"fail",note:t},{id:this.id}),this},t.setProcessing=function(t){return i.updateRow({worker_status:"processing",note:null},{id:this.id}),this}}),i.selectFirstRow({id:t}),this.worker_task=i.row,null!=this.worker_task.table_data&&this.worker_task.table_id>0){var n=new DBTable(this.worker_task.table_data,e);n.selectFirstRow({id:this.worker_task.table_id}),this.worker_task_data=n.row}return this},App.prototype.data_input=function(t,e){if(null!=this.worker_task.data_input&&null!=this.worker_task.data_input[t]&&(null==e||null!=this.worker_task.data_input[t][e]))return null!=e?this.worker_task.data_input[t][e]:this.worker_task.data_input[t]},App.prototype.new_process=function(t){return null==t&&(t="app-process-"+rand(1e4,99999)),this._process[t]={_actions:[]},this._current_process=this._process[t],this},App.prototype.add_action=function(t,e){return null==this._current_process?this:(this._current_process._actions.push({name:t,params:e}),this)},App.prototype.register_action=function(t,e){return null==this._action[t]&&(this._action[t]=[]),this._action[t].push(e),this},App.prototype.go=function(){var t=this;if(null==this._current_process)return this;_("__ App.go __");for(var e=0;e<this._current_process._actions.length;e++){var i=this._current_process._actions[e];if(null==this._action[i.name])return _(`Action '${i.name}' is not defined or registered !`,"red"),this}var n=!0;for(e=0;e<this._current_process._actions.length;e++){if(!n)return;i=this._current_process._actions[e];_(`--- ${i.name} ---`,"lightblue"),this._action[i.name].forEach(function(e){if(n){var i=e.apply(t);n&=0!=i}}),n||_("return false --\x3e STOPPED !","red")}return this._current_process=null,this};
