Array.prototype.SumByKey=function(t){for(var e=0,i=!1,r=0;r<this.length;r++)"object"==typeof this[r]&&(i=!0,e+=this[r][t]);return i?e:null},Array.prototype.last=function(t=0){return this[this.length+t-1]},Array.prototype.shuffle=function(){for(var t,e,i=[],r=0;r<this.length;r++)i.push(this[r]);for(r=i.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),e=i[r],i[r]=i[t],i[t]=e;return i},Array.prototype.left=function(t){for(var e=[],i=0;i<this.length;i++)e.push(this[i]);return e.splice(0,t)},Array.prototype.right=function(t){for(var e=[],i=0;i<this.length;i++)e.push(this[i]);return e.splice(e.length-t,t)},Array.prototype.rand=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.has=function(t){"object"!=typeof t&&(t=[t.toString()]);for(var e=0;e<t.length;e++)if(this.indexOf(t[e])>=0)return!0;return!1},Array.prototype.exclude=function(t){return this.filter(function(e){return!t.has(e)})},Array.prototype.field=function(t){var e=[];return this.forEach(function(i){void 0!==i[t]&&e.push(i[t])}),e},Array.prototype.toArrayBy=function(t){var e=[];return this.forEach(function(i){void 0!==i[t]&&e.push(i[t])}),e},Array.prototype.toObjectBy=function(t){var e={};return this.forEach(function(i){if(void 0!==i[t]){void 0===e[i[t]]&&(e[i[t]]={list:[],length:0});var r=e[i[t]];(r=$.extend(r,i))[r.length]=i,r.length++,e[i[t]].list.push(i),e[i[t]].find=function(t){var e=[];return this.list.forEach(function(i){var r=!0;for(var n in t){if(!r)break;r&=i[n]==t[n]}r&&e.push(i)}),e}}}),e},Array.prototype.mergeBy=function(t,e){var i=e.toObjectBy(t);try{this.forEach(function(e){if(null!=i[e[t]]&&null!=i[e[t]][0]){var r=i[e[t]][0];e=$.extend(e,r)}})}catch(t){}return this},Array.prototype.sort_asc_by=function(t){return this.length<1?this:void 0===this[0][t]?this:this.sort(function(e,i){return parseFloat(e[t])-parseFloat(i[t])})},Array.prototype.sort_desc_by=function(t){return this.length<1?this:void 0===this[0][t]?this:this.sort(function(e,i){return parseFloat(i[t])-parseFloat(e[t])})},Array.prototype.splice2=function(t,e=1){for(var i=[],r=0;r<this.length;r++)r>=t&&r<=t+e-1||i.push(this[r]);return i},Array.prototype.jn=function(){return this.join("\n")},Array.prototype.concat2=function(t){return this.concat(t).unique()},Array.prototype.uniqueBy=function(t){var e=[],i=[];return this.forEach(function(r){i.indexOf(r[t])>=0||(i.push(r[t]),e.push($.extend({},r)))}),e},Array.prototype.unique=function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var i=e+1;i<t.length;++i)t[e]===t[i]&&t.splice(i--,1);return t},Array.prototype.___=function(t){return _Var(t,this),this},String.prototype.remove=function(t){return this.replace(t,"")},String.prototype.format_1=function(){return this.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},String.prototype.sub_between=function(t,e){var i=this.toString();return i.indexOf(t)<0?null:(i=i.split(t)[1]).indexOf(e)<0?null:i=i.split(e)[0]},String.prototype.saveFileAs=function(t,e){var i="_earns_save_"+rand(1e3,9999);$("[id*=_earns_save_]").remove();var r=this.toString().fileExtention().toLowerCase();return r!==e.fileExtention().toLowerCase()&&(e+="."+r),$("body").append($("<a id="+i+" style='display:block'>").attr("href",this.toString()).text(e)),_("Saving FileAs ["+e+"]...","lightgray"),$("#"+i).SaveTo(t,e,5,1,1),t+"/"+e},String.prototype.appendTo=function(t){return t+=this.toString()},String.prototype.replace2=function(t){return this.replace_variables(t)},String.prototype.replace_variables=function(input){null==input.wrapper&&(input.wrapper="{}");var new_str=this;for(var v in input)switch(input.wrapper){case"{}":new_str=eval(" new_str.replace(/{"+v+"}/ig, input[v]) ");break;case"[]":new_str=eval(" new_str.replace(/\\["+v+"\\]/ig, input[v]) ");break;case"::":new_str=eval(" new_str.replace(/:"+v+":/ig, input[v]) ")}return new_str},String.prototype.ucFirst=function(){var t=this.toString();return t=t.charAt(0).toUpperCase()+t.substr(1)},String.prototype.forEach=function(t){if("function"!=typeof t)return this;for(var e=this.toString(),i=0;i<e.length;i++)t(e[i],i)},String.prototype.has=function(t){"object"!=typeof t&&(t=[t]);for(var e=0;e<t.length;e++)if(this.toString().indexOf(t[e])>=0)return!0;return!1},String.prototype.remove=function(t){var e=this;"object"!=typeof t&&(t=[t]),e=this;for(var i=0;i<t.length;i++)e=e.replace(t[i],"");return e},String.prototype.between=function(t,e){if(!this.has(t))return this;var i=this.split(t)[1];return i.has(e)?i=i.split(e)[0]:this},String.prototype.keep=function(t){if(null==t)return this;for(var e="",i=0;i<this.length;i++)t.indexOf(this[i])>=0&&(e+=this[i]);return e},String.prototype.extractEmails=function(){return this.toString().match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)},String.prototype.fileExtention=function(){var t=this.toString().split(".").pop();return t=t.split(".")[0]},String.prototype.parseExtension=function(){return this.has(".gif")?".gif":this.has(".png")?".png":this.has(".jpg")?".jpg":this.has(".mp4")?".mp4":this.has(".pdf")?".pdf":null},String.prototype.get_domain=function(){var t=this;return t.indexOf("//")>=0&&(t=t.split("//")[1]),t.indexOf("/")>0&&(t=t.split("/")[0]),t=(t=t.replace("www.","")).replace("www2.","")},String.prototype.in=function(t){return"string"==typeof t&&t.indexOf(",")>0?t.split(",").indexOf(this.toString())>=0:t.indexOf(this.toString())>=0},String.prototype.not_in=function(t){return!this.toString().in(t)},String.prototype.switch=function(t){for(var e in t)if(e==this.toString())return t[e];return null},String.prototype.switchLike=function(t){for(var e in t)if(this.toString().indexOf(e)>=0)return t[e];return null},String.prototype.sprintf=function(t){"object"!=typeof t&&(t=[t]);var e=this.toString();return t.forEach(function(t){e.indexOf("{%}")>=0?e=e.replace(/\{\%\}/,t):e.indexOf("%")>=0?e=e.replace(/\%/,t):e.indexOf("?")>=0&&(e=e.replace(/\?/,t))}),e},String.prototype.rpl=function(t){return this.sprintf(t)},String.prototype.pr=function(t,e){"object"!=typeof t&&(t=[t]);var i=this.toString();return t.forEach(function(t){void 0!==e&&(t=t._(e)),i.indexOf("?")>=0&&(i=i.replace(/\?/,t))}),i},String.prototype.addslashes=function(){return this.toString().replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')},String.prototype.stripslashes=function(){return this.replace(/\\(.)/gm,"$1")},String.prototype.spin=function(){var t=this.toString();if(null==t)return null;var e=t.match(/{[^<]+/gi);if(null===e)return t;-1!=e[0].indexOf("{")&&(e[0]=e[0].substr(e[0].indexOf("{")+1)),-1!=e[0].indexOf("}")&&(e[0]=e[0].substr(0,e[0].indexOf("}")));var i=e[0].split("|"),r=string_preg_quote(e[0]);return e_v=new RegExp("{"+r+"}","g"),(t=t.replace(e_v,i[Math.floor(Math.random()*i.length)])).spin()},String.prototype.to_json=function(){try{var o=this.toString();return eval("o = "+o+";"),o}catch(t){return this.toString()}},String.prototype.to_slug=function(){var t=this.toString().toLowerCase().trim();return t=(t=(t=(t=(t=(t=t.replace(/\t/g,"-")).replace(/\n/g,"-")).replace(/\r/g,"-")).replace(/\s/g,"-")).replace(/_/g,"-")).replace(/--/g,"-")},String.prototype._=function(t){var e=this.toString();return t.split("--").forEach(function(t){switch(t){case"slashes":e=e.replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')}}),e},String.prototype.___=function(t){return _Var(t,this.toString()),this},$$Err=[],$$=function(t="",e={}){this.tab={Select:function(t){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},First:function(){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[0],this.Update()},Last:function(){return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[this.total-1],this.Update()},Next:function(){var t=this.current<this.total-1?this.current+1:this.total-1;return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},Prev:function(){var t=this.current>0?this.current-1:0;return gBrowser.selectedTab=gBrowser.tabContainer.childNodes[t],this.Update()},CloseCurrent:function(){return gBrowser.removeCurrentTab(),this.Update()},Update:function(){return this.total=gBrowser.browsers.length,this.current=gBrowser.tabContainer.selectedIndex,this.url=window.location.href,this.currentTab=gBrowser.tabContainer.childNodes[this.current],CORE.Page_init(),this}},this.title=t,this.iim_text=[],this.err=[],this.actions=[],this.output={},this.timer=null,this.tab.Update(),this._skip_quick_check=void 0!==e.skip_quick_check&&e.skip_quick_check,this._debug=!1},$$.prototype.timerDiff=function(){return null==this.timer?null:(new Date-this.timer)/1e3},$$.prototype.section=function(t){return this.actions.push({type:"section",section:t}),this},$$.prototype.$$=function(t){return this.actions.push({type:"$$",title:t}),this},$$.prototype.____=function(t){return this.actions.push({type:"_",comment:t}),this},$$.prototype._=function(t,e){return this.actions.push({type:"_",comment:t,heading:e}),this},$$.prototype.____iim=function(t){return this.actions.push({type:"iim",comment:t}),this},$$.prototype.iim=function(t){return this.actions.push({type:"iim",comment:t}),this},$$.prototype.timerReset=function(){return this.actions.push({type:"timerReset"}),this},$$.prototype.if=function(t,e,i){return this.actions.push({type:"if",cond:t,func:e,on_fail:i}),this},$$.prototype.skip_quick_check=function(){return this.actions.push({type:"skip_quick_check"}),this},$$.prototype.f=function(t,e){return this.actions.push({type:"f",func:t,note:e}),this},$$.prototype.f1=function(t){return this.actions.push({type:"f1",func:t}),this},$$.prototype.ajaxGet=function(t,e){return this.actions.push({type:"ajaxGet",url:t,callback:e}),this},$$.prototype.ajaxGetJsonP=function(t,e){return this.actions.push({type:"ajaxGetJsonP",url:t,callback:e}),this},$$.prototype.Try=function(t,e,i=0){return this.actions.push({type:"Try",n:t,func:e,delay:i}),this},$$.prototype.Try_jFill=function(t,e,i,r=!0,n=0){return this.actions.push({type:"Try_jFill",n:t,e:e,value:i,clear_exist:r,delay:n}),this},$$.prototype.Try_eFill=function(t,e,i,r=!0,n=0){return this.actions.push({type:"Try_eFill",n:t,e:e,value:i,clear_exist:r,delay:n}),this},$$.prototype.Try_eChecked=function(t,e,i=0){return this.actions.push({type:"Try_eChecked",n:t,e:e,delay:i}),this},$$.prototype.LoadNewUrl=function(t){return this.actions.push({type:"LoadNewUrl",url:t}),this},$$.prototype.LoadUrl=function(t){return this.actions.push({type:"LoadUrl",url:t}),this},$$.prototype.TabNew=function(t=1){return this.actions.push({type:"TabNew",n:t}),this},$$.prototype.Tab=function(t){return this.actions.push({type:"Tab",i:t}),this},$$.prototype.TabFirst=function(){return this.actions.push({type:"TabFirst"}),this},$$.prototype.TabLast=function(){return this.actions.push({type:"TabLast"}),this},$$.prototype.TabNext=function(){return this.actions.push({type:"TabNext"}),this},$$.prototype.TabPrev=function(){return this.actions.push({type:"TabPrev"}),this},$$.prototype.TabFind=function(t){return this.actions.push({type:"TabFind",match:t}),this},$$.prototype.TabClose=function(){return this.actions.push({type:"TabClose"}),this},$$.prototype.TabCloseRight=function(){return this.actions.push({type:"TabCloseRight"}),this},$$.prototype.TabCloseLeft=function(){return this.actions.push({type:"TabCloseLeft"}),this},$$.prototype.UploadImage=function(t,e){return this.actions.push({type:"UploadImage",url:t,e:e}),this},$$.prototype.jChecked=function(t){return this.actions.push({type:"jChecked",e:t}),this},$$.prototype.jUnChecked=function(t){return this.actions.push({type:"jUnChecked",e:t}),this},$$.prototype.jClick=function(t){return this.actions.push({type:"jClick",e:t}),this},$$.prototype.jClickIfFound=function(t){return this.actions.push({type:"jClickIfFound",e:t}),this},$$.prototype.jClickIf=function(t,e,i){return this.actions.push({type:"jClickIf",e:t,cond:e,ifnot:i}),this},$$.prototype.jFillIf=function(t,e,i,r){return this.actions.push({type:"jFillIf",e:t,data:e,cond:i,ifnot:r}),this},$$.prototype.jClickAway=function(t){return this.actions.push({type:"jClickAway",e:t}),this},$$.prototype.iCode=function(t){return this.actions.push({type:"iCode",code:t}),this},$$.prototype.iFill=function(t,e){return this.actions.push({type:"iFill",e:t,value:e}),this},$$.prototype.jVal=function(t,e){return this.actions.push({type:"jVal",e:t,value:e}),this},$$.prototype.jFill=function(t,e){return this.actions.push({type:"jFill",e:t,value:e}),this},$$.prototype.jMouseOver=function(t){return this.actions.push({type:"jMouseOver",e:t}),this},$$.prototype.eFill=function(t,e){return this.actions.push({type:"eFill",e:t,value:e}),this},$$.prototype.eClick=function(t){return this.actions.push({type:"eClick",e:t}),this},$$.prototype.formSubmit=function(t){return this.actions.push({type:"formSubmit",e:t}),this},$$.prototype.ScrollTo=function(t,e=500,i=0){return this.actions.push({type:"ScrollTo",e:t,timeout:e,offset:i}),this},$$.prototype.ReCaptcha2=function(){return this.actions.push({type:"ReCaptcha2"}),this},$$.prototype.setIFRAME=function(t){return this.actions.push({type:"setIFRAME",e:t}),this},$$.prototype.clearIFRAME=function(){return this.actions.push({type:"clearIFRAME"}),this},$$.prototype.find$=function(t,e){return this.actions.push({type:"find$",e:t,callback:e}),this},$$.prototype.delay=function(t=1){return this.actions.push({type:"delay",timeout:t}),this},$$.prototype.pause=function(){return this.actions.push({type:"pause"}),this},$$.prototype.wait=function(t,e=3){return this.actions.push({type:"wait",e:t,timeout:e}),this},$$.prototype.waitGone=function(t,e=3){return this.actions.push({type:"waitGone",e:t,timeout:e}),this},$$.prototype.dbResetQueue=function(t){return this.actions.push({type:"dbResetQueue",db:t}),this},$$.prototype.dbQueue=function(t,e){return this.actions.push({type:"dbQueue",db:t,sql:e}),this},$$.prototype.dbQueryQueue=function(t){return this.actions.push({type:"dbQueryQueue",db:t}),this},$$.prototype.debug=function(){return this.actions.push({type:"debug"}),this},$$.prototype.go=function(){if(_(".."+this.title+"..","lightgreen"),$$Err=[],this.iim_text=[],this.output={},this.iframe=null,this.last_element=null,this.last_text=null,"wait"==this.actions.last().type&&!this._skip_quick_check){var t=$.extend({},this.actions.last());_("-- quick check ...","lightgray");var e="function"==typeof t.e?t.e():$found(t.e);if(_(e),e)return!0}this.timer=new Date,this.section=null;for(var i=0;i<this.actions.length;){e=!1;var r=!1;switch(void 0===(t=$.extend({},this.actions[i])).e&&null!==this.last_element&&(t.e=this.last_element),void 0!==t.e&&(this.last_element=t.e,r="string"==typeof t.e?null!==this.iframe?$iFrame(this.iframe,t.e):$(t.e):t.e,this._debug&&(_("---- action.e ----","lightgray"),_(r))),_("-- action "+t.type+" -- "+("string"==typeof t.e?t.e:"")+" ["+("string"==typeof t.value?t.value:"")+"]","lightgray"),t.type){case"section":this.section=t.section,_("-- section : "+this.section+" --","lightblue"),e=1;break;case"$$":this.title=t.title,e=1;break;case"_":_(t.comment),e=1;break;case"iim":var n=t.comment;"h1"==t.heading&&(n="== ? ==".pr(n)),this.iim_text.push(n);var s=[].concat(this.iim_text).reverse();iimDisplay(s.join("\n")),_(n),e=1;break;case"timerReset":this.timer=new Date,e=1;break;case"skip_quick_check":this._skip_quick_check=!0,e=1;break;case"if":"function"==typeof(g=t.cond)&&(g=g.apply(this)),g?e="function"==typeof t.func?t.func.apply(this):0:(void 0===t.on_fail&&(t.on_fail=1),e="function"==typeof t.on_fail?t.on_fail.apply(this):t.on_fail);break;case"f":e="function"==typeof t.func?t.func.apply(this):0;break;case"f1":"function"==typeof t.func&&t.func.apply(this),e=1;break;case"ajaxGet":var a=$.ajax({url:t.url,type:"get",cache:!1,async:!1,beforeSend:function(){},success:function(t){},error:function(t){}}).responseText;"function"==typeof t.callback&&t.callback.apply(this,[a]),e=1;break;case"ajaxGetJsonP":a=$.ajax({url:t.url,type:"get",cache:!1,async:!1,datatype:"jsonp",success:function(t){}}).responseText;"function"==typeof t.callback&&t.callback.apply(this,[JSON.parse(a)]),e=1;break;case"Try":for(var o=1;o<=t.n&&!(e=t.func.apply(this));o++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_jFill":if(r.length&&r.val()===t.value){e=!0;break}t.clear_exist&&r.val("");for(o=1;o<=t.n&&!(e=!1!==r?r.jFill(t.value):0);o++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_eFill":if(r.length&&r.val()===t.value){e=!0;break}t.clear_exist&&r.val("");for(o=1;o<=t.n&&!(e=!1!==r?r.eFill(t.value):0);o++)t.delay>0&&IIM.Wait(t.delay);break;case"Try_eChecked":if(r.length&&r.is(":checked")){e=!0;break}for(o=1;o<=t.n&&(_("---- Try eChecked ["+o+"] ----","lightgrey"),r.eClick(),!(e=!1!==r?r.is(":checked"):0));o++)t.delay>0&&IIM.Wait(t.delay);break;case"LoadNewUrl":e=IIM.iLoadNewUrl(t.url);break;case"LoadUrl":e=IIM.iLoadUrl(t.url);break;case"TabNew":iimPlay("CODE:TAB OPEN"),this.tab.Update(),this.tab.SelectLast(),e=!0;break;case"Tab":e=this.tab.Select(t.i>=0?t.i:this.tab.current);break;case"TabFirst":e=this.tab.First();break;case"TabLast":e=this.tab.Last();break;case"TabNext":e=this.tab.Next();break;case"TabPrev":e=this.tab.Prev();break;case"TabFind":var l=!1;if("string"==typeof t.match){this.tab.Update();for(var u=0;u<this.tab.total;u++){var c=gBrowser.tabContainer.childNodes[u];if(c.hasAttribute("label")&&c.getAttribute("label").has(t.match)){l=u;break}}}!1!==l&&(gBrowser.selectedTab=gBrowser.tabContainer.childNodes[l],this.tab.Update()),e=!1!==l;break;case"TabClose":e=iimPlay("CODE:TAB CLOSE"),this.tab.Update();break;case"TabCloseRight":for(u=this.tab.total-1;u>this.tab.current;u--)this.tab.Select(u),this.tab.CloseCurrent();e=!0;break;case"TabCloseLeft":for(u=this.tab.current-1;u>=0;u--)this.tab.Select(u),this.tab.CloseCurrent();e=!0;break;case"UploadImage":$("body").find("img._earns").remove();var h=t.url.toLowerCase(),p=$("<img src='"+t.url+"' class='earns'>").appendTo($("body")),f="__UploadImage";h.has("png")&&(f+=".png"),h.has("jpg")&&(f+=".jpg"),h.has("jpeg")&&(f+=".jpeg"),h.has("gif")&&(f+=".gif"),h.has("mp4")&&(f+=".mp4");var d=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp,y=d+f;_(y),IIM.file_delete(y),y=p.SaveTo(d,f),_("Downloading : "),IIM.Wait(3);for(u=1;u<=60&&(_("."),!IIM.file_exist(y));u++)IIM.Wait(1);IIM.file_exist(y)&&(this.output.img_path=y,e=!1!==r?r.iFill(y):0);break;case"jChecked":e=!1!==r?r.prop("checked",!0):0;break;case"jUnChecked":e=!1!==r?r.prop("checked",!1):0;break;case"jClick":e=!1!==r?r.jClick():0;break;case"jClickIfFound":$found(t.e)&&r.jClick(),e=1;break;case"jClickIf":if("function"==typeof(g=t.cond)&&(g=g.apply(this)),r=$(t.e),g)void 0!==r&&(r.ScrollTo(),r.jClick());else if("string"==typeof t.ifnot)for(;i<this.actions.length&&(i++,"section"!=this.actions[i].type||this.actions[i].section!=t.ifnot););else"function"==typeof t.ifnot&&(t.ifnot=t.ifnot.apply(this));e=1;break;case"jFillIf":var g;if("function"==typeof(g=t.cond)&&(g=g.apply(this)),r=$(t.e),g)void 0!==r&&(r.ScrollTo(),r.jFill(t.data));else if("string"==typeof t.ifnot)for(;i<this.actions.length&&(i++,"section"!=this.actions[i].type||this.actions[i].section!=t.ifnot););else"function"==typeof t.ifnot&&(t.ifnot=t.ifnot.apply(this));e=1;break;case"jClickAway":e=!1!==r?r.jClickAway():0;break;case"jVal":if(r.length&&r.val()===t.value){e=!0;break}e=isset(r)&&void 0!==t.value?r.val(t.value):0;break;case"jFill":if(r.length&&r.val()===t.value){e=!0;break}e=!1!==r&&void 0!==t.value?r.jFill(t.value):0;break;case"jMouseOver":e=!1!==r?r.jMouseOver(t.value):0;break;case"iCode":e=iimPlayCode(t.code);break;case"iFill":if(r.length&&r.val()===t.value){e=!0;break}e=!1!==r&&void 0!==t.value?r.iFill(t.value):0;break;case"eFill":if(r.length&&r.val()===t.value){e=!0;break}e=!1!==r?r.eFill(t.value):0;break;case"eClick":e=!1!==r?r.eClick():0;break;case"formSubmit":e=!1!==r?r.submit():0;break;case"ScrollTo":e=!1!==r?r.ScrollTo(t.timeout,t.offset):0;break;case"ReCaptcha2":if(!$found("iframe[src*=recaptcha]")){e=!1;break}var b=$("iframe[src*=recaptcha]");IIM.Debug().iFrame(b).EventClick($("div.recaptcha-checkbox-checkmark:visible"),60,5,1);var m=new CAPTCHA({type:"recaptcha2",api_2captcha:"6c6d2590322d8c3c9d9aac54aaa088e9"});m.Solve(),e=m._IsSolved();break;case"setIFRAME":this.iframe=r,e=null!==this.iframe&&this.iframe.length;break;case"clearIFRAME":return this.iframe=null,!0;case"find$":break;case"delay":e=iimPlayCode("WAIT SECONDS="+t.timeout);break;case"pause":IIM.Pause(),e=!0;break;case"wait":if(this._debug&&_(t.e,"red"),"function"==typeof t.e)for(;t.timeout>0&&!(e=t.e());)iimDisplay("...wait ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;else{for(;t.timeout>0&&(null===this.iframe||!$iFrame(this.iframe,t.e).length)&&(null!==this.iframe||!$(t.e).length);)this._debug&&_($(t.e)),iimDisplay("...wait ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;null!==this.iframe&&(e=$iFrame(this.iframe,t.e).length),null===this.iframe&&(e=$(t.e).length)}break;case"waitGone":if(this._debug&&_(t.e,"red"),"function"==typeof t.e)for(;t.timeout>0&&!(e=!t.e());)iimDisplay("...waitGone ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;else{for(;t.timeout>0&&(null===this.iframe||$iFrame(this.iframe,t.e).length)&&(null!==this.iframe||$(t.e).length);)this._debug&&_(!$(t.e)),iimDisplay("...waitGone ("+t.timeout+")...\n-- "+this.title+" --"),IIM.Wait(1),t.timeout--;e=!$found(t.e)}break;case"dbResetQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&t.db.reset_queue();break;case"dbQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&"function"==typeof t.sql&&(t.sql=t.sql.apply(this)),1==e&&"string"!=typeof t.sql&&(e=0),1==e&&t.db.queue(t.sql);break;case"dbQueryQueue":1==(e=1)&&"object"!=typeof t.db&&(e=0),1==e&&t.db.query_queue();break;case"debug":this._debug=!0,e=1}if(void 0===$&&void 0!==CORE2&&CORE2.Page_init(),_("======> "+e+" --","lightgray"),e&&!1!==r&&(this.last_element=null!==this.iframe?$iFrame(this.iframe,t.e):r),!e){$$Err.push("ERROR : "+this.title+" -> ("+i+") type = "+t.type);break}"debug"!=t.type&&this._debug&&(this._debug=!1),i++}return $$Err.length>0?(_("$$.."+this.title+" --\x3e FAIL..","red"),_($$Err)):_("$$.."+this.title+" --\x3e SUCCESS..","green"),$$Err.length<1},IIM={debug:!1,iframe:null,iframe_tag:"",last_code_tag:"",last_xid:null,last_comment:null,last_selector:null,last_saved_file:null,last_uploaded_url:null,last_element:null,fPath:null,fName:null,comment_:null,jQueryExtend:{jMouseOver:function(t,e,i,r){return IIM.jQueryMouseOver($(this),t,e,i,r)},jClick:function(t,e,i,r){return IIM.jQueryClick($(this),t,e,i,r)},jClickAway:function(t,e,i,r){return IIM.jQueryClickAway($(this),t,e,i,r)},jScrollTo:function(t=500,e=0){return IIM.ScrollTo($(this),t,e)},jFill:function(t,e,i,r,n){return IIM.jQueryFill($(this),t,e,i,r,n)},eMouseOver:function(t,e,i,r){return IIM.EventMouseOver($(this),t,e,i,r)},eClick:function(t,e,i,r){return IIM.EventClick($(this),t,e,i,r)},eFill:function(t,e,i,r,n){return IIM.EventFill($(this),t,e,i,r,n)},enable:function(){$(this).prop("disabled",!1)},disable:function(){$(this).prop("disabled",!0)},iClick:function(t,e,i,r){var n=RAND.String(5);return $(this).attr("iClick",n),IIM.TagClick({type:"*",attr:"iClick:"+n},t,e,i,r)},iFill:function(t,e,i,r,n){var s=RAND.String(5);return $(this).attr("iFill",s),IIM.Debug().TagFill({type:"*",form:"ACTION:*",attr:"iFill:"+s},t,e,i,r,n)},sendkeys:function(t){return t=t.replace(/([^{])\n/g,"$1"),this.each(function(){bililiteRange(this).bounds("selection").sendkeys(t).select(),this.focus()})},SaveTo:function(t,e=null,i,r,n,s){return null!=t&&null!=t||(t=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp),IIM.jQueryDownload($(this),t,e,i,r,n,s),IIM.Get_LastSavedFile()},ScrollTo:function(t=500,e=0){return IIM.ScrollTo($(this),t,e),this},$:function(t){return"IFRAME"==this[0].tagName?this.contents().find(t):$(t)},show:function(){return _($(this)),this}},file_delete:function(t){var e=iimPlayCode('FILEDELETE NAME="'+t+'"');return 1==e&&_("WARNING: File '"+t+"' is deleted !","lightsalmon"),1==e},file_exist:function(t){return 1==iimPlayCode('SET !FOLDER_DATASOURCE "'+t+'"')},comment:function(t){return this.comment_=null==t.comment?t:t.comment,this},Wait:function(t,e=null){if(!(t<=0)){var i="CODE: ";return i+=null!=e?"SET !TIMEOUT_PAGE "+e+jsLF:"",i+="WAIT SECONDS="+t+jsLF,this.debug&&_(i),iimPlay(i),this.Debug(!1),CORE.Page_init(),this}},Pause:function(){var t="CODE: ";t+="PAUSE"+jsLF,iimPlay(t),CORE.Page_init()},iLoadUrl:function(t,e=30,i=.1,r){var n="URL GOTO="+t+jsLF;return IIM._TagPlay({code_tag:n,tPage:e,tWait:i,callback:r})},iLoadNewUrl:function(t,e=30,i=.1,r){return window.location.href==t?this:IIM.iLoadUrl(t,e,i,r)},iLoadBlank:function(t=30,e=.1,i){var r="CODE: \n";return r+="SET !TIMEOUT_PAGE "+t+" \n",r+="URL GOTO=http://lib.mixseo.net/blank.php \n",r+="WAIT SECONDS="+e+" \n",iimPlay(r),this},TagWait:function(t,e=30,i=30,r=.1,n){return"string"==typeof t?t+=" EXTRACT=TXT":t.extract="TXT",IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:r,isTagWait:!0,callback:n})},TagMouseOver:function(t,e=30,i=5,r=.1,n){return"string"==typeof t?t+=" CONTENT=EVENT:MOUSEOVER":t.content="EVENT:MOUSEOVER",IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:r,callback:n})},TagClick:function(t,e=30,i=5,r=.1,n){return IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:r,callback:n})},TagClickAway:function(t,e=30,i=5,r=.1,n){return IIM._TagPlay({code_tag:t,tPage:e,tTag:i,tWait:r,callback:n,click_away:!0})},TagFill:function(t,e,i=30,r=5,n=.1,s){return"string"==typeof t?t+=' CONTENT="'+e+'"':t.content=e,IIM._TagPlay({code_tag:t,tPage:i,tTag:r,tWait:n,callback:s})},TagDownload:function(t,e,i,r=30,n=5,s=.1,a){this.fPath=null==e?APP.tmpDir?APP.tmpDir:AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var o='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF;return"string"==typeof t?t+=" CONTENT=EVENT:SAVETARGETAS":t.content="EVENT:SAVETARGETAS",IIM._TagPlay({pre_code:o,code_tag:t,tPage:r,tTag:n,tWait:s,callback:a})},TagScreenshot:function(t,e,i,r=30,n=5,s=.1,a){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var o='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF;return"string"==typeof t?t+=" CONTENT=EVENT:SAVE_ELEMENT_SCREENSHOT":t.content="EVENT:SAVE_ELEMENT_SCREENSHOT",IIM._TagPlay({pre_code:o,code_tag:t,tPage:r,tTag:n,tWait:s,callback:a})},jQueryMouseOver:function(t,e=30,i=5,r=.1,n){var s={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:MOUSEOVER"};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:r,callback:n})},jQueryClick:function(t,e=30,i=5,r=.1,n){IIM.jQueryMouseOver(t,30,1,.1);var s={type:"*",attr:"XID:"+IIM._XID(t)};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:r,callback:n})},jQueryClickAway:function(t,e=30,i=5,r=.1,n){var s={type:"*",attr:"XID:"+IIM._XID(t)};return IIM._TagPlay({e:t,code_tag:s,tPage:e,tTag:i,tWait:r,callback:n,click_away:!0})},jQueryFill:function(t,e,i=30,r=5,n=.1,s){var a={type:"*",attr:"XID:"+IIM._XID(t)};return a.content=e,IIM._TagPlay({e:t,code_tag:a,tPage:i,tTag:r,tWait:n,callback:s})},jQueryDownload:function(t,e,i,r=30,n=5,s=.1,a){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var o='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF,l={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:SAVETARGETAS"};return IIM._TagPlay({e:t,pre_code:o,code_tag:l,tPage:r,tTag:n,tWait:s,callback:a})},jQueryScreenshot:function(t,e,i,r=30,n=5,s=.1,a){this.fPath=null==e?AutoIt.iimTmp:e,this.fName=null==i?RAND.String(10):i,this.Get_LastSavedFile();var o='ONDOWNLOAD FOLDER="'+this.fPath+'" FILE="'+this.fName+'" WAIT=YES'+jsLF,l={type:"*",attr:"XID:"+IIM._XID(t),content:"EVENT:SAVE_ELEMENT_SCREENSHOT"};return IIM.ScrollTo(t,100),IIM.Wait(.2),IIM._TagPlay({e:t,pre_code:o,code_tag:l,tPage:r,tTag:n,tWait:s,callback:a})},jQueryWait:function(t,e=30,i=30,r=.1,n,s=null){if($("body").attr("jQueryWait-found","0"),"object"==typeof t&&(t=t.selector),$found(t,s))return!0;null!=this.comment_&&(iimDisplay("jQueryWait ("+i+") : "+this.comment_),this.comment_=null),_("jQueryWait : "+t);var a=window.setInterval(function(){if(CORE.Page_init(),window.document.getElementsByTagName("body").setAttribute("jQueryWait-FOUND","0"),$found(t,s))return window.document.getElementsByTagName("body").setAttribute("jQueryWait-FOUND","1"),window.clearInterval(a),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait-FOUND:1"},e,i,r),window.clearInterval(a),1==$("body").attr("jQueryWait-FOUND")},jWait:function(t,e=20,i){for(var r=0;r<3&&!IIM.jQueryWait(t,30,e,.1,i);r++);return IIM.jQueryWait(t,30,e,.1,i)},jWaitIframe:function(t,e,i=20,r){for(var n=0;n<3&&!IIM.jQueryWait(e,30,i,.1,r,t);n++);return IIM.jQueryWait(e,30,i,.1,r,t)},jWaitDisappear:function(t,e=20,i){return IIM.jQueryWaitDisappear(t,30,e,.1,i)},jQueryWaitDisappear:function(t,e=30,i=30,r=.1,n){if($("body").attr("jQueryWaitDisappear-found","0"),"object"==typeof t&&(t=t.selector),$(t).length<1)return!0;var s=window.setInterval(function(){if(_(t+" : "+$(t).length),$(t).length<1)return $("body").attr("jQueryWaitDisappear-found","1"),window.clearInterval(s),this;_(".")},1e3);return IIM.TagWait({type:"BODY",attr:"jQueryWaitDisappear-FOUND:1"},e,i,r),window.clearInterval(s),1==$("body").attr("jQueryWaitDisappear-FOUND")},jQueryWait_is:function(t,e,i=30,r=30,n=.1,s){var a=IIM._XID(t),o=t.selector+"[xid="+a+"]",l=function(t,e){var i=!1;switch(t){case":appear":i=$(e).length;break;case":disappear":i=$(e).length<1;break;default:i=$(e).is(t)}return i};if(l(e,o))return!0;$("body").attr("jQueryWait_is-found","0");var u=window.setInterval(function(){if(l(e,o))return $("body").attr("jQueryWait_is-found","1"),window.clearInterval(u),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait_is-FOUND:1"},i,r,n),window.clearInterval(u),1==$("body").attr("jQueryWait_is-FOUND")},jQueryWait_css:function(t,e,i=30,r=30,n=.1,s){var a=IIM._XID(t),o=t.selector+"[xid="+a+"]",l=function(t,e){var i=!0;for(var r in t)r.toLowerCase().indexOf("color")>=0?i&=colorRGB($(e).css(r))==colorRGB(t[r]):i&=$(e).css(r)==t[r];return i};if(l(e,o))return!0;$("body").attr("jQueryWait_css-found","0");var u=window.setInterval(function(){if(l(e,o))return $("body").attr("jQueryWait_css-found","1"),window.clearInterval(u),this;_(".")},500);return IIM.TagWait({type:"BODY",attr:"jQueryWait_css-FOUND:1"},i,r,n),window.clearInterval(u),1==$("body").attr("jQueryWait_is-FOUND")},EventInsert:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,45,e)},EventPageUp:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,33,e)},EventPageDown:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,34,e)},EventDelete:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,46,e)},EventHome:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,36,e)},EventEnd:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,35,e)},EventSpace:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,32,e)},EventTab:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,9,e)},EventESC:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,27,e)},EventEnter:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,13,e)},EventBackspace:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,8,e)},EventArrowRight:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,39,e)},EventArrowLeft:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,37,e)},EventArrowUp:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,38,e)},EventArrowDown:function(t,e=1,i=30,r=5,n=.1,s){return IIM._EventKeypress(t,40,e)},EventMouseOver:function(t,e=30,i=5,r=.1,n){var s=IIM._XID(t);"object"==typeof t&&(t="[xid="+s+"]");var a="TAG POS=1 TYPE=* ATTR=XID:{xid} CONTENT=EVENT:MOUSEOVER"+jsLF;return a=a.replace(/{xid}/g,s),IIM._TagPlay({e:$(t),code_tag:a,tPage:e,tTag:i,tWait:r,callback:n})},EventMouseDown:function(t,e=30,i=5,r=.1,n){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var s='EVENT TYPE=MOUSEDOWN SELECTOR="{selector}" BUTTON=0'+jsLF;return s=s.replace(/{selector}/g,t),IIM._TagPlay({e:$(t),code_tag:s,tPage:e,tTag:i,tWait:r,callback:n})},EventClick:function(t,e=30,i=5,r=.1,n){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var s='EVENT TYPE=CLICK SELECTOR="{selector}" BUTTON=0'+jsLF;return s=s.replace(/{selector}/g,t),IIM._TagPlay({e:$(t),code_tag:s,tPage:e,tTag:i,tWait:r,callback:n})},EventFill:function(t,e,i=30,r=5,n=.1,s){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");var a='EVENTS TYPE=KEYPRESS SELECTOR="{selector}" CHARS="{value}"'+jsLF;return a=(a=a.replace(/{selector}/g,t)).replace(/{value}/g,AddSlashes(e)),IIM._TagPlay({e:$(t),code_tag:a,tPage:i,tTag:r,tWait:n,callback:s})},EventSelectByText:function(t,e,i=30,r=5,n=.1,s){return IIM.EventClick(t.find("option").filter(function(){return $.trim($(this).text())==e}),i,r,n,s)},EventKeypress___:function(t,e,i=null,r=30,n=5,s=.1,a){if("string"==typeof e)var o='EVENT TYPE=KEYPRESS SELECTOR="{selector}" KEY="{value}"';else o='EVENT TYPE=KEYPRESS SELECTOR="{selector}" CHAR="{value}"';return null!=i&&(o+=' MODIFIERS="{modifier}"'),o=(o=(o=o.replace(/{selector}/g,t)).replace(/{value}/g,e)).replace("{modifier}",i),o+=jsLF,IIM._TagPlay({code_tag:o,tPage:r,tTag:n,tWait:s,callback:a})},ScrollTo:function(t,e=500,i=0){return $("html, body").animate({scrollTop:null==t.offset()?$("body").height():t.offset().top+i},e),this},DownloadFile:function(t,e=30,i=5,r=.1,n){if(!$("body").length)return Err("No body element found !");if(null==t.url)return Err("No url found !");if(null==t.fName)return Err("No fName found !");null==t.fPath&&(t.fPath=APP.tmpDir?APP.tmpDir:AutoIt.iimTmp);var s=t.fName.split(".").last(),a="IIM_DownloadFile_"+Rand();switch(this.last_saved_file=null,s){case"mp4xxxx":(o=$("[xid="+a+"]")).length||(o=$("<video>",{xid:a}),$("body").append(o)),o.attr("src",t.url);break;default:var o;(o=$("img[xid="+a+"]")).length||(o=$("<img>",{xid:a}),$("body").append(o)),o.attr("src",t.url)}return this.Debug().TagDownload({type:"*",attr:"XID:"+a},t.fPath,t.fName),this},PrntSc_Upload:function(t,e){var i=null;if(null==t.local_image)return Err("No local image found !");if(null==t.get_image_url&&(t.get_image_url=!0),FF.Save1().Add_Tab(!0).Url("https://prnt.sc/"),IIM.TagWait({type:"DIV",attr:"TXT:Browse<SP>images"},60,5,1)){if(IIM.jQueryFill($("input[type=file]:eq(0)"),t.local_image,60,5,1),!IIM.TagWait({type:"DIV",attr:"CLASS:*uploader-result*&&TXT:*Success!*&&STYLE:*block*"},60,120,1))return Err("Can not upload ! Some error from prnt.sc !");var r=$("a#link-textbox").text();if(t.get_image_url){if(IIM.iLoadUrl(r,10,1),!IIM.jQueryWait($("img#screenshot-image"),60,120,1))return Err("Can not get uploaded_url !");i=$("#screenshot-image").attr("src")}else i=r}return this.last_uploaded_url=i,FF.Close_Tab().Return1(),i},Get_LastSavedFile:function(){return this.fPath.indexOf("/")>=0&&this.fPath.indexOf("\\")<0?"/"==this.fPath.substr(-1)?this.last_saved_file=this.fPath+this.fName:this.last_saved_file=this.fPath+"/"+this.fName:"\\"==this.fPath.substr(-1)?this.last_saved_file=this.fPath+this.fName:this.last_saved_file=this.fPath+"\\"+this.fName,this.last_saved_file},iFrame:function(t){if(this.iframe=t,null==t)this.iframe_tag="";else{var e="iframe_"+RAND.String();null!=t&&null!=t&&null!=t.html()&&null!=t.attr("name")&&t.attr("name").length>0&&(e=t.attr("name")),t.attr("name",e),this.iframe_tag="FRAME NAME="+e+jsLF}return this},Debug:function(t=!0){return this.debug=t,this},Selector:function(t){return null==t?this.last_selector:("object"==typeof t&&(t="[xid="+IIM._XID(t)+"]"),this.last_selector=t,this)},_EventKeypress:function(t,e,i=1,r=30,n=5,s=.1,a){"object"==typeof t&&(t="[xid="+IIM._XID(t)+"]");for(var o="",l=0;l<i;l++)o+='EVENT TYPE=KEYPRESS SELECTOR="{selector}" KEY={key}'+jsLF;return o=(o=o.replace(/{selector}/g,t)).replace(/{key}/g,e),IIM._TagPlay({code_tag:o,tPage:r,tTag:n,tWait:s,callback:a})},_TagPlay:function(t){try{t.callback?t.callback:callback=function(){},this.last_code_tag=t.code_tag,this.debug&&_("this.last_code_tag : "+this.last_code_tag),t.code_tag=IIM._TagFormat(t.code_tag),this.last_element=t.e;var e=IIM._Head();return e+=t.tPage>0?"SET !TIMEOUT_PAGE "+t.tPage+jsLF:"",e+=t.tTag>0?"SET !TIMEOUT_TAG "+t.tTag+jsLF:"",e+=this.iframe_tag,null!=t.pre_code&&(e+="'----Pre----"+jsLF,e+=t.pre_code+jsLF),e+="'----Code----"+jsLF,e+=t.code_tag+jsLF,t.click_away||(e+="'----NO Click Away----"+jsLF,e+="TAB T=1"+jsLF),this.debug&&_(t.e),this.debug&&_(e),iimPlay(e),null!=this.last_comment&&this._(this.last_comment+" END !"),CORE.Page_init(),this.iFrame(null),this._(null),this.Debug(!1),t.isTagWait?"#EANF#"!=iimGetLastExtract(0)&&(t.tWait>0&&IIM.Wait(t.tWait),"function"==typeof t.callback&&t.callback(),!0):(t.tWait>0&&IIM.Wait(t.tWait),"function"==typeof t.callback&&t.callback(),this)}catch(t){return this._(this.last_comment+" FAIL !"),this._(null),this.Debug(!1),this}},_TagFormat:function(t){if((null==t||null==t)&&null!=this.last_code_tag)return this.last_code_tag;if("string"==typeof t)return t;if("object"==typeof t){var e=Object_To_Array(t);e.unshift({pos:1}),t=Array_To_Object(e);var i=[];for(var r in t){var n=t[r].toString();null!=n&&(n=(n=n.replace(/\s/gi,"<SP>")).replace(/\n/gi,"<BR>")),r=r.toUpperCase(),i.push(r+"="+n)}return t="TAG "+i.join(" ")}},_Head0:function(){return"CODE: ","CODE: "},_Head:function(){var t=IIM._Head0();return t+="ONDIALOG POS=1 BUTTON=OK CONTENT="+jsLF,t+="SET !ENCRYPTION NO"+jsLF,t+="SET !REPLAYSPEED FAST"+jsLF,t+="SET !ERRORIGNORE YES"+jsLF,t+="SET !EXTRACT_TEST_POPUP NO"+jsLF,t+="SET !TIMEOUT_STEP 1"+jsLF,t+="SET !TIMEOUT_PAGE 10"+jsLF},_XID:function(t){var e=RAND.String(32);return this.last_xid=e,null!=this.iframe&&("object"==typeof t?t=$iFrame(this.iframe,t.selector):"string"==typeof t&&(t=$iFrame(this.iframe,t))),t.attr("xid",e),e},_:function(t,e=null){return this.last_comment=t,null!=t&&_(t,e),this}},DB3=function(t){this.is_debug=1,this.sqls=[],this.ret={rows:[],rowsBy:{}},this.url=null!=t.url?t.url:null,this.setting=$.extend({dbname:null,user:null,pass:null,server:"localhost"},t)},DB3.prototype.reset_queue=function(){return this.sqls=[],this},DB3.prototype.queue=function(t){return null==t||null==t?this:(this.sqls.push(t),this)},DB3.prototype.query_queue=function(){if(!(this.sqls.length<1))return this.Query(this.sqls.join(";")),_(`DB3.query_queue processed (${this.sqls.length} queries) !`,"lightblue"),this},DB3.prototype.Query=function(t){var e=this;if(null==t)return this;if(this.sql=null,"string"==typeof t&&(this.sql=t),is_array(t)&&t.length>0&&(this.sql=t.join(";")),isset(t.sql)&&(this.sql=null!=t.sql?t.sql:null),null==this.sql)return null;this.last_sql=this.sql;var i=this._jSQL(this.sql);if(this.ret=i,isset(t.id)&&i.found){for(var r in this.ret.fields=Object.keys(i.rows[0]),t)"function"==typeof t[r]&&(r.in("UpdateSQL,Update")||i.rows.forEach(function(e){e[r]=t[r]}));i.rows.forEach(function(i){i._db={table:t.table,id:t.id},i.UpdateSQL=function(i){return"UPDATE `"+t.table+"` SET "+e.SqlSet(i)+" WHERE `"+t.id+"`='"+this[t.id]+"' LIMIT 1 "},i.Update=function(i){return _(this.UpdateSQL(i),"lightgray"),e.Query(this.UpdateSQL(i)).ret.success?($.extend(this,i),_("--- row.Update (#"+this[t.id]+") : "+JSON.stringify(i)+" ","lightgrey")):(_("--- ERR: Row.Update","red"),_(e.ret)),this}}),this.rows=i.rows}return this},DB3.prototype.firstRow=function(){return this.ret.found?this.ret.rows[0]:null},DB3.prototype.showReturn=function(t=1){return 0==t?this:(_(this.sql,"lightgray"),_(this.ret),this)},DB3.prototype.jsonFields=function(fields){if(void 0===this.rows||this.rows.length<1)return this;if(null===fields)return this;var rows=this.rows,tFields=[fields];return"string"==typeof fields&&fields.indexOf(",")>0&&(tFields=fields.split(",")),is_array(fields)&&(tFields=fields),tFields.forEach(function(field){for(var i=0;i<rows.length;i++){var row=rows[i];void 0===row[field]&&(row[field]={}),null===row[field]&&(row[field]={}),"object"!=typeof row[field]&&("string"==typeof row[field]&&eval("row['"+field+"'] = "+row[field]))}}),this},DB3.prototype.formatRows=function(t){if(void 0===this.rows||this.rows.length<1)return this;if("function"!=typeof t)return this;for(var e=0;e<this.rows.length;e++)t(this.rows[e]);return this._rowsBy(this.ret.fields,this.rows),this},DB3.prototype._rowsBy=function(t,e){var i={};return t.forEach(function(t){void 0===i[t]&&(i[t]={})}),t.forEach(function(t){e.forEach(function(e,r){void 0===i[t][e[t]]&&(i[t][e[t]]=$.extend({_n_:-1},e)),i[t][e[t]]._n_++;var n=i[t][e[t]]._n_;i[t][e[t]][n]=e})}),this.ret.rowsBy=i,this},DB3.prototype._jSQL=function(t){var e=this.url+"?";e+="d="+encodeURIComponent(this.setting.dbname)+"&",e+="u="+encodeURIComponent(this.setting.user)+"&",e+="p="+encodeURIComponent(this.setting.pass)+"&",e+="s="+encodeURIComponent(this.setting.server)+"&",e+="_="+RAND.Between(1e4,99999);try{var i=$.ajax({url:e,type:"post",cache:!1,async:!1,data:{sql:encodeURIComponent(t)},dataType:"json",beforeSend:function(){},success:function(t){},error:function(t){},timeout:2e3}).responseJSON;return i.success=null!=i&&i.status,i.found=i.success&&void 0!==i.rows&&i.rows.length>0,i}catch(t){return t}},DB3.prototype.SqlSet=function(t,e=",",i=null){var r=[];if(i=null==i?"":"`"+i+"`.",e=e.toUpperCase(),$.each(t,function(t,n){if("function"==typeof n&&(n=n()),"array"==typeof n&&(n="<IN> ('"+n.join("','")+"')"),null==n)return["AND","OR"].has(e)&&r.push(i+"`"+t+"` IS NULL"),void(["AND","OR"].has(e)||r.push(i+"`"+t+"`=NULL"));var s=n.toString().trim().toUpperCase();if(0!=s.indexOf("!=")&&0!=s.indexOf("<>"))if(0!=s.indexOf("<+>"))if(0!=s.indexOf("<DATE_ADD>"))if(0!=s.indexOf("<NOW_ADD>"))if(0!=s.indexOf("<->"))if(0!=s.indexOf("<LIKE>"))if(0!=s.indexOf("<IN>"))if(0!=s.indexOf("<IS>"))if(0!=s.indexOf("NOW()"))if(0!=s.indexOf("<FUNC>"))if(0!=s.indexOf("<RAW>"))if(s.indexOf(" AGO>")>0){var a=n.split("AGO >")[0].replace("<","").trim().split(" ")[0],o=n.split(" AGO>")[1].trim();r.push("TIMESTAMPDIFF("+a+", "+i+"`"+t+"`, NOW()) "+o)}else if(0!=s.indexOf(":>"))if(0!=s.indexOf(":<"))switch(typeof n){case"object":l=(l=JSON.stringify(n)).length>0?l.replace(/\'/g,"\\'"):"",r.push(i+"`"+t+"`='"+l+"'");break;case"number":r.push(i+"`"+t+"`='"+n+"'");break;default:r.push(i+"`"+t+"`='"+n.replace(/\'/g,"\\'")+"'")}else{l=n.replace(":<","<").trim();r.push(i+"`"+t+"`"+l)}else{var l=n.replace(":>",">").trim();r.push(i+"`"+t+"`"+l)}else r.push(i+"`"+t+"`="+n.replace("<RAW>",""));else r.push(n.replace("<FUNC>","").trim());else r.push(i+"`"+t+"` = NOW() ");else r.push(i+"`"+t+"` "+n.replace("<IS>","IS "));else r.push(i+"`"+t+"` "+n.replace("<IN>","IN "));else r.push(i+"`"+t+"` "+n.replace("<LIKE>","LIKE "));else{var l=n.replace("<->","").trim();r.push(i+"`"+t+"` = IF(`"+t+"` IS NULL, "+l+", `"+t+"` - "+l+")")}else{u=n.replace("<NOW_ADD>","").trim();r.push(i+"`"+t+"` = DATE_ADD(NOW(), INTERVAL "+u+")")}else{var u=n.replace("<DATE_ADD>","").trim();r.push(i+"`"+t+"` = DATE_ADD(`"+t+"`, INTERVAL "+u+")")}else{var l=n.replace("<+>","").trim();r.push(i+"`"+t+"` = IFNULL(`"+t+"` + "+l+", "+l+")")}else r.push(i+"`"+t+"` "+n)}),","!=e)for(var n=0;n<r.length;n++)r[n]="("+r[n]+")";return r.join(e)},DBTable=function(t,e,i){this.table=t,this.update_table=void 0===i?t:i,this.index="id",this.db=e,this.field={},this.last_sql=null,this.column=null,this.rows=null,this.row=null,this.last_insert_id=null,this.total_affected_rows=null,this.unique_field=null,this.unique_function=null,this.row_functions=[],this.rows_functions=[],this.rows_filtered=[],this.row_filtered=null,this._default_fields=null,this.load_preset_format()},DBTable.prototype.load_preset_format=function(){this.db.url;var t=this.db.url.split("/")[2],e=(this.db.setting.server,[t,this.db.setting.dbname,this.table].join("|"));switch(e){case"lib.mixseo.net|gosme_project_SOCIAL":this.defineUnique("unique",function(t){return MD5([t.worker_task,t.meta_key].join("|"))});break;case"192.168.100.6|vli|_meta_contact":this.defineUnique("unique",function(t){return MD5([t.contact,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|_meta_network":this.defineUnique("unique",function(t){return MD5([t.network,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|_meta_site":this.defineUnique("unique",function(t){return MD5([t.site,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|vli|contact":this.defineUnique("unique",function(t){return MD5([t.email,t.fb_user,t.fb_page,t.twitter_user].join(","))});break;case"192.168.100.6|vli|site":this.indexField("domain");break;case"192.168.100.6|livescore|_meta_country":this.defineUnique("unique",function(t){return MD5([t.country,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_event":this.defineUnique("unique",function(t){return MD5([t.event,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_game":this.defineUnique("unique",function(t){return MD5([t.game,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_group":this.defineUnique("unique",function(t){return MD5([t.group,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_league":this.defineUnique("unique",function(t){return MD5([t.league,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_person":this.defineUnique("unique",function(t){return MD5([t.person,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_round":this.defineUnique("unique",function(t){return MD5([t.round,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_season":this.defineUnique("unique",function(t){return MD5([t.season,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|livescore|_meta_team":this.defineUnique("unique",function(t){return MD5([t.team,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|game|games":this.defineUnique("unique",function(t){return MD5([t.slug,t.source].join(","))}),this.rowsFormat(function(t){this.game=t.toObjectBy("id")}),this.rowFormat(function(t){t.html_desc=t.desc.replace(/\\n/gi,"<br>"),t.html_in_cat=`<div class="wsite-image wsite-image-border-none" style="padding-top:10px;padding-bottom:10px;margin-left:0px;margin-right:0px;text-align:center">\n                    <a href="${t.href}">\n                        <img style="width:auto;max-width:100%" alt="${t.title}" src="${t.cover}">\n                        <div style="display:block;font-size:90%;padding-top:10px;">${t.title}</div>\n                    </a>\n                </div>`});break;case"192.168.100.6|game|gamemeta":this.defineUnique("unique",function(t){return MD5([t.game,t.meta_group,t.meta_key].join(","))}),this.rowsFormat(function(t){this.game=t.toObjectBy("game"),this.meta_group=t.toObjectBy("meta_group"),this.meta_key=t.toObjectBy("meta_key")}),this.rowFormat(function(t){"_game_type"==t.meta_key&&(t.meta_value=t.meta_value.to_json()),"_game_technology"==t.meta_key&&(t.meta_value=t.meta_value.to_json()),"_tag"==t.meta_group&&(t.slug=`${t.meta_key}-tag`,t.href=`/${t.slug}.html`,t.html_link=`<a href='${t.href}' title='${t.meta_value}'>${t.meta_value}</a>`),"_category"==t.meta_group&&(t.slug=`${t.meta_key}-cat`,t.href=`/${t.slug}.html`,t.html_link=`<a href='${t.href}' title='${t.meta_value}'>${t.meta_value}</a>`)});break;case"192.168.100.6|game|pagemeta":this.defineUnique("unique",function(t){return MD5([t.page,t.meta_group,t.meta_key].join(","))});break;case"192.168.100.6|game|sitemeta":this.defineUnique("unique",function(t){return MD5([t.site,t.meta_group,t.meta_key].join(","))}),this.rowsFormat(function(t){this.get_value=function(e,i){var r=null;return t.forEach(function(t){null==r&&t.meta_group==e&&t.meta_key==t.meta_key&&(r=t.meta_value)}),r},this.get_values=function(e){var i=[];return t.forEach(function(t){null==value&&t.meta_group==e&&i.push(t.meta_value)}),i}});break;case"192.168.100.6|game|page":this.defineUnique("unique",function(t){return MD5([t.site,t.slug].join(","))}),this.rowsFormat(function(t){this.games_id=t.toArrayBy("game")}),this.rowFormat(function(t){t.html_link=`<a href='${t.publish_url}' title='${t.title.addslashes()}'>${t.title}</a>`});break;case"192.168.100.6|game|_resource":this.rowsFormat(function(t){this.title=t.toObjectBy("title")})}_("load_preset_format match = "+e,"lightgray")},DBTable.prototype.indexField=function(t){return this.index=t,this},DBTable.prototype.set_default_fields=function(t){return this._default_fields=$.extend({},t),this},DBTable.prototype.assignRowsTo=function(t){return void 0===t&&(t={}),t=$.extend({},this.rows),this},DBTable.prototype.filter=function(t){var e=this;return this.rows_filtered=[],this.rows.forEach(function(i,r){var n=!0;for(var s in t)is_array(t[s])?n&=t[s].indexOf(i[s])>=0:n&=i[s]==t[s];n&&e.rows_filtered.push(i)}),this.row_filtered=!!this.rows_filtered.length&&this.rows_filtered[0],this.rows_filtered},DBTable.prototype.filter1st=function(t,e){if("object"==typeof t)return this.filter(t)[0];var i={};return i[t]=e,this.filter(i)[0]},DBTable.prototype.query=function(t){return t=t.length?t.join(";"):t,this.db.Query(t),!!this.db.ret.success&&(this.total_affected_rows=this.db.ret.rowCount,this.last_insert_id)},DBTable.prototype.rowsFormat=function(t){return this.rows_functions.push(t),this},DBTable.prototype.rowFormat=function(t){return this.row_functions.push(t),this},DBTable.prototype._formatRows=function(t){if(null==t)return null;var e=this;if(e.rows_functions.length)for(var i=0;i<e.rows_functions.length;i++)e.rows_functions[i].apply(e,[t]);var r=[];return t.forEach(function(t){var i=$.extend({},t);if(e.row_functions.length)for(var n=0;n<e.row_functions.length;n++)e.row_functions[n].apply(e,[i]);i.db=e.db,i.UpdateSQL=function(t){return"UPDATE `"+e.update_table+"` SET "+DB._SqlSet(t)+" WHERE `"+e.index+"`='"+this[e.index]+"' LIMIT 1 "},i.Update=function(t){var i=this.UpdateSQL(t);return _(i,"lightgray"),e.db.Query(i).ret.success?_("--- row.Update (#"+this[e.index]+") : "+JSON.stringify(t)+" ","lightgreen"):(_("--- ERR: Row.Update","red"),_(e.db.ret)),this},r.push(i)}),r},DBTable.prototype.selectColumn=function(t,e,i,r){var n=this;return this.db.Query(this.sql_selectColumn(t,e,i,r)),!!this.db.ret&&(this.rows=this._formatRows(this.db.ret.rows),this.row=this.rows[0],this.column={},this.column[t]=[],this.rows.forEach(function(e){n.column[t].push(e[t])}),this.rows)},DBTable.prototype.selectRows=function(t,e,i,r){return this.db.Query(this.sql_selectRows(t,e,i,r)),!!this.db.ret&&(this.rows=this._formatRows(this.db.ret.rows),this.row=null==this.rows?null:this.rows[0],this.rows)},DBTable.prototype.selectFirstRow=function(t,e){var i=this.selectRows(t,1,e);return!!i.length&&i[0]},DBTable.prototype.insertRows=function(t){},DBTable.prototype.insertRow=function(t){return this.db.Query(this.sql_insertRow(t)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.insertIgnoreRow=function(t){return this.db.Query(this.sql_insertIgnoreRow(t)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.insertUpdateRow=function(t,e){return this.db.Query(this.sql_insertUpdateRow(t,e)),!!this.db.ret.success&&(this.last_insert_id=this.db.ret.lastid,this.total_affected_rows=this.db.ret.rowCount,null!==this.row&&this.selectFirstRow({id:this.last_insert_id>0?this.last_insert_id:this.row[this.index]}),_("--- inserted : "+this.last_insert_id,"lightblue"),this.last_insert_id)},DBTable.prototype.update=function(t,e,i,r){return this.updateRow(t,e,i,r)},DBTable.prototype.updateRow=function(t,e,i,r){return this.db.Query(this.sql_updateRow(t,e,i,r)),!!this.db.ret.success&&($.extend(this.row,t),this.total_affected_rows=this.db.ret.rowCount,_("--- updated row : "+JSON.stringify(t),"lightblue"),!0)},DBTable.prototype.show_sql_selectColumn=function(t,e,i,r){return this.sql_selectColumn(t,e,i,r).___("DBTable.sql_selectColumn"),this},DBTable.prototype.show_sql_selectRows=function(t,e,i,r,n){return this.sql_selectRows(t,e,i,r,n).___("DBTable.show_sql_selectRows"),this},DBTable.prototype.show_sql_insertRow=function(t){return this.sql_insertRow(t).___("DBTable.show_sql_insertRow"),this},DBTable.prototype.show_sql_insertIgnoreRow=function(t){return this.sql_insertIgnoreRow(t).___("DBTable.show_sql_insertIgnoreRow"),this},DBTable.prototype.show_sql_updateRow=function(t){return this.sql_updateRow(t).___("DBTable.show_sql_updateRow"),this},DBTable.prototype.sql_selectColumn=function(t,e,i,r){return this.last_sql="SELECT `"+t+"`, NOW() as now_ FROM `"+this.table+"` ",null!=e&&Object.keys(e).length&&(this.last_sql+=" WHERE "+DB._SqlSet(e,"AND")),null!=r&&(this.last_sql+=" ORDER BY "+r),null!=i&&(this.last_sql+=" LIMIT "+i),this.last_sql},DBTable.prototype.sql_selectRows=function(t,e,i,r){return this.last_sql="SELECT *, NOW() as now_ FROM `"+this.table+"` ",null!=t&&Object.keys(t).length&&(this.last_sql+=" WHERE "+DB._SqlSet(t,"AND")),null!=i&&(this.last_sql+=" ORDER BY "+i),null!=r&&(this.last_sql+=" GROUP BY "+r),null!=e&&(this.last_sql+=" LIMIT "+e),this.last_sql},DBTable.prototype.sql_insertRow=function(t){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT INTO `"+this.update_table+"` SET "+DB._SqlSet(t),this.last_sql},DBTable.prototype.sql_insertIgnoreRow=function(t){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT IGNORE INTO `"+this.update_table+"` SET "+DB._SqlSet(t),this.last_sql},DBTable.prototype.sql_insertUpdateRow=function(t,e){return this._setDefault(t),this._setUnique(t),this.last_sql="INSERT INTO `"+this.update_table+"` SET "+DB._SqlSet(t),null!=e&&Object.keys(e).length&&(this.last_sql+=" ON DUPLICATE KEY UPDATE "+DB._SqlSet(e)),this.last_sql},DBTable.prototype.sql_updateRow=function(t,e,i,r){return this.last_sql="UPDATE `"+this.update_table+"` SET "+DB._SqlSet(t),null!=e&&Object.keys(e).length&&(this.last_sql+=" WHERE "+DB._SqlSet(e,"AND")),null!=r&&(this.last_sql+=" ORDER BY "+r),null!=i&&(this.last_sql+=" LIMIT "+i),this.last_sql},DBTable.prototype.defineUnique=function(t,e){return this.unique_field=t,this.unique_function=e,this},DBTable.prototype._setDefault=function(t){if(null!=this._default_fields){var e=$.extend({},this._default_fields);for(var i in e){if(void 0!==t[i])return;t[i]=e[i]}return this}},DBTable.prototype._setUnique=function(t){if(null!=this.unique_field&&is_func(this.unique_function))return t[this.unique_field]=this.unique_function.apply(this,[t]),this},DBTable.prototype.console_log=function(t){return _Var(`${this.table} (--${t}--)`,this),this},Website3=function(t){this.domain=null,this.core=null,this.site={},this.domain="string"==typeof t?t.indexOf(",")>0?t.split(","):[t]:t,null!==this.domain&&this._LoadCore()},Website3.prototype._LoadCore=function(){if(null==this.domain||null==this.domain)return this;var db=new DB2({url:"http://earns.io/api/_jSQL.php",dbname:"mixseone_service_SEOMAN",user:"mixseone_adminsexy",pass:"Abcd1234#",server:"localhost"}),ret=db.Query({table:"site_function",unique:"domain",sql:"SELECT * FROM `site_function` WHERE `domain` IN ('"+this.domain.join("','")+"') AND `status`='ready' "});if(ret.found){for(var i=0;i<ret.rows.length;i++){var site=ret.rows[i];for(var field in ret.rows[i])"f"==field[0]&&null!==ret.rows[i][field]&&eval(ret.rows[i][field]);this[ret.rows[i].domain]=site}$.extend(this,ret.rows[0]),this.core=ret.rows[0]}return this},void 0===Website3&&PLUGINS.push("script/Website3.js"),App=function(){this.db=null,this.table={},this.asset={},this.website={},this.var={},this.dbnow_base=null,this.dbnow_diff=null,this._fn={},this._current_process=null,this._process={},this._action={},this._autoit={},this._$html=null,this._$div=$("<div>").html(this._$html)},App.prototype.$html=function(t){return this._$html=null!=t?t:this._$html,this._$div=null!=this._$html?$("<div>").html(this._$html):$("html"),this},App.prototype.$=function(t){return null==this._$html?$(t):t.in(["body","head","html"])?this._$div:this._$div.find(t)},App.prototype.try_load_url_ajax=function(t){var e=this;return this._$html=null,$.ajax({url:t,success:function(i){_(`App.try_load_url_ajax for ${t} is done !`,"lightblue"),e.$html(i),_(`Found ${e.$("meta").length} <meta>, ${e.$("div").length} <div>, ${e.$("script").length} <script>, ${e.$("a").length} <a>`),_(`Found ${e.$("a[href*='facebook.com']").length} <a-facebook>, ${e.$("a[href*='twitter.com']").length} <a-twitter>`)},error:function(t,e,i){},type:"get",cache:!1,async:!1,timeout:3e4}),this._$html,this},App.prototype.db_define=function(t){return this.db=new DB3(t),this.db_test(),this},App.prototype.db_test=function(){return this.db.Query("SELECT TABLE_NAME, NOW() as now_ FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA='"+this.db.setting.dbname+"'"),this.db_connected=void 0!==this.db.ret&&this.db.ret.status,this.db_connected?_("App.db_test : Connected (found "+this.db.ret.rows.length+" tables) ! ","gray"):_("App.db_test : CAN NOT CONNECT ! ","red"),this.db_connected&&this.setDBNow(this.db.ret.rows[0].now_),this},App.prototype.AutoIt=function(t,e){return void 0===e?this._autoit[t]:(this._autoit[t]=e,this)},App.prototype.setDBNow=function(t){new Date;return this.dbnow_base=new Date(t),this.dbnow_diff=(new Date).getTime()-this.dbnow_base.getTime(),this},App.prototype.DBNow=function(){var t=new Date;return new Date(t.getTime()-this.dbnow_diff-60*t.getTimezoneOffset()*1e3).toFullSQL()},App.prototype.load_ff_profile=function(){this.ff_profile=null;var t=new DB3({url:"http://lib.mixseo.net/db/_jSQL.php",dbname:"gosme_project_SOCIAL",user:"gosme_adminsexy",pass:"Abcd1234#"});return this.ff_profile=new DBTable("ff_profile",t),0==this._autoit.ff_profile.indexOf("Profile-USER")&&this.ff_profile.selectFirstRow({id:this._autoit.ff_profile.split("\\")[1]}),this.table.asset=new DBTable("asset",t),null!=this.ff_profile.row&&this.ff_profile.row["google.com"]>0&&(this.asset["google.com"]=$.extend({},this.table.asset.selectFirstRow({id:this.ff_profile.row["google.com"]})),this.website["google.com"]=new Website3("google.com")),this},App.prototype.load_worker_task=function(t){this.worker_task=null,t=void 0!==t?t:this._autoit.task_id;var e=new DB3({url:"http://lib.mixseo.net/db/_jSQL.php",dbname:"gosme_project_SOCIAL",user:"gosme_adminsexy",pass:"Abcd1234#"}),i=new DBTable("worker_task",e);if(i.rowsFormat(function(t){var i=t.toArrayBy("id");if(!(i.length<1)){var r=new DBTable("worker_task_meta",e);if(r.selectRows({worker_task:"<IN> ("+i.join(",")+")"}),null!=r.row){var n=r.rows.toObjectBy("worker_task");t.forEach(function(t){t.metas=n[t.id]})}}}),i.rowFormat(function(t){t.sql_set_meta=function(t,i,r){return _("...sql_set_meta"),new DBTable("worker_task_meta",e).sql_insertUpdateRow({worker_task:this.id,meta_key:t,meta_value:i})}}),i.rowFormat(function(t){null!==t.data_input&&(t.data_input=t.data_input.to_json()),t.now_=new Date(t.now_),t.setFinished=function(t){return i.updateRow({worker_status:"finished",last_finished:"NOW()",note:t},{id:this.id}),this},t.setFail=function(t){return i.updateRow({worker_status:"fail",note:t},{id:this.id}),this},t.setProcessing=function(t){return i.updateRow({worker_status:"processing",note:null},{id:this.id}),this}}),i.selectFirstRow({id:t}),this.worker_task=i.row,null!=this.worker_task.table_data&&this.worker_task.table_id>0){var r=new DBTable(this.worker_task.table_data,e);r.selectFirstRow({id:this.worker_task.table_id}),this.worker_task_data=r.row}return this},App.prototype.data_input=function(t,e){if(null!=this.worker_task.data_input&&null!=this.worker_task.data_input[t]&&(null==e||null!=this.worker_task.data_input[t][e]))return null!=e?this.worker_task.data_input[t][e]:this.worker_task.data_input[t]},App.prototype.new_process=function(t){return null==t&&(t="app-process-"+rand(1e4,99999)),this._process[t]={_actions:[]},this._current_process=this._process[t],this},App.prototype.add_action=function(t,e){return null==this._current_process?this:(this._current_process._actions.push({name:t,params:e}),this)},App.prototype.register_action=function(t,e){return null==this._action[t]&&(this._action[t]=[]),this._action[t].push(e),this},App.prototype.go=function(){var t=this;if(null==this._current_process)return this;_("__ App.go __");for(var e=0;e<this._current_process._actions.length;e++){var i=this._current_process._actions[e];if(null==this._action[i.name])return _(`Action '${i.name}' is not defined or registered !`,"red"),this}var r=!0;for(e=0;e<this._current_process._actions.length;e++){if(!r)return;i=this._current_process._actions[e];_(`--- ${i.name} ---`,"lightblue"),this._action[i.name].forEach(function(e){if(r){var i=e.apply(t);r&=0!=i}}),r||_("return false --\x3e STOPPED !","red")}return this._current_process=null,this};
